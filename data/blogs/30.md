<!--
 * @Date: 2021-12-14 13:33:32
 * @LastEditors: lzj
 * @LastEditTime: 2021-12-14 13:51:44
 * @FilePath: \qianduan.shop\data\blogs\30.md
-->
# Doris-1.4.2 Linux 直接编译问题记录

官方文档：<a href="https://doris.apache.org/master/zh-CN/installing/compilation.html#%E7%9B%B4%E6%8E%A5%E7%BC%96%E8%AF%91-centos-ubuntu" target="_blank" rel="nofollow">直接编译-centos-ubuntu</a>

本文主要记录直接编译过程中遇到的问题，方便查询。

## 1.flex 版本太低，需要大于2.6.0

```
  [ec2-user ~] wget https://github.com/westes/flex/releases/download/v2.6.4/flex-2.6.4.tar.gz
  [ec2-user ~] tar -xvf  flex-2.6.4.tar.gz
  [ec2-user ~] cd flex-2.6.4
  [ec2-user flex-2.6.4] ./configure
  [ec2-user flex-2.6.4] make
  [ec2-user flex-2.6.4] make install

```

flex 软件包来源：<a href="https://bf.mengyan1223.wang/lfs/zh_CN/11.0/chapter03/packages.html" target="_blank" rel="nofollow">Linux From Scratch - 版本 11.0-中文翻译版</a>

<hr />

## 2.配置 JAVA_HOME 环境变量

参考：<a href="https://blog.csdn.net/qq_43491705/article/details/111354584" target="_blank" rel="nofollow">linux配置JAVA_HOME环境</a>

<hr />

## 3. cmake 版本太低，安装 cmake 提示找不到 openssl

cmake 安装参考问题1 flex版本更新，软件包来源：<a href="https://cmake.org/download/" target="_blank" rel="nofollow">CMake</a>

```
gmake: `cmake' is up to date.
loading initial cache file /home/ec2-user/cmake-3.22.1/Bootstrap.cmk/InitialCacheFlags.cmake
-- Could NOT find OpenSSL, try to set the path to OpenSSL root folder in the system variable OPENSSL_ROOT_DIR (missing: OPENSSL_CRYPTO_LIBRARY OPENSSL_INCLUDE_DIR)
CMake Error at Utilities/cmcurl/CMakeLists.txt:562 (message):
  Could not find OpenSSL.  Install an OpenSSL development package or
  configure CMake with -DCMAKE_USE_OPENSSL=OFF to build without OpenSSL.

```

**解决办法：**

```
yum install -y openssl openssl-devel

```