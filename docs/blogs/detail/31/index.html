<!--
 * @Date: 2022-01-20 14:27:07
 * @LastEditors: lzj
 * @LastEditTime: 2022-01-21 16:41:33
 * @FilePath: \qianduan.shop\front\src\pages\document.ejs
--><!DOCTYPE html><html><head><title data-react-helmet="true">Doris be运行一段时间后异常断开连接 - 前端网</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2087076429727327" crossorigin="anonymous"></script>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="/umi.css">
    <link rel="stylesheet" href="/layouts.chunk.css">
    <link rel="stylesheet" href="/p__blogs__detail__detail.chunk.css">
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.5.18
    </script>
    <title>文章详情</title>
  <meta data-react-helmet="true" name="description" content="doris,be,OOM,错误提示：terminate called after throwing an instance of &quot;std::bad_alloc&quot;"><meta data-react-helmet="true" name="keywords" content="doris,be,OOM">
</head>

  <body>
    <div id="root"><header class="header___2_57M"><img alt="farmerLZJ" class="title___MhkPP" src="/static/logo.68ff92ec.png"/></header><div style="width:100%;position:relative;top:0;z-index:999"><nav class="nav___3wfA1"><a href="https://izejun.com/blogs" class="item___AqKVH active___1THnk">Blog</a></nav></div><div class="content___2QN8t"><div class="content___1G4Bw"><article><p>&lt;!--
 <em> @Date: 2021-12-16 09:00:13
 </em> @LastEditors: lzj
 <em> @LastEditTime: 2021-12-16 09:39:21
 </em> @FilePath: \qianduan.shop\data\blogs\31.md
--&gt;</p>

<h1>Doris be运行一段时间后异常断开连接</h1>

<p>报错提示：</p>

<p><code></code>`
terminate called after throwing an instance of &#39;std::bad<em>alloc&#39;
  what():  std::bad</em>alloc
Minidump created at: /home/ec2-user/doris/be/minidump/9b820b8c-9591-4c1f-557f0597-62edfe46.dmp
<strong>* Aborted at 1639572821 (unix time) try &quot;date -d @1639572821&quot; if you are using GNU date </strong>*
PC: @     0x7feb5ab0aca0 __GI<em>raise
<strong>* SIGABRT (@0x4f71) received by PID 20337 (TID 0x7feab8080700) from PID 20337; stack trace: </strong>*
    @          0x2149ad2 google::(anonymous namespace)::FailureSignalHandler()
    @     0x7feb5ab0ad10 (unknown)
    @     0x7feb5ab0aca0 __GI</em>raise
    @     0x7feb5ab0c148 <strong>GI<em>abort
    @          0x1030f7f </em>ZN9</strong>gnu<em>cxx27__verbose</em>terminate<em>handlerEv.cold
    @          0x3898ca6 <strong>cxxabiv1::</strong>terminate()
    @          0x3898d11 std::terminate()
    @          0x3898e64 __cxa</em>throw
    @          0x103004c <em>ZN12</em>GLOBAL<strong>N<em>110handle</em>oomEPFPvS0<em>ES0</em>bb.cold
    @          0x396307f tcmalloc::allocate<em>full</em>cpp<em>throw</em>oom()
    @          0x38b7991 std::string::<em>Rep::</em>S<em>create()
    @          0x38b87ce std::string::</em>Rep::<em>M</em>clone()
    @          0x38b8884 std::string::reserve()
    @          0x38b8c8c std::string::append()
    @          0x14fdb9d apache::thrift::protocol::TBinaryProtocolT&lt;&gt;::readStringBody&lt;&gt;()
    @          0x14fdcfc apache::thrift::protocol::TVirtualProtocol&lt;&gt;::readMessageBegin<em>virt()
    @          0x1727fab apache::thrift::TDispatchProcessor::process()
    @          0x2135021 apache::thrift::server::TConnectedClient::run()
    @          0x212d8c3 apache::thrift::server::TThreadedServer::TConnectedClientRunner::run()
    @          0x212ff83 apache::thrift::concurrency::Thread::threadMain()
    @          0x211f7e0 std::thread::</em>State<em>impl&lt;&gt;::</em>M<em>run()
    @          0x39148b0 execute</em>native<em>thread</em>routine
    @     0x7feb5a8c040b start_thread
    @     0x7feb5abc440f </strong>GI___clone
    @                0x0 (unknown)</p>

<p><code></code>`</p>

<h2>问题原因</h2>

<p>内存溢出，由于是测试环境，我们选用的 EC2 实例内存（1G）比较小，容易出现内存溢出。</p>

<h2>解决办法</h2>

<p>① 增加机器内存</p>

<p>② 设置 echo 1 &gt; /proc/sys/vm/overcommit_memory 允许过量使用内存.</p>

<p><code></code>`
sudo -i</p>

<p>echo 1 &gt; /proc/sys/vm/overcommit_memory</p>

<p><code></code>`</p>

<p>直接使用sudo echo 1 &gt; /proc/sys/vm/overcommit_memory 也会提示 Permission denied。</p></article><div><span class="ant-tag ant-tag-geekblue">#<span>doris</span></span><span class="ant-tag ant-tag-volcano">#<span>be</span></span><span class="ant-tag ant-tag-error">#<span>OOM</span></span></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><ins class=" adsbygoogle" style="display:block;text-align:center;width:100%;height:90px" data-ad-client="ca-pub-2087076429727327" data-ad-slot="9331479126" data-ad-layout="" data-ad-layout-key="" data-ad-format="auto" data-full-width-responsive="false"></ins></div><div class="container___8WoUM"><p class="title___3k8xL">Online Tools</p><div class="tool_tags___1ccK5"><span class="ant-tag ant-tag-blue tool_tag___1JT6M">JSON Formater</span><span class="ant-tag ant-tag-cyan tool_tag___1JT6M">MD5</span><span class="ant-tag ant-tag-error tool_tag___1JT6M">timestamps</span><span class="ant-tag ant-tag-green tool_tag___1JT6M">Cron Expresstion</span></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><div style="text-align:center;height:300px"><ins class=" adsbygoogle" style="display:inline-block;width:250px;height:300px" data-ad-client="ca-pub-2087076429727327" data-ad-slot="7022357395" data-ad-layout="" data-ad-layout-key="" data-ad-format="auto" data-full-width-responsive="false"></ins></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><div style="text-align:center;height:300px"><ins class=" adsbygoogle" style="display:inline-block;width:250px;height:300px" data-ad-client="ca-pub-2087076429727327" data-ad-slot="7022357395" data-ad-layout="" data-ad-layout-key="" data-ad-format="auto" data-full-width-responsive="false"></ins></div></div></div><footer class="footer___3wR6c">©2021 farmerlzj 提供技术支持 | 联系我们：farmerlzj@163.com |<!-- --> <a href="https://beian.miit.gov.cn/" rel="nofollow" target="_blank">蜀ICP备2021025378号-1</a></footer><div class="ant-back-top"></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="https://cloud.qianduan.shop/react.min.js"></script>
    <script src="https://cloud.qianduan.shop/react-dom.min.js"></script>
    <script src="/umi.js"></script>
    <script src="/layouts.js"></script>
    <script src="/p__blogs__detail__detail.js"></script>
  

</body></html>