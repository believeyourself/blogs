(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"+EH1":function(n,e,r){"use strict";r.r(e),e["default"]='# \u5982\u4f55\u5b9e\u73b0cli\u547d\u4ee4\u884c\u5de5\u5177\r\n\r\n## 1.\u521b\u5efa\u9879\u76ee my-cli\uff0c\u5e76\u521d\u59cb\u5316package.json\r\n\r\n```\r\nmkdir my-cli && cd my-cli\r\nnpm init\r\n\r\n```\r\n\r\n## 2.cli\u5165\u53e3\r\n\r\n\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e0b\u521b\u5efa\u5165\u53e3\u6587\u4ef6 index.js \u5e76\u6dfb\u52a0\u521d\u59cb\u5185\u5bb9\u3002\r\n\r\n```\r\n\r\n#!/usr/bin/env node //\u6307\u5b9a\u7531\u54ea\u4e2a\u89e3\u91ca\u5668\u6765\u6267\u884c\u811a\u672c\r\n\r\nconsole.log(\'hello world\');\r\n\r\n```\r\n\r\n\u7136\u540e\u5728package.json\u4e2d\u914d\u7f6e bin \u5b57\u6bb5\u6307\u5411\u6211\u4eec\u7684\u5165\u53e3\u6587\u4ef6 index.js\u3002\r\n\r\n```\r\n"bin": {\r\n  "mycli": "index.js"\r\n},\r\n\r\n```\r\n\r\n## \u672c\u5730\u8c03\u8bd5\r\n\r\n\u6267\u884c npm link \u547d\u4ee4\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5168\u5c40\u4f7f\u7528 mycli \u547d\u4ee4\u4e86\u3002\r\n\r\n\u4e00\u4e2a\u57fa\u672c\u7684cli\u67b6\u5b50\u5c31\u642d\u5efa\u597d\u4e86\u3002\u5177\u4f53\u7684\u529f\u80fd\u4ee3\u7801\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u586b\u5145\u8fdbcli\u5de5\u5177\u5c31\u884c\u3002\r\n\r\n## cli \u53d1\u5e03\r\n\r\n```\r\n  npm publish\r\n  \r\n```\r\n\r\n\r\n\r\n\r\n## \u547d\u4ee4\u884c\u8f85\u52a9\u5de5\u5177\u5e93\r\n\r\n\u2460 Commander.js - \u5e2e\u52a9\u53c2\u6570\u89e3\u6790\uff0c\u6211\u6700\u5e38\u7528\r\n\u2461 optionator - \u5e2e\u52a9\u53c2\u6570\u89e3\u6790\uff0cEslint \u4f7f\u7528\r\n\u2462 Inquirer.js - \u5e38\u89c1\u4ea4\u4e92\u5f0f\u547d\u4ee4\u884c\r\n\u2463 chalk - \u547d\u4ee4\u884c\u8f93\u51fa\u81ea\u5b9a\u4e49\u989c\u8272'},"1gqn":function(n,e){n.exports=function(n){return n&&"object"===typeof n&&"function"===typeof n.copy&&"function"===typeof n.fill&&"function"===typeof n.readUInt8}},"1hAn":function(n,e,r){var t={"./1.md":"tljC","./10.md":"J55p","./2.md":"Sd6e","./3.md":"CiKJ","./4.md":"MW4u","./5.md":"P56z","./6.md":"UgUT","./7.md":"nixE","./8.md":"SrX3","./9.md":"6xFf","./zh/11.md":"YZ5/","./zh/12.md":"jYGW","./zh/13.md":"LzLu","./zh/14.md":"ABQd","./zh/15.md":"cq0f","./zh/16.md":"JN/6","./zh/17.md":"pMRU","./zh/18.md":"Tho3","./zh/19.md":"AuwF","./zh/20.md":"E+I+","./zh/21.md":"u0sx","./zh/22.md":"+EH1","./zh/23.md":"O9bE","./zh/24.md":"DZYA","./zh/25.md":"kUOa","./zh/26.md":"n4kd","./zh/27.md":"898M","./zh/28.md":"2uBy","./zh/29.md":"ZQeU","./zh/30.md":"HU5/","./zh/31.md":"Iweq","./zh/32.md":"S9YV","./zh/33.md":"tZMB","./zh/34.md":"7CV3","./zh/35.md":"bUk7","./zh/36.md":"3XNm","./zh/37.md":"UJWk","./zh/38.md":"wn87","./zh/39.md":"9R4y"};function o(n){var e=i(n);return r(e)}function i(n){if(!r.o(t,n)){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}return t[n]}o.keys=function(){return Object.keys(t)},o.resolve=i,n.exports=o,o.id="1hAn"},"2uBy":function(n,e,r){"use strict";r.r(e),e["default"]="\x3c!--\r\n * @Date: 2021-12-08 15:13:55\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-08 15:13:56\r\n * @FilePath: \\qianduan.shop\\data\\blogs\\28.md\r\n--\x3e\r\n# AWS EC2 \u5982\u4f55\u6269\u5c55 EBS \u78c1\u76d8\r\n\r\n\u6700\u8fd1\u53c8\u5f00\u59cb\u4f7f\u7528 AWS \u7684 EC2,\u5728\u9009\u53d6 EC2 \u914d\u7f6e\u7684\u65f6\u5019\u78c1\u76d8\u914d\u7f6e\u5927\u5c0f\u9ed8\u8ba4\u9009\u7528\u7684\u6700\u5c0f\u7684 8G ,\u540e\u671f\u5927\u5c0f\u4e0d\u591f\u7528\u4e86\u5c31\u9700\u8981\u6269\u5c55\u78c1\u76d8\u5927\u5c0f\u3002\r\n\r\n## 1.\u5728\u539f\u6709\u78c1\u76d8\u7684\u57fa\u7840\u4e0a\u6269\u5c55\r\n\r\n\u2460 \u5728 web \u63a7\u5236\u53f0\u627e\u5230\u8981\u5904\u7406\u7684 EC2 \u673a\u5668\u7684 EBS \u78c1\u76d8\uff0c\u6839\u636e\u5b9e\u9645\u9700\u8981\u4fee\u6539 EBS \u78c1\u76d8\u7684 \u5927\u5c0f, IOPS \u548c\u541e\u5410\u91cf\uff0c\u8fd9\u4e2a\u6bd4\u8f83\u7b80\u5355\uff0c\u4e0d\u7ec6\u8bf4\uff0c\u90fd\u662f\u7ba1\u7406\u540e\u53f0\u7684\u754c\u9762\u64cd\u4f5c\u3002\r\n\r\n\u2461 ssh \u8fdc\u7a0b\u767b\u5f55 EC2\u3002\r\n\r\n\u2462 \u67e5\u770b\u5f53\u524d\u7684\u78c1\u76d8\u6587\u4ef6\u7cfb\u7edf\u5927\u5c0f\uff1a\r\n\r\n```\r\n[ec2-user ~]$ df -hT\r\nFilesystem    Type  Size  Used  Avail Use% Mounted on\r\n/dev/xvda1     xfs   8G   1.5G   6.5G  16%  /\r\n... //\u7701\u7565\u5176\u4ed6\r\n```\r\n\r\n\u2463 \u4f7f\u7528 lsblk \u547d\u4ee4\u663e\u793a\u6709\u5173\u9644\u52a0\u5230 EC2 \u5b9e\u4f8b\u7684 xvda \u5757\u50a8\u5b58\u8bbe\u5907\u7684\u4fe1\u606f\u3002\r\n\r\n```\r\n[ec2-user ~]$ lsblk\r\nNAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\r\nxvda    202:0    0  16G  0 disk \r\n\u2514\u2500xvda1 202:1    0  8G  0 part /\r\n\r\n```\r\n\r\n\u8fd9\u4e2a\u4f8b\u5b50\u8f93\u51fa\u663e\u793a\u4ee5\u4e0b\u5185\u5bb9\uff1a\r\n\r\n\u6839\u5377 /dev/xvda \u5177\u6709\u4e00\u4e2a\u5206\u533a /dev/xvda1\u3002\u6839\u5377\u5927\u5c0f\u4e3a\u5927\u5c0f 16 GB\uff0c\u5206\u533a\u7684\u5927\u5c0f\u4e3a\u5927\u5c0f 8 GB\uff0c\u53ef\u4ee5\u5bf9\u5206\u533a\u8fdb\u884c\u6269\u5c55\u3002\r\n\r\n\u2464 \u4f7f\u7528 growpart \u547d\u4ee4\u6269\u5c55\u5206\u533a\uff0c\u6ce8\u610f\u8bbe\u5907\u540d\u79f0\uff08/dev/xvda1\uff09\u548c\u5206\u533a\u7f16\u53f7\uff081\uff09\u4e4b\u95f4\u6709\u7a7a\u683c\u3002\r\n\r\n```\r\n[ec2-user ~]$ sudo growpart /dev/xvda1 1\r\n\r\n```\r\n\r\n\u2465 \u5728\u6b64\u4f7f\u7528 lsblk \u547d\u540d\u9a8c\u8bc1\u6269\u5c55\u5206\u533a\u7ed3\u679c \r\n\r\n```\r\n[ec2-user ~]$ lsblk\r\nNAME    MAJ:MIN RM SIZE RO TYPE MOUNTPOINT\r\nxvda    202:0    0  16G  0 disk \r\n\u2514\u2500xvda1 202:1    0  16G  0 part /\r\n\r\n```\r\n\r\n\u2467 XFS \u5377\u4f7f\u7528 xfs_growfs \u6269\u5c55\u6587\u4ef6\u7cfb\u7edf\r\n\r\n```\r\n[ec2-user ~]$ sudo xfs_growfs -d /\r\n```\r\n\r\n\u5982\u679c\u5c1a\u672a\u5b89\u88c5 XFS \u5de5\u5177\uff0c\u53ef\u4ee5\u6309\u5982\u4e0b\u65b9\u5f0f\u5b89\u88c5\u3002\r\n\r\n```\r\n[ec2-user ~]$ sudo yum install xfsprogs\r\n```\r\n\r\n\u2468 \u4f7f\u7528 df -h \u547d\u4ee4\u4f7f\u7528 df -h \u547d\u4ee4\u9a8c\u8bc1\u6587\u4ef6\u7cfb\u7edf\u7684\u5927\u5c0f\uff0c\u6269\u5c55 ESB \u5b8c\u6210\u3002\r\n\r\n```\r\n[ec2-user ~]$ df -hT\r\nFilesystem    Type  Size  Used  Avail Use% Mounted on\r\n/dev/xvda1     xfs   16G   1.5G   14.5G  10%  /\r\n... //\u7701\u7565\u5176\u4ed6\r\n```\r\n"},"3XNm":function(n,e,r){"use strict";r.r(e),e["default"]="# Doris \u7528\u6237\u64cd\u4f5c\u8bed\u53e5\u901f\u89c8\r\n\r\nDoris \u5e38\u7528 SQL \u8bed\u53e5\u5feb\u901f\u6d4f\u89c8\uff0c\u8bb0\u5f55\u5e38\u7528SQL\uff0c\u65b9\u4fbf\u9605\u8bfb\u67e5\u8be2\uff0c\u547d\u4ee4\u8bb0\u5f55\u8fd8\u4e0d\u5b8c\u6574\uff0c\u540e\u7eed\u4f1a\u6301\u7eed\u66f4\u65b0\u3002\r\n\r\n\u5173\u4e8e\u5404\u547d\u4ee4\u7684\u8be6\u7ec6\u53c2\u6570\u53c2\u8003<a href=\"https://doris.apache.org/master/zh-CN/installing/compilation.html\" target=\"_blank\" ref=\"nofollow\">\u5b98\u7f51</a>.\r\n\r\n## \u8fde\u63a5 Fe\r\n\r\n\u4f7f\u7528mysql client\r\n\r\n```\r\nmysql -h FE_HOST -P9030 -uroot\r\n```\r\n\r\n## \u7528\u6237\u64cd\u4f5c\r\n\r\n1.\u521b\u5efa\u7528\u6237\r\n```\r\nCREATE USER 'test' IDENTIFIED BY 'test_passwd';\r\n```\r\n\r\n2.\u5220\u9664\u7528\u6237\r\n\r\n3.\u7528\u6237\u6388\u6743\r\n\r\n```\r\nGRANT ALL ON database TO user;\r\n```\r\n4.\u4fee\u6539\u7528\u6237\u5bc6\u7801\r\n\r\n```\r\nSET PASSWORD FOR 'root' = PASSWORD('your_password');\r\n```\r\n\r\n## \u5e93\u64cd\u4f5c\r\n\r\n1.\u5efa\u5e93\r\n\r\n```\r\nCREATE DATABASE db_name;\r\n```\r\n\r\n2.\u9009\u4e2d\u5e93\r\n\r\n```\r\nUSE db_name;\r\n```\r\n\r\n3.\u5220\u9664\u5e93\r\n\r\n```\r\nDROP DATABASE db_name\r\n```\r\n\r\n4.\u67e5\u770b\u5e93\r\n\r\n```\r\nSHOW DATABASES;\r\n```\r\n\r\n## \u8868\u64cd\u4f5c\r\n\r\n1.\u5efa\u8868\r\n\r\n```\r\nCREATE TABLE table2\r\n(\r\n    event_day DATE,\r\n    siteid INT DEFAULT '10',\r\n    citycode SMALLINT,\r\n    username VARCHAR(32) DEFAULT '',\r\n    pv BIGINT SUM DEFAULT '0'\r\n)\r\nAGGREGATE KEY(event_day, siteid, citycode, username)\r\nPARTITION BY RANGE(event_day)\r\n(\r\n    PARTITION p201706 VALUES LESS THAN ('2017-07-01'),\r\n    PARTITION p201707 VALUES LESS THAN ('2017-08-01'),\r\n    PARTITION p201708 VALUES LESS THAN ('2017-09-01')\r\n)\r\nDISTRIBUTED BY HASH(siteid) BUCKETS 10\r\nPROPERTIES(\"replication_num\" = \"1\");\r\n\r\n```\r\n\r\n2.\u5220\u9664\u8868\r\n\r\n```\r\nDROP TABLE table_name;\r\n```\r\n\r\n3.\u66ff\u6362\u8868\r\n\r\n```\r\nALTER TABLE table_1 REPLACE WITH TABLE table_2 PROPERTIES('swap' = 'false');\r\n```\r\n\r\n4.\u67e5\u770bpartition\r\n\r\n```\r\nSHOW PARTITIONS FROM Didabu.log_event;\r\n```\r\n\r\n5.\u589e\u52a0\u5217\r\n\r\n```\r\nALTER TABLE db_name.table_name ADD COLUMN column_name bigint(20) default \"0\";\r\n```\r\n\r\n6.\u5220\u9664\u5217\r\n\r\n```\r\nALTER TABLE db_name.table_name DROP COLUMN column_name;\r\n```\r\n\r\n7.\u67e5\u770b\u8868\u7ed3\u6784\u53carolluop\u3001\u7269\u5316\u89c6\u56fe\r\n\r\n```\r\ndesc Didabu.test all\r\n```\r\n\r\n## Rollup\r\n\r\n1.\u521b\u5efa\r\n\r\n```\r\nALTER TABLE db_name.table_name ADD ROLLUP rollup_name(field_1,field_2,...);\r\n```\r\n\r\n2.\u5220\u9664\r\n\r\n3.\u67e5\u770b\r\n\r\n```\r\nSHOW ALTER TABLE ROLLUP FROM db_name;\r\n```\r\n\r\n## \u7269\u5316\u89c6\u56fe\r\n\r\n1.\u521b\u5efa\r\n\r\n```\r\nCREATE MATERIALIZED VIEW mv_name AS SELECT field_1, sum(field_2) FROM table_name GROUP BY field_1;\r\n```\r\n\r\n2.\u5220\u9664\r\n\r\n```\r\nDROP MATERIALIZED VIEW mv_name ON db_name.table_name;\r\n```\r\n\r\n3.\u67e5\u770b\r\n\r\n```\r\nSHOW ALTER TABLE MATERIALIZED VIEW FROM db_name;\r\n```\r\n\r\n## be \u76f8\u5173\u64cd\u4f5c\r\n\r\n1.\u6dfb\u52a0 be\r\n\r\n```\r\nALTER SYSTEM ADD BACKEND \"172.31.43.204:9050\";\r\n```\r\n\r\n2.\u5220\u9664 be\r\n\r\n\u5f3a\u5236\u5220\u9664\r\n```\r\nALTER SYSTEM DROPP BACKEND \"172.31.43.204:9050\";\r\n```\r\n\r\n3.\u67e5\u770b be\r\n\r\n```\r\nSHOW backends;\r\n```\r\n\r\n## \u5176\u4ed6\u64cd\u4f5c\r\n"},"6xFf":function(n,e,r){"use strict";r.r(e),e["default"]="\x3c!--\r\n * @Date: 2021-12-27 14:41:11\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2022-01-22 09:37:51\r\n * @FilePath: \\qianduan.shop\\front\\data\\blogs\\9.md\r\n--\x3e\r\n# Prototypes and prototype chains, inheritance\r\n\r\n## Prototype.\r\n\r\nEach function function has a prototype attribute pointing to an object, which is the prototype object. Each instance object created by the constructor inherits this prototype object and contains the __proto__ attribute pointing to the prototype object.\r\n\r\n## Prototype chain.\r\n\r\nEach object will contain a prototype object, and a prototype object is also an object, so it will also contain a prototype, so the chain association formed is the prototype chain.\r\n\r\nThe principle of instanceof\r\nThe main implementation principle of instanceof is that as long as the prototype of the right variable is in the prototype chain of the left variable\r\n\r\n```\r\nfunction instanceOf(left,right){\r\n    let rightPrototype = right.prototype;\r\n    let leftPrototype = left.__proto__;\r\n    while(leftPrototype){\r\n        if(leftPrototype === rightPrototype){\r\n            return true;        \r\n        }\r\n        leftPrototype = leftPrototype.__proto__;\r\n    }\r\n    \r\n    return false;\r\n}\r\n```\r\n\r\n## Inheritance.\r\n### 1. Prototype chain inheritance\r\n\r\n```\r\nfunction A(){};\r\nfunction B(){};\r\nB.prototype = new A();//prototype inheritance, the properties on the prototype are shared by all instances, and the reference type properties are also shared\r\nB.prototype.constructor = B;\r\n```\r\n\r\n\r\n### 2. Borrowing constructor (classical inheritance)\r\n\r\n```\r\nfunction A(){};\r\nfunction B(){\r\n    A.call(this);//borrow constructor inheritance, not inherit A's prototype\r\n};\r\n```\r\n\r\n### 3. Combined inheritance (prototype chain inheritance + borrowed constructor inheritance)\r\n\r\n```\r\nfunction A(){};\r\nfunction B(){\r\n    A.call(this);//borrowed constructor inheritance, not inherit the prototype, the first call to A's constructor\r\n};\r\nB.prototype = new A();//prototype inheritance, the second call to the constructor of A, A function of the non-prototype properties to retain two copies\r\nB.prototype.constructor = B; //Modify the constructor of the B prototype\r\n```\r\n\r\n### 4. Prototype inheritance (es5 implementation of Object.create), the object passed in as the prototype of the created object.\r\n\r\n```\r\nfunction createObj(o){\r\n    function A(){}\r\n    A.prototype = o;\r\n    return new A();\r\n}\r\n```\r\n\r\n### 5. Parasitic inheritance\r\n\r\n```\r\nfunction createObj (o) {\r\n    let clone = Object.create(o);\r\n    clone.sayName = function () {\r\n        console.log('hi');\r\n    }\r\n    return clone;\r\n}\r\n```\r\n\r\n### 6. Combinatorial parasitic inheritance\r\n\r\n```\r\nfunction A () {}\r\nfunction B () {\r\n    A.call(this);\r\n}\r\nB.prototype = createObj(A.prototype);\r\nB.prototype.constructor = B;\r\n\r\n```\r\n\r\n"},"7CV3":function(n,e,r){"use strict";r.r(e),e["default"]='# Doris be \u65e5\u5fd7\u5927\u91cf\u8b66\u544a\uff1a/brpc/src/brpc/socket.cpp:1196] Fail to wait EPOLLOUT of fd=187: Connection timed out\r\n\r\n## \u80cc\u666f\r\n\r\n\u6d4b\u8bd5\u73af\u5883\uff1a1\u53f0 fe\uff082\u68388G\uff09 + 3 \u53f0be\uff082\u68388G\uff09,\u91c7\u7528 stream load \u65b9\u5f0f\u5bfc\u5165\u6570\u636e\uff0c\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u5927\u91cf\u51fa\u73b0 Fail to wait EPOLLOUT of fd=187: Connection timed out [110] \u7684\u65e5\u5fd7\u3002\r\n\r\n\u65e5\u5fd7\u5982\u4e0b\uff1a\r\n\r\n```\r\nW0102 04:50:16.640652  4216 socket.cpp:1194] Fail to wait EPOLLOUT of fd=365: Connection timed out [110]\r\nW0102 04:50:17.641734  4216 socket.cpp:1194] Fail to wait EPOLLOUT of fd=365: Connection timed out [110]\r\nW0102 04:50:18.141074  4216 socket.cpp:1194] Fail to wait EPOLLOUT of fd=452: Connection timed out [110]\r\nW0102 04:50:20.141149  4216 socket.cpp:1194] Fail to wait EPOLLOUT of fd=313: Connection timed out [110]\r\nW0102 04:50:21.142115  4212 socket.cpp:1194] Fail to wait EPOLLOUT of fd=326: Connection timed out [110]\r\n\r\n```\r\n## Doris \u72b6\u6001\r\n\r\n\u5bfc\u5165\u6570\u636e\u91cf\u4e5f\u4e0d\u5927\uff0c\u6bcf\u6b21\u6700\u591a\u5bfc\u51651000\u6761\u6570\u636e\uff0c\u5185\u5b58\u78c1\u76d8\u90fd\u6b63\u5e38\uff0cbe\u5927\u6982\u8fd8\u5269 1.5G \u5de6\u53f3\u5185\u5b58\uff0c\u78c1\u76d8 50G \u7684\u57fa\u672c\u6ca1\u6d88\u8017\u3002\r\n\r\n## \u5982\u4f55\u89e3\u51b3\r\n\r\n\u6682\u65f6\u6ca1\u627e\u5230\u539f\u56e0\uff0c\u76ee\u524d\u770b\u5e76\u6ca1\u6709\u5bfc\u81f4 be \u6302\u6389\u3002\r\n\r\n\u7f51\u4e0a\u627e\u89e3\u51b3\u529e\u6cd5\u4e5f\u6ca1\u6709\u627e\u5230\uff0c\u53ea\u6709\u4e00\u4e2a\u672a\u89e3\u51b3\u7684 <a href="https://github.com/apache/incubator-brpc/issues/1410" target="__blank" rel="nofllow">issue</a>\u3002\r\n\r\n> 1.\u5bf9\u7aef\u542f\u52a8\u4e86\u5417\uff1f\r\n> 2.\u80fd\u63d0\u4f9b\u4e0b\u6700\u5c0f\u590d\u73b0\u7684\u4ee3\u7801\u5417\uff0c\u53ef\u80fd\u4e0d\u662f\u5bf9\u7aef\u6ca1\u6709\u542f\u52a8\u7684\u539f\u56e0\r\n> 3.\u573a\u666f\u5c31\u662f\uff1aclient --- server --- backupend\r\n> \u5982\u679cclient\u4fa7\u7684timeout_ms\u6bd4server\u5230backupend\u7684timeout_ms\u5c0f\u7684\u65f6\u5019\u3002\r\n> client\u8d85\u65f6\uff0c\u65ad\u5f00\u8fde\u63a5\uff0cserver\u611f\u77e5\u4e0d\u5230\uff0c\u5bfc\u81f4\u94fe\u63a5\u5904\u4e8eCLOSE_WAIT\uff0c\u5f53\u8d85\u8fc7\u4e86\u7cfb\u7edf\u8fde\u63a5\u9650\u5236\u5c31\u8fdb\u5165\u5047\u6b7b\u72b6\u6001\u3002\r\n> 4.--usercode_in_pthread=true\r\n> \u53bb\u6389\u8fd9\u4e2a\uff0cCLOSE_WAIT\u5f88\u5feb\u5c31\u91ca\u653e\u4e86\uff0c\u5982\u679c\u5b58\u5728\u8fd9\u4e2a\u914d\u7f6e\uff0cCLOSE_WAIT\u4f1a\u4e00\u76f4\u5b58\u5728\u3002\r\n> 6.\u5982\u679cclient\u9047\u5230\u8d85\u65f6\u5173\u95ed\u8fde\u63a5\uff0c\u4f46\u662fserver\u7aef\u8fd8\u5361\u5728\u548cbackupend\u901a\u4fe1\u4e2d\uff0c\u5e76\u672a\u7ed3\u675f\u8bf7\u6c42\uff0c\u8fd9\u65f6\u5019CLOSE_WAIT\u662f\u7b26\u5408\u9884\u671f\u7684\r\n\r\n\u77e5\u9053\u95ee\u9898\u539f\u56e0\u6216\u8005\u89e3\u51b3\u529e\u6cd5\u7684\u5c0f\u4f19\u4f34\u8bf7 <a href="https://qianduan.shop/aboutUs" target="__blank" rel="nofllow">\u7559\u8a00</a> \u544a\u8bc9\u6211\u4eec\uff0c\u8c22\u8c22\uff01'},"898M":function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-07 19:18:18\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-09 19:21:39\r\n * @FilePath: \\qianduan.shop\\data\\blogs\\27.md\r\n--\x3e\r\n# React \u7236\u7ec4\u4ef6\u5982\u4f55\u8c03\u7528\u5b50\u7ec4\u4ef6\u65b9\u6cd5\r\n## \u5b50\u7ec4\u4ef6\u662f\u7c7b\u7ec4\u4ef6\uff0c\u4f7f\u7528 Refs\r\n\u4f7f\u7528 React.createRef() \u521b\u5efa Refs, Refs \u53ef\u4ee5\u901a\u8fc7 ref \u5c5e\u6027\u9644\u52a0\u5230\u5143\u7d20\u8282\u70b9\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7 ref.current \u8bbf\u95ee\u88ab\u9644\u52a0\u7684\u5143\u7d20\u8282\u70b9\u3002\r\n\r\n\u4f8b\u5982\uff1a\r\n\r\n```\r\nclass MyComponent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.myRef = React.createRef();\r\n  }\r\n  render() {\r\n    return <input ref={this.myRef} />;\r\n  }\r\n}\r\n```\r\n\r\n\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 myRef.current \u8bbf\u95ee\u5230 input \u8282\u70b9\uff0c\u4ece\u800c\u53ef\u4ee5\u8c03\u7528input\u4e0a\u8bf8\u5982 focus \u7b49\u65b9\u6cd5\u3002\r\n\r\n\u4e0d\u540c\u7684\u5143\u7d20\u7c7b\u578b\u4f1a\u5bfc\u81f4 ref \u7684\u503c\u4e0d\u540c\uff1a\r\n\u2460 \u5f53 ref \u9644\u52a0\u7684\u5143\u7d20\u662f HTML \u5143\u7d20\u65f6\uff0cref.current \u6307\u5411\u7684\u662f\u5e95\u5c42\u7684DOM\u5143\u7d20\u3002\r\n\u2461 \u5f53 ref \u9644\u52a0\u7684\u5143\u7d20\u662f class \u7ec4\u4ef6\u65f6\uff0cref.current \u6307\u5411 class \u7ec4\u4ef6\u5b9e\u4f8b\u3002\r\n\r\n**\u6ce8\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e0d\u80fd\u5728\u51fd\u6570\u7ec4\u4e0a\u4f7f\u7528 ref \u5c5e\u6027, \u56e0\u4e3a\u4ed6\u4eec\u6ca1\u6709\u5b9e\u4f8b\u3002**\u4f46\u7ed3\u5408 forwardRef \u65b9\u6cd5\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u51fd\u6570\u7ec4\u4ef6\u4e0a\u4f7f\u7528 ref\uff0c\u540e\u9762\u4f1a\u4ecb\u7ecd\u3002\r\n\r\n## \u5b50\u7ec4\u4ef6\u662f\u51fd\u6570\u7ec4\u4ef6\uff0c\u4f7f\u7528 Refs \u8f6c\u53d1\r\n\r\n### \u2460 \u4f7f\u7528 forwardRef \u8f6c\u53d1 Refs \u5230 DOM \u7ec4\u4ef6\uff0c\u5c31\u662f\u5c06 \u7236\u7ec4\u4ef6\u7684 ref \u5411\u4e0b\u4f20\u9012\u7ed9\u5b50\u7ec4\u4ef6\u3002\r\n\r\n\u4f8b\u5982\uff1a\r\n\r\n```\r\nfunction Farther = ()= {\r\n const ref = useRef(null);\r\n\r\n return <ChildB ref={ref} />\r\n};\r\n\r\nconst ChildB = React.forwardRef(ChildA);\r\n\r\nfunction ChildA = (pops,ref) => {\r\n  return <input ref={ref} />\r\n};\r\n\r\n```\r\n\r\n\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u7236\u7ec4\u4ef6 Father \u5c31\u80fd\u901a\u8fc7 ref.current \u8bbf\u95ee\u5b50\u7ec4\u4ef6 ChildA \u4e2d\u7684 input \u5143\u7d20\u3002\r\n\r\n**\u6ce8\uff1aChildA \u5b50\u7ec4\u4ef6\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570\u53ea\u5728\u4f7f\u7528 React.createRef \u5b9a\u4e49\u65f6\u5b58\u5728\uff0c\u5e38\u89c4\u7684\u51fd\u6570\u7ec4\u4ef6\u548c class \u7ec4\u4ef6\u90fd\u662f\u4e0d\u63a5\u53d7 ref \u53c2\u6570\u7684\uff0c\u800c\u4e14 Props \u4e2d\u4e5f\u4e0d\u5b58\u5728 ref \u3002\u8f6c\u53d1\u7684 ref \u4e5f\u53ea\u80fd\u9644\u52a0\u7684 HTML \u5143\u7d20 \u6216 class \u7ec4\u4ef6\u5b9e\u4f8b**\r\n\r\n### \u2461 forwardRef \u7ed3\u5408 useImperativeHandle \u4f7f\u7528\uff0c\u81ea\u5b9a\u4e49\u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u503c\u3002\r\n\r\nuseImperativeHandle \u53ef\u4ee5\u8ba9\u4f60\u5728\u4f7f\u7528 ref \u65f6\u81ea\u5b9a\u4e49\u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u503c\u3002\r\n\r\n\u4f8b\u5982\uff1a\r\n\r\n```\r\nfunction Farther = ()= {\r\n const ref = useRef(null);\r\n\r\n return <ChildB ref={ref} />\r\n};\r\n\r\nconst ChildB = React.forwardRef(ChildA);\r\n\r\nfunction ChildA = (pops,ref) => {\r\n  useImperativeHandle(ref,()=({\r\n    name: "ChildA"\r\n    log: log,\r\n  }));\r\n  const log = ()=>{\r\n    console.log("\u5b50\u7ec4\u4ef6\u5185\u90e8log")\r\n  }\r\n  return <input />\r\n};\r\n\r\n```\r\n\r\n\u4e0a\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u7236\u7ec4\u4ef6 Father \u62ff\u5230\u7684 ref.current \u7684\u503c\u5c31\u662f\u5bf9\u8c61 {name:"ChildA",log:log}, \u7236\u7ec4\u4ef6\u4e5f\u80fd\u901a\u8fc7 ref.current.log \u8c03\u7528\u5b50\u7ec4\u4ef6\u7684 log \u65b9\u6cd5\u3002\r\n\r\n### \u2462 \u5728\u9ad8\u9636\u7ec4\u4ef6(HOC)\u4e2d\u8f6c\u53d1 Refs\r\n\r\n\u9ad8\u9636\u7ec4\u4ef6\u662f\u53c2\u6570\u4e3a\u7ec4\u4ef6\uff0c\u8fd4\u56de\u503c\u4e3a\u65b0\u7ec4\u4ef6\u7684\u51fd\u6570\u3002\r\n\r\n\u867d\u7136\u9ad8\u9636\u7ec4\u4ef6\u7684\u7ea6\u5b9a\u662f\u5c06\u6240\u6709 props \u4f20\u9012\u7ed9\u88ab\u5305\u88c5\u7ec4\u4ef6\uff0c\u4f46\u8fd9\u5bf9\u4e8e refs \u5e76\u4e0d\u9002\u7528\u3002\u90a3\u662f\u56e0\u4e3a ref \u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\u4e00\u4e2a prop - \u5c31\u50cf key \u4e00\u6837\uff0c\u5b83\u662f\u7531 React \u4e13\u95e8\u5904\u7406\u7684\u3002\u5982\u679c\u5c06 ref \u6dfb\u52a0\u5230 HOC \u7684\u8fd4\u56de\u7ec4\u4ef6\u4e2d\uff0c\u5219 ref \u5f15\u7528\u6307\u5411\u5bb9\u5668\u7ec4\u4ef6\uff0c\u800c\u4e0d\u662f\u88ab\u5305\u88c5\u7ec4\u4ef6\u3002\r\n\r\n\u6211\u4eec\u53ef\u4ee5\u5728 HOC \u4e2d\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684 prop \u5c5e\u6027\u63a5\u6536 ref \u5e76\u4f20\u9012\u7ed9 \u5b50\u7ec4\u4ef6.\r\n\r\n\u4f8b\u5982\uff1a\r\n\r\n```\r\nfunction logProps(Component) {\r\n  class LogProps extends React.Component {\r\n    componentDidUpdate(prevProps) {\r\n      console.log(\'old props:\', prevProps);\r\n      console.log(\'new props:\', this.props);\r\n    }\r\n\r\n    render() {\r\n      const {forwardedRef, ...rest} = this.props;\r\n\r\n      // \u5c06\u81ea\u5b9a\u4e49\u7684 prop \u5c5e\u6027 \u201cforwardedRef\u201d \u5b9a\u4e49\u4e3a ref\r\n      return <Component ref={forwardedRef} {...rest} />;\r\n    }\r\n  }\r\n\r\n  // \u6ce8\u610f React.forwardRef \u56de\u8c03\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570 \u201cref\u201d\u3002\r\n  // \u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u4f5c\u4e3a\u5e38\u89c4 prop \u5c5e\u6027\u4f20\u9012\u7ed9 LogProps\uff0c\u4f8b\u5982 \u201cforwardedRef\u201d\r\n  // \u7136\u540e\u5b83\u5c31\u53ef\u4ee5\u88ab\u6302\u8f7d\u5230\u88ab LogProps \u5305\u88f9\u7684\u5b50\u7ec4\u4ef6\u4e0a\u3002\r\n  return React.forwardRef((props, ref) => {\r\n    return <LogProps {...props} forwardedRef={ref} />;\r\n  });\r\n}\r\n```'},"9R4y":function(n,e,r){"use strict";r.r(e),e["default"]='# React \u4e2d useEffect \u548c useLayoutEffect \u4f5c\u7528\u548c\u533a\u522b\r\n\r\n\u65e5\u5e38\u5f00\u53d1\u4e2d\u7684\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 useEffect \u5c31\u53ef\u4ee5\u5e2e\u6211\u4eec\u5904\u7406\u7ec4\u4ef6\u7684\u526f\u4f5c\u7528\uff0c\u4f46\u662f\u5982\u679c\u60f3\u8981\u540c\u6b65\u8c03\u7528\u4e00\u4e9b\u526f\u4f5c\u7528\uff0c\u6bd4\u5982\u5bf9 DOM \u7684\u64cd\u4f5c\uff0c\u5c31\u9700\u8981\u4f7f\u7528 useLayoutEffect\uff0cuseLayoutEffect \u4e2d\u7684\u526f\u4f5c\u7528\u4f1a\u5728 DOM \u66f4\u65b0\u4e4b\u540e\u540c\u6b65\u6267\u884c,useLayoutEffect \u4e0e\u539f\u6765 class \u7ec4\u4ef6\u539f\u6765\u7684 componentDidMount & componentDidUpdate \u4e00\u6837\uff0c\u4f1a\u5728 react \u5b8c\u6210 DOM \u66f4\u65b0\u540e\u9a6c\u4e0a\u540c\u6b65\u8c03\u7528\u7684\u4ee3\u7801\uff0c\u4f1a\u963b\u585e\u9875\u9762\u6e32\u67d3\u3002\r\n\r\n\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0cuseLayoutEffect \u4f1a\u5728 render\uff0cDOM \u66f4\u65b0\u4e4b\u540e\u540c\u6b65\u89e6\u53d1\u51fd\u6570\uff0c\u4f1a\u4f18\u4e8e useEffect \u5f02\u6b65\u89e6\u53d1\u51fd\u6570\u3002\r\n\r\n```\r\nfunction Demo() {\r\n  const [width, setWidth] = useState(0);\r\n  useLayoutEffect(() => {\r\n    const title = document.querySelector("#title");\r\n    const titleWidth = title.getBoundingClientRect().width;\r\n    console.log("useLayoutEffect");\r\n    if (width !== titleWidth) {\r\n      setWidth(titleWidth);\r\n    }\r\n  });\r\n  useEffect(() => {\r\n    console.log("useEffect");\r\n  });\r\n  return (\r\n    <div>\r\n      <h1 id="title">hello</h1>\r\n      <h2>{width}</h2>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\n## \u5b98\u65b9\u5efa\u8bae\u4f18\u5148\u4f7f\u7528 useEffect\r\n\r\n\u5728\u5b9e\u9645\u4f7f\u7528\u65f6\u5982\u679c\u60f3\u907f\u514d\u9875\u9762\u6296\u52a8\uff08\u5728useEffect\u91cc\u4fee\u6539DOM\u5f88\u6709\u53ef\u80fd\u51fa\u73b0\uff09\u7684\u8bdd\uff0c\u53ef\u4ee5\u628a\u9700\u8981\u64cd\u4f5cDOM\u7684\u4ee3\u7801\u653e\u5728useLayoutEffect\u91cc\u3002\u5173\u4e8e\u4f7f\u7528useEffect\u5bfc\u81f4\u9875\u9762\u6296\u52a8\uff0c\u53c2\u8003git\u4ed3\u5e93git\u4ed3\u5e93\u793a\u4f8b\u3002\r\n\r\n\u4e0d\u8fc7 useLayoutEffect \u5728\u670d\u52a1\u7aef\u6e32\u67d3\u65f6\u4f1a\u51fa\u73b0\u4e00\u4e2awarning\uff0c\u8981\u6d88\u9664\u7684\u8bdd\u5f97\u7528useEffect\u4ee3\u66ff\u6216\u8005\u63a8\u8fdf\u6e32\u67d3\u65f6\u673a\u3002\r\n\r\n## \u670d\u52a1\u7aef\u6e32\u67d3\uff08ssr\uff09\r\n\r\n\u5728\u670d\u52a1\u7aef\u6e32\u67d3\u7ec4\u4ef6\u4e2d\u5f15\u5165 useLayoutEffect \u4ee3\u7801\u65f6\u4f1a\u89e6\u53d1 React \u544a\u8b66, \u56e0\u4e3a\u65e0\u8bba useLayoutEffect \u8fd8\u662f useEffect \u90fd\u65e0\u6cd5\u5728 Javascript \u4ee3\u7801\u52a0\u8f7d\u5b8c\u6210\u4e4b\u524d\u6267\u884c\u3002\u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u9700\u8981\u5c06\u4ee3\u7801\u903b\u8f91\u79fb\u81f3 useEffect \u4e2d\uff08\u5982\u679c\u9996\u6b21\u6e32\u67d3\u4e0d\u9700\u8981\u8fd9\u6bb5\u903b\u8f91\u7684\u60c5\u51b5\u4e0b\uff09\uff0c\u6216\u662f\u5c06\u8be5\u7ec4\u4ef6\u5ef6\u8fdf\u5230\u5ba2\u6237\u7aef\u6e32\u67d3\u5b8c\u6210\u540e\u518d\u663e\u793a\uff08\u5982\u679c\u76f4\u5230 useLayoutEffect \u6267\u884c\u4e4b\u524d HTML \u90fd\u663e\u793a\u9519\u4e71\u7684\u60c5\u51b5\u4e0b\uff09\u3002\r\n\r\n\u82e5\u8981\u4ece\u670d\u52a1\u7aef\u6e32\u67d3\u7684 HTML \u4e2d\u6392\u9664\u4f9d\u8d56\u5e03\u5c40 effect \u7684\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 showChild && <Child /> \u8fdb\u884c\u6761\u4ef6\u6e32\u67d3\uff0c\u5e76\u4f7f\u7528 useEffect(() => { setShowChild(true); }, []) \u5ef6\u8fdf\u5c55\u793a\u7ec4\u4ef6\u3002\u8fd9\u6837\uff0c\u5728\u5ba2\u6237\u7aef\u6e32\u67d3\u5b8c\u6210\u4e4b\u524d\uff0cUI \u5c31\u4e0d\u4f1a\u50cf\u4e4b\u524d\u90a3\u6837\u663e\u793a\u9519\u4e71\u4e86\u3002\r\n\r\n\r\n\r\n\r\n\r\n\r\n'},ABQd:function(n,e,r){"use strict";r.r(e),e["default"]="# SEO\u7cfb\u5217\u4e4b\u5feb\u901f\u6392\u540d\u65b9\u6cd5\r\n\r\n\u6211\u4eec\u65b0\u5f00\u4e00\u4e2a\u7ad9\uff0c\u90fd\u5e0c\u671b\u80fd\u591f\u8ba9\u65b0\u7ad9\u5feb\u901f\u6392\u540d\uff0c\u6240\u4ee5\u6211\u4eec\u4f1a\u53bb\u5bfb\u627e\u4e00\u4e9b\u5feb\u901f\u6392\u540d\u7684\u6280\u672f\u3002\r\n\r\n## \u4ec0\u4e48\u662f\u5feb\u901f\u6392\u540d\r\n\r\n\u8fd9\u662f\u6211\u81ea\u5df1\u7684\u7406\u89e3\uff1a\u5feb\u901f\u6392\u540d\u4e3b\u8981\u662f\u6307\u5728\u76f8\u5bf9\u8f83\u77ed\u7684\u65f6\u95f4\u5468\u671f\u5185\uff0c\u9488\u5bf9\u7f51\u7ad9\u7684\u5173\u952e\u8bcd\uff0c\u5feb\u901f\u63d0\u5347\u641c\u7d22\u5f15\u64ce\u6392\u540d\u7684\u4e00\u4e2a\u8fc7\u7a0b\u3002\r\n\r\n## \u5982\u4f55\u5feb\u901f\u6392\u540d\r\n\r\n\u6211\u4eec\u5206\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5\u6765\u8bf4\u660e\uff1a\r\n\r\n### 1.\u6574\u7ad9\u5feb\u901f\u6392\u540d\r\n\r\n\u8fd9\u91cc\u53c8\u8981\u533a\u5206\u65b0\u7ad9\u548c\u8001\u7ad9\u4e24\u79cd\u4e0d\u540c\u7684\u60c5\u51b5.\r\n\r\n#### \u65b0\u7ad9\u7684\u5feb\u901f\u6392\u540d\u95ee\u9898\uff0c\u6211\u4eec\u5e94\u8be5\u91cd\u70b9\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u6765\u8003\u8651\uff1a\r\n\r\n1\ufe0f\u20e3 \u5feb\u901f\u51fa\u641c\u7d22\u5f15\u64ce\u8d28\u91cf\u8bc4\u4f30\u671f\uff0cSEO\u884c\u4e1a\u5185\u4e5f\u79f0\u7f51\u7ad9\u6c99\u76d2\u3002\r\n\r\n\u8fd9\u4e2a\u9636\u6bb5\u505a\u5feb\u901f\u6392\u540d\uff0c\u6700\u91cd\u8981\u7684\u662f\u6bcf\u5929\u4fdd\u6301\u9ad8\u8d28\u91cf\u7684\u5185\u5bb9\u8f93\u51fa\uff0c\u5728\u8d28\u91cf\u8bc4\u4f30\u5468\u671f\u4e2d\uff0c\u63a8\u8350\u8f93\u51fa\u957f\u5c3e\u5173\u952e\u8bcd\u5185\u5bb9\uff0c\u9700\u8981\u786e\u4fdd\u8fd9\u4e2a\u9875\u9762\u662f\u539f\u521b\u5185\u5bb9\uff0c\u4e14\u5177\u6709\u8f83\u9ad8\u7684\u76f8\u5173\u6027\u3002\r\n\r\n2\ufe0f\u20e3 \u9ad8\u8d28\u91cf\u5916\u94fe\r\n\r\n\u5982\u679c\u7f51\u7ad9\u521d\u671f\u6ca1\u6709\u592a\u591a\u7684\u5916\u94fe\u8d44\u6e90\uff0c\u5e38\u89c4\u7684\u7b56\u7565\u90fd\u662f\u8d2d\u4e70\u4e00\u4e9b\u5355\u9879\u53cb\u60c5\u94fe\u63a5\uff0c\u6216\u8005\u57fa\u4e8e\u54c1\u724c\u63a8\u5e7f\u7684\u7b56\u7565\uff0c\u53d1\u5e03\u5927\u91cf\u884c\u4e1a\u65b0\u95fb\u6e90\u8f6f\u6587\u5916\u94fe\u3002\r\n\r\n\u5982\u679c\u6709\u6761\u4ef6\u7684\u8bdd\uff0c\u5c3d\u91cf\u786e\u4fdd\u8fd9\u4e9b\u5916\u94fe\u53ef\u4ee5\u6dfb\u52a0\u951a\u6587\u672c\u5173\u952e\u8bcd\uff0c\u5e76\u4e14\u5b83\u662f\u4f60\u5173\u952e\u5b57\u5feb\u901f\u6392\u540d\u7684\u90a3\u4e2a\u8bcd\u3002\u5bf9\u4e8e\u65b0\u7f51\u7ad9\uff0c\u6709\u65f6\u5019\u7f51\u7ad9\u76ee\u5f55\u548c\u7f51\u5740\u5bfc\u822a\u94fe\u63a5\uff0c\u4e5f\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002\r\n\r\n3\ufe0f\u20e3 \u4e30\u5bcc\u9875\u9762\u5185\u5bb9\u7ed3\u6784\r\n\r\n\u96f6\u4f4d\u7f6e\u6392\u540d\u4e5f\u662f\u6211\u4eec\u5728\u64cd\u4f5c\u5feb\u901f\u5173\u952e\u8bcd\u6392\u540d\u7684\u4e00\u4e2a\u7b56\u7565\uff0c\u8fd9\u9700\u8981\u6211\u4eec\u5728\u505a\u5185\u5bb9\u8f93\u51fa\u7684\u65f6\u5019\uff0c\u4fdd\u6301\u5408\u7406\u6027\u7684\u9875\u9762\u903b\u8f91\u7ed3\u6784\uff0c\u7279\u522b\u662f\u6bb5\u843d\u6e05\u6670\u3002 \r\n\r\n#### \u8001\u7ad9\u505a\u5173\u952e\u8bcd\u5feb\u901f\u6392\u540d\u7684\u65f6\u5019\uff0c\u901a\u5e38\u66f4\u591a\u7684\u662f\u5229\u7528\u73b0\u6709\u7684\u4f18\u8d28\u8d44\u6e90\uff0c\u57fa\u4e8e\u7ed3\u6784\u6027\u94fe\u63a5\u6743\u91cd\u4f20\u9012\u7684\u89d2\u5ea6\u6765\u505aSEO\u5feb\u901f\u6392\u540d\u3002\r\n\r\n\u8fd9\u91cc\u5217\u4e3e\u4ee5\u4e0b\u51e0\u4e2a\u5e38\u89c4\u65b9\u6cd5\uff1a\r\n\r\n1\ufe0f\u20e3 \u5728\u9ad8\u6392\u540d\u3001\u9ad8\u6743\u91cd\u7684\u9875\u9762\u4e2d\u5e03\u5c40\u9700\u8981\u5feb\u901f\u6392\u540d\u7684\u9875\u9762\u3002\r\n\r\n2\ufe0f\u20e3 \u7279\u5b9a\u65f6\u671f\u5185\uff0c\u5f15\u5bfc\u6743\u91cd\uff0c\u4e0d\u65ad\u589e\u52a0\u7ad9\u5185\u5185\u5bb9\u9875\u9762\u5bf9\u76ee\u6807\u9875\u7684\u6295\u7968\u6743\u3002\r\n\r\n3\ufe0f\u20e3 \u5408\u7406\u7684\u8ba9\u5173\u952e\u8bcd\u77ed\u65f6\u95f4\u5feb\u6392\u6392\u540d\u7684\u9700\u6c42\u9875\uff0c\u5c55\u73b0\u5728\u7ad9\u5185\u7ed3\u6784\u7684\u91cd\u8981\u9875\u9762\u4e2d\uff0c\u6bd4\u5982\uff1a\u7f51\u7ad9\u5bfc\u822a\u4e0e\u4fa7\u680f\u7b49\u3002\r\n\r\n4\ufe0f\u20e3 \u4f18\u8d28\u5916\u90e8\u951a\u6587\u672c\u94fe\u63a5\u3002\r\n\r\n### 2.\u79fb\u52a8\u7aef\u5173\u952e\u8bcd\u5feb\u901f\u6392\u540d\r\n\r\n\u79fb\u52a8\u7aef\u5173\u952e\u8bcd\u5feb\u901f\u6392\u540d\u4e00\u822c\u6211\u4eec\u8003\u91cf\u4e00\u4e0b\u51e0\u4e2a\u6307\u6807\uff1a \r\n\r\n1\ufe0f\u20e3 \u9875\u9762\u7ed3\u6784\uff0c\u826f\u597d\u7684\u7528\u6237\u4f53\u9a8c\u3002\u6709\u4e00\u4e9b\u641c\u7d22\u8d44\u6e90\u5e73\u53f0\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u9a8c\u8bc1\u9875\u9762\u7ed3\u6784\u548c\u7528\u6237\u4f53\u9a8c\uff0c\u5982\uff1aGoogle Search Console\u63d0\u4f9b\u4e86\u9875\u9762\u4f53\u9a8c\uff0c\u6838\u5fc3\u7f51\u9875\u6307\u6807\uff0c\u79fb\u52a8\u8bbe\u5907\u6613\u7528\u6027\u7684\u68c0\u6d4b\u3002\r\n\r\n2\ufe0f\u20e3 \u907f\u514d\u5927\u5e45\u5ea6\u7684\u5e7f\u544a\u5f39\u7a97\u3002\r\n\r\n3\ufe0f\u20e3 \u9ad8\u8d28\u91cf\u539f\u521b\u5185\u5bb9\uff0c\u4e0d\u8981\u91c7\u96c6\u6216\u8005\u4f2a\u539f\u521b\u4ee3\u5199\u3002\r\n\r\n4\ufe0f\u20e3 \u6253\u5f00\u901f\u5ea6\u8981\u5feb\uff0c\u4e00\u822c\u63a7\u5236\u57281.5\u79d2\u4ee5\u5185\u3002\r\n\r\n### 3.\u7279\u5b9a\u9875\u9762\u5feb\u901f\u6392\u540d\r\n\r\n#### \u957f\u5c3e\u8bcd\u5feb\u901f\u6392\u540d\r\n\r\n1\ufe0f\u20e3 \u786e\u4fdd\u957f\u5c3e\u8bcd\u4e0e\u9875\u9762\u5185\u5bb9\u9ad8\u5ea6\u76f8\u5173\uff0c\u6ee1\u8db3\u7528\u6237\u641c\u7d22\u9700\u6c42\uff0c\u539f\u521b\u3002 \r\n\r\n2\ufe0f\u20e3 \u786e\u4fdd\u76ee\u6807\u9875\u9762\u5408\u7406\u7684\u88ab\u6536\u5f55\uff0c\u53ef\u4ee5\u901a\u8fc7\u94fe\u63a5\u63d0\u4ea4\uff0c\u9ad8\u6743\u91cd\u9875\u9762\u5e26\u3002 \r\n\r\n3\ufe0f\u20e3 \u53ef\u4ee5\u5c06\u957f\u5c3e\u8bcd\u5feb\u901f\u6392\u540d\u9875\u9762\uff0c\u5e03\u5c40\u5728\u7ad9\u5185\u7ed3\u6784\u7684\u63a8\u8350\u680f\u76ee\u4e2d\uff0c\u83b7\u5f97\u8f83\u9ad8\u66dd\u5149\u7387\u548c\u7ad9\u5185\u70b9\u51fb\u3002 \r\n\r\n#### \u9996\u9875\u5feb\u901f\u6392\u540d\r\n\r\n\u6211\u4eec\u8ba4\u4e3a\u9996\u9875\u5feb\u901f\u6392\u540d\u7684\u4e00\u4e2a\u6700\u6709\u6548\u7684\u65b9\u6cd5\u5c31\u662f\u4e3b\u9898\u76f8\u5173\u6027\u548c\u5916\u94fe\u3002\r\n\r\n\u4e3b\u9898\u76f8\u5173\u6027\u4e3b\u8981\u6d89\u53ca\u5230\u9996\u9875\u7684\u7ed3\u6784\u6027\u5e03\u5c40\uff0c\u7279\u522b\u662f\u5173\u952e\u8bcd\u5bc6\u5ea6\u7684\u5339\u914d\u3002\r\n\r\n\u5bf9\u4e8e\u5916\u94fe\uff0c\u6211\u4eec\u8ba4\u4e3a\u9700\u8981\u91cd\u70b9\u5f00\u53d1\u9ad8\u8d28\u91cf\u7684\u53cb\u94fe\u3002\r\n\r\n## \u5feb\u901f\u6392\u540d\u7684\u4e00\u4e9b\u95ee\u9898\uff1a\r\n\r\n1\ufe0f\u20e3 \u5173\u952e\u8bcd\u5feb\u901f\u6392\u540d\u65b9\u6cd5\u7684\u6838\u5fc3\u662f\u4ec0\u4e48\uff1f \r\n\r\n\u5982\u679c\u4f60\u6709\u591a\u4e2a\u5173\u952e\u8bcd\u9700\u8981\u5feb\u901f\u6392\u540d\uff0c\u5e94\u8be5\u9009\u62e9\u4f18\u5148\u5feb\u901f\u6392\u540d\u7684\u5173\u952e\u8bcd\uff0c\u7531\u8fd9\u4e2a\u5173\u952e\u8bcd\u5feb\u901f\u51fa\u6392\u540d\uff0c\u83b7\u5f97\u7528\u6237\u8bbf\u95ee\uff0c\u5e26\u52a8\u5176\u4ed6\u5173\u952e\u8bcd\u6392\u540d\u3002\r\n\r\n2\ufe0f\u20e3 \u5e38\u89c4\u5feb\u901f\u6392\u540d\u548c\u975e\u5e38\u89c4\u5feb\u901f\u6392\u540d\u7684\u533a\u522b\uff1f \r\n\r\n\u5e38\u89c4\u6027\u5feb\u901f\u6392\u540d\uff0c\u6211\u4eec\u9700\u8981\u505a\u5185\u5bb9\u589e\u91cf\uff0c\u7ed3\u6784\u8c03\u6574\uff0c\u5916\u94fe\u5efa\u8bbe\uff0c\u800c\u4e00\u822c\u5feb\u6392\u7cfb\u7edf\uff0c\u901a\u5e38\u5076\u5c14\u53ea\u9700\u8981\u4fee\u6539TDK\uff0c\u4e5f\u5c31\u662f\u9875\u9762\u6807\u9898\u3002\r\n\r\n\u5982\u679c\u662f\u627eSEO\u673a\u6784\u64cd\u4f5c\uff0c\u540e\u7eed\u6295\u5165\u4e5f\u622a\u7136\u4e0d\u540c\uff0c\u4e00\u822c\u524d\u8005\u7684\u8ba1\u8d39\u65b9\u5f0f\uff0c\u91c7\u7528\u6309\u5929\u8ba1\u8d39\uff0c\u540e\u8005\u7684\u8ba1\u8d39\u65b9\u5f0f\u4e3b\u8981\u91c7\u7528\u5468\u671f\u6027\u7684\u7edf\u4e00\u62a5\u4ef7\u3002\u4e00\u822c\u6765\u8bb2\uff0c\u5e38\u89c4\u7684\u5feb\u901f\u6392\u540d\u7b56\u7565\uff0cSEO\u673a\u6784\u90fd\u4f1a\u7ed9\u51fa\u4e00\u4efd\u8be6\u7ec6SEO\u8bca\u65ad\u65b9\u6848\uff0c\u5e76\u4e14\u8981\u6c42\u7528\u6237\u534f\u52a9\u8c03\u6574\u3002\r\n\r\n\u5f53\u7136\uff0c\u8fd9\u4e2a\u95ee\u9898\u4e5f\u4e0d\u80fd\u4e00\u6982\u800c\u8bba\uff0c\u8fd8\u662f\u9700\u8981\u5177\u4f53\u95ee\u9898\uff0c\u5177\u4f53\u5206\u6790\uff0c\u6839\u636e\u4f01\u4e1a\u4e3b\u9700\u6c42\u800c\u5b9a\u3002\r\n\r\n3\ufe0f\u20e3 \u6211\u4eec\u770b\u5230\u4e00\u4e9b\u5feb\u901f\u6392\u540d7\u5929\u4e0a\u9996\u9875\u7684\u5e7f\u544a\uff0c\u600e\u4e48\u505a\u5230\u7684? \u53ef\u9760\u5417\uff1f \r\n\r\n\u8fd9\u6837\u7684\u9875\u9762\u5e7f\u544a\u5ba3\u4f20\uff0c\u901a\u5e38\u90fd\u662f\u91c7\u7528\u201c\u5237\u5feb\u901f\u6392\u540d\uff0c\u641c\u7d22\u70b9\u51fb\u884c\u4e3a\u201d\u6765\u5b8c\u6210\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u53ef\u4ee5\u6709\u6548\u679c\uff0c\u4f46\u4e0d\u80fd\u4fdd\u8bc1\u8fc7\u4e00\u5b9a\u65f6\u95f4\u5468\u671f\uff0c\u641c\u7d22\u7b97\u6cd5\u8c03\u6574\uff0c\u662f\u5426\u4f1a\u88ab\u8bc6\u522b\u6253\u51fb\u4e0e\u964d\u6743\u3002 \r\n\r\n\u5f53\u7136\uff0c\u4e0d\u6392\u9664\uff0c\u4e00\u4e9b\u5b8c\u5168\u57fa\u4e8e\u641c\u7d22\u7b56\u7565\u7684\u771f\u5b9e\u6848\u4f8b\uff0c\u6bd4\u5982\uff1a\u7ade\u4e89\u5ea6\u975e\u5e38\u5c0f\u7684\u4f01\u4e1a\u54c1\u724c\u8bcd\u6392\u540d\u3002 \r\n\r\n4\ufe0f\u20e3 \u4e13\u4e1a\u7f51\u7ad9\u5feb\u901f\u6392\u540d\u7684\u5e38\u89c4\u6d41\u7a0b\u662f\u600e\u4e48\u6837\u7684\uff1f \r\n\r\n\u901a\u8fc7SEO\u8bca\u65ad\u5206\u6790\u95ee\u9898\uff0c\u89e3\u51b3\u7f51\u7ad9\u76ee\u524d\u975eSEO\u6807\u51c6\u5316\u7684\u95ee\u9898\uff0c\u5236\u5b9a\u5feb\u901f\u6392\u540d\u7b56\u7565\uff0c\u6bd4\u5982\uff1a\u5185\u5bb9\u589e\u957f\u3001\u589e\u52a0\u5916\u94fe\u3001\u7ed3\u6784\u8c03\u6574\u3002 \r\n\r\n\u5176\u4e2d\uff0c\u9875\u9762TDK\u7684\u914d\u7f6e\u975e\u5e38\u91cd\u8981\uff0c\u5b83\u76f4\u89c2\u5f71\u54cd\u76f8\u5173\u5173\u952e\u8bcd\u5728SERP\u4e2d\u7684\u9875\u9762\u70b9\u51fb\u7387\uff0c\u800c\u70b9\u51fb\u7387\u76f4\u89c2\u5f71\u54cd\u9875\u9762\u6392\u540d\u63d0\u5347\u3002\r\n\r\n## \u5199\u5728\u6700\u540e\r\n\r\n\u4e0a\u8ff0\u5185\u5bb9\u53ea\u662f\u4f5c\u8005\u81ea\u5df1\u7684\u4e00\u4e9b\u4f53\u4f1a\uff0c\u4ecd\u6709\u8bf8\u591a\u7ec6\u8282\u6ca1\u6709\u8be6\u7ec6\u8bb2\u8ff0\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002"},AuwF:function(n,e,r){"use strict";r.r(e),e["default"]='# 2021\u5e74\u4e2d\u56fd\u5f00\u53d1\u8005755\u4e07\u5168\u7403\u7b2c\u4e8c\uff0cJavascript\u6700\u53d7\u6b22\u8fce\u60a8\uff0c\u6570\u636e\u6765\u6e90\uff1aGitHub\r\n\r\n2021\u5e7411\u670817 \u65e5\uff0cGitHub\u53d1\u5e032021\u5e74\u5ea6\u62a5\u544a\uff1a\u5168\u7403GitHub\u5f00\u53d1\u8005\u7528\u6237\u8d85\u8fc77300\u4e07 \uff0c\u5176\u4e2d 56.8% \u6765\u81ea\u5317\u7f8e\u4e4b\u5916\u7684\u5730\u533a\u3002\u7f8e\u56fd\u5f00\u53d1\u8005\u6700\u591a\uff0c\u5171\u67091355\u4e07\uff0c\u4e2d\u56fd\u5f00\u53d1\u8005\u5360 10%\uff0c\u6709 755 \u4e07\uff0c\u4f4d\u5c45\u5168\u7403\u7b2c\u4e8c\u3002\r\n\r\n![Github \u5f00\u53d1\u8005](/static/images/14.png) \r\n\r\n\u5728\u8fc7\u53bb\u7684\u4e00\u5e74\u4e2d\uff0c\u5168\u7403\u5f00\u53d1\u8005\u6570\u91cf\u589e\u957f\u8fc5\u731b\uff0c\u5171\u6709 1600 \u4e07\u65b0\u5f00\u53d1\u8005\u52a0\u5165\u4e86 GitHub \u793e\u533a\u3002\r\n\r\n\u6570\u636e\u663e\u793a\uff0cJavaScript\u4f9d\u7136\u662fGitHub\u4e0a\u6700\u53d7\u6b22\u8fce\u7684\u7f16\u7a0b\u8bed\u8a00\uff0cPython\u662f\u7b2c\u4e8c\u53d7\u6b22\u8fce\u7684\u8bed\u8a00\uff0c\u5176\u6b21\u662fJava\u548c\u5feb\u901f\u589e\u957f\u7684TypeScript\u3002\r\n\r\nTypeScript \u5df2\u7ecf\u4ece2018\u5e74\u548c2019\u5e74\u7684\u7b2c\u4e03\u4f4d\u6500\u5347\u5230\u4eca\u5e74\u7684\u7b2c\u56db\u4f4d\u3002PHP \u548c Ruby \u8fd9\u4e24\u79cd\u4e94\u5e74\u524d\u6700\u53d7\u6b22\u8fce\u7684\u8bed\u8a00\u7684\u53d7\u6b22\u8fce\u7a0b\u5ea6\u7ee7\u7eed\u4e0b\u964d\u3002\r\n\r\n\r\n![Github \u7f16\u7a0b\u8bed\u8a00](/static/images/15.png) \r\n\r\n\u5f00\u6e90\u9879\u76ee\u7684\u9996\u6b21\u8d21\u732e\u8005\u6570\u91cf\u4e5f\u662f\u5728\u9010\u5e74\u589e\u957f\uff0c\u76f8\u8f83\u4e8e 2020 \u5e74\uff0c\u4eca\u5e74\u589e\u52a0\u4e86 213,319 \u540d\u9996\u6b21\u5f00\u6e90\u9879\u76ee\u8d21\u732e\u8005\u3002\r\n\r\n\r\n![Github \u5f00\u6e90\u9879\u76ee](/static/images/16.png) \r\n\r\n## \u4eba\u4eec\u901a\u5e38\u5728 GitHub \u4e0a\u7684\u7b2c\u4e00\u4e2a\u5c0f\u65f6\u4f1a\u505a\u4ec0\u4e48\uff1f \r\n\r\n192,830\u4eba\u521b\u5efa\u8bae\u9898\uff0c16,102\u4eba\u53d1\u8d77PR\u7b49\u5f85\u522b\u4eba\u5408\u5165\u81ea\u5df1\u7684\u4ee3\u7801, 24,404\u5c06\u81ea\u5df1\u4ee3\u7801\u63a8\u5230\u539f\u4f5c\u8005\u7684\u4ed3\uff0c60,854\u4eba\u5c31\u8bae\u9898\u505a\u51fa\u56de\u5e94...\r\n\r\n\u5927\u578b\u5b58\u50a8\u5e93\u901a\u5e38\u4f1a\u4f7f\u7528 Good First Issue \u6807\u7b7e\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u79cd\u975e\u5e38\u6709\u6548\u7684\u505a\u6cd5\u3002\r\n\r\n\u6570\u636e\u663e\u793a\uff0c\u5f5321%-30%\u7684\u95ee\u9898\u88ab\u6807\u8bb0\u4e3a Good First Issues \u7684\u5b58\u50a8\u5e93\u65f6\uff0c\u5c31\u4f1a\u5e73\u5747\u6709 13% \u7684\u65b0\u8d21\u732e\u8005\u3002\r\n\r\n\u6709\u8d85\u8fc7 40% \u7684 Good First Issues \u6807\u6ce8\u5c31\u53ef\u4ee5\u5e2e\u52a9\u9879\u76ee\u5438\u5f15 21% \u4ee5\u4e0a\u7684\u65b0\u8d21\u732e\u8005\u3002\r\n\r\n**\u53c2\u8003\u8d44\u6599\uff1a<a href="https://octoverse.github.com/" rel="nofollow" >https://octoverse.github.com/</a>**'},CiKJ:function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-27 14:41:11\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2022-01-22 09:35:15\r\n * @FilePath: \\qianduan.shop\\front\\data\\blogs\\3.md\r\n--\x3e\r\n# umi practice problem set\r\n\r\nDevelopment Environment.\r\numi: 3.5.18\r\nnode: v14.15.1\r\nSystem: windows\r\n\r\nThis article mainly records some scenario-specific issues during the project practice, for reference only: ## 1.\r\n\r\n## 1. webpackChain custom loader error: this.getOptions is not a function\r\n\r\n** Scenario:**\r\n    Add loader to parse makdown file to html display, use webpackChain to add remark-loader,html-loader to report error.\r\n```\r\nexport default {\r\n    ...\r\n    chainWebpack(config){\r\n        config.module\r\n        .rule(\'compile-md\')\r\n        .test(/\\.md$/)\r\n            .use("html-loader")\r\n            .loader("html-loader")\r\n            .end()\r\n            .use("markdown-loader")\r\n    }\r\n    ...\r\n}\r\n  \r\n```\r\n**Solution:**\r\n    Just close the webpack5 editor and modify the umi configuration config.js or .umirc.js to.\r\n```\r\nexport default {\r\n    ...\r\n    webpack5:false,\r\n    ...\r\n}\r\n```\r\n\r\n## 2. mfsu, @umijs/preset-ui(block) are not supported under SSR(server-side rendering)\r\n\r\n## 3. SSR (server-side rendering) after the first request, click on the navigation menu, the route switch occurs to jump to a new page did not launch a request to the server to get a new page, but a locally done page re-rendering.\r\n**Solution:**\r\nReplace the NavLink component with a tag\r\n\r\n## 4. SSR (Server Side Rendering) requests server Css and js files and returns html content.\r\n**Solution:**\r\nIf you configure hash:true, turn off the hash function of the packaged file, because umi.server.js does not add hash to the reference address of js and css, for example, your packaged file name is umi.adsjsnd.css, but the reference file name of umi.server.js to css is umi.css, Modify the configuration config.js or .umirc.js to\r\n```\r\nexport default {\r\n    ...\r\n    hash:false\r\n    ...\r\n}\r\n```\r\n If hash:true is not configured, refer to this issues:https://github.com/umijs/umi/issues/4808\r\n\r\n ## 5. Enable mfsu:{} error: 1. Can\'t read property \'ModuleFederationPlugin\' of undefined.\r\n **Solution:**\r\n Please make sure mfsu:{} is added to config.ts instead of config.dev.ts or config.prod.ts.'},DZYA:function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-11-29 15:58:14\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-02 17:47:07\r\n * @FilePath: \\qianduan.shop\\data\\blogs\\24.md\r\n--\x3e\r\n# http\u5f3a\u7f13\u5b58\u548c\u534f\u5546\u7f13\u5b58\r\n\r\n\u5408\u7406\u4f7f\u7528http\u7f13\u5b58\u662f\u524d\u7aef\u6027\u80fd\u4f18\u5316\u7684\u624b\u6bb5\u4e4b\u4e00\uff0c\u662f\u4f5c\u4e3a\u524d\u7aef\u5f00\u53d1\u9700\u8981\u638c\u63e1\u7684\u91cd\u8981\u77e5\u8bc6\u70b9\u3002\u5b83\u53ef\u4ee5\u52a0\u5feb\u6211\u4eec\u83b7\u53d6\u8d44\u6e90\u7684\u901f\u5ea6\uff0c\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\uff0c\u63d0\u5347\u7528\u6237\u4f53\u9a8c\u3002\r\n\r\nhttp\u7f13\u5b58\u6d41\u7a0b\u56fe\u5982\u4e0b\uff1a\r\n\r\n![http\u7f13\u5b58\u6d41\u7a0b](/static/images/24_1.webp) \r\n\r\n## http\u5f3a\u7f13\u5b58\r\n\r\n\u6d4f\u89c8\u5668\u76f4\u63a5\u8bfb\u53d6\u672c\u5730\u7f13\u5b58\u800c\u4e0d\u53bb\u8bf7\u6c42\u670d\u52a1\u5668\uff0c\u6211\u4eec\u5728 Chrome \u6d4f\u89c8\u5668\u63a7\u5236\u53f0Network\u9762\u677f\u4e2d\u770b\u5230\u7684 http Status \u4e3a 200 , Size \u663e\u793a\u4e3a Disk Cache \u6216 Memory Cache \u5373\u8868\u793a\u5f53\u524d\u8d44\u6e90\u8d70\u7684\u662f\u672c\u5730\u7f13\u5b58\uff0c\u6ca1\u6709\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u3002\r\n\r\n\u5728Chrome\u4e2d\u5f3a\u7f13\u5b58\u53c8\u5206\u4e3a Disk Cache \u548c Memory Cache,\u7531\u6d4f\u89c8\u5668\u63a7\u5236\u5b58\u653e\u4f4d\u7f6e,\u81f3\u4e8e\u5177\u4f53\u89c4\u5219\u76ee\u524d\u6ca1\u6709\u7edf\u4e00\u7684\u8bf4\u6cd5\u3002\r\n\r\n### http\u5982\u4f55\u5224\u65ad\u662f\u5426\u8d70\u5f3a\u7f13\u5b58\u5462\uff1f\r\n\r\n\u5f3a\u7f13\u5b58\u7531 Expires\u3001Cache-Control \u548c Pragma 3\u4e2a Header \u5c5e\u6027\u5171\u540c\u6765\u63a7\u5236\u3002\r\n\r\n**\u2460 Expires**\r\nhttp/1.0 \u7684\u4ea7\u7269\uff0c\u6307\u5b9a\u7f13\u5b58\u8fc7\u671f\u7684\u4e8b\u4ef6\uff0c\u662f\u670d\u52a1\u5668\u5177\u4f53\u7684\u65f6\u95f4\u70b9\uff0c\u4f46\u662f\u4ed6\u6709\u4e2a\u7f3a\u70b9\uff0c\u53d7\u672c\u5730\u65f6\u95f4\u5f71\u54cd\uff0c\u4fee\u6539\u4e86\u672c\u5730\u65f6\u95f4\u53ef\u80fd\u4f1a\u9020\u6210\u7f13\u5b58\u5931\u6548\u3002\r\n\r\nExpires \u73b0\u9636\u6bb5\u4e3b\u8981\u7528\u5728\u4e00\u4e9b\u4e0d\u517c\u5bb9 http/1.1\u7684\u73af\u5883\uff0c\u5982\u679c\u5728 Cache-Control \u54cd\u5e94\u5934\u8bbe\u7f6e\u4e86 max-age \u6216\u8005 s-max-age \u6307\u4ee4\uff0c\u90a3\u4e48 Expires \u5934\u4f1a\u88ab\u5ffd\u7565\u3002\r\n\r\n**\u2461 Cache-Control**\r\n\r\nCache-Control \u662f http/1.1 \u4e2d\u7684\u91cd\u8981\u7f13\u5b58\u89c4\u5219\u53ef\u4ee5\u4f7f\u7528\u591a\u79cd\u6307\u4ee4\uff1a\r\n\r\n![http Cache-Control\u6307\u4ee4](/static/images/24_2.webp) \r\n\r\n**\u2462 Pragma**\r\n\r\nPragma \u662f HTTP/1.0 \u4e2d\u5b9a\u4e49\u7684\u4e00\u4e2aheader\u5c5e\u6027\uff0c \u53ea\u6709\u4e00\u4e2a no-cache \u5c5e\u6027\u503c\uff0c\u6548\u679c\u548c Cache-Control \u4e2d\u7684 no-cache \u4e00\u81f4\uff0c\u4e0d\u4f7f\u7528\u5f3a\u7f13\u5b58\uff0c\u4f46\u662f HTTP \u7684\u54cd\u5e94\u5934\u6ca1\u6709\u660e\u786e\u5b9a\u4e49\u8fd9\u4e2a\u5c5e\u6027\uff0c\u6240\u4ee5\u5b83\u4e0d\u80fd\u62ff\u6765\u5b8c\u5168\u66ff\u4ee3 HTTP/1.1 \u4e2d\u5b9a\u4e49\u7684 Cache-control \u5934\u3002\u901a\u5e38\u5b9a\u4e49 Pragma \u4ee5\u5411\u540e\u517c\u5bb9\u57fa\u4e8eHTTP/1.0\u7684\u5ba2\u6237\u7aef\u3002\u3002\r\n\r\n## http\u534f\u5546\u7f13\u5b58\r\n\r\n\u534f\u5546\u7f13\u5b58\u5c31\u662f\u5f3a\u5236\u7f13\u5b58\u5931\u6548\u540e\uff0c\u6d4f\u89c8\u5668\u643a\u5e26\u7f13\u5b58\u6807\u8bc6\u5411\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\uff0c\u7531\u670d\u52a1\u5668\u6839\u636e\u7f13\u5b58\u6807\u8bc6\u51b3\u5b9a\u662f\u5426\u4f7f\u7528\u6d4f\u89c8\u5668\u7f13\u5b58\u7684\u8fc7\u7a0b\u3002\r\n\r\n\u534f\u5546\u7f13\u5b58\u901a\u8fc7\u8bbe\u7f6e Last-Modified \u548c ETag \u4e24\u79cd\u8bf7\u6c42\u5934\u6765\u5b9e\u73b0\u3002\r\n\r\n**\u2460 ETag \u548c If-None-Match**\r\n\r\nETag \u662f\u670d\u52a1\u5668\u54cd\u5e94\u8bf7\u6c42\u65f6\uff0c\u8fd4\u56de\u7531\u670d\u52a1\u5668\u751f\u6210\u7684\u5f53\u524d\u8d44\u6e90\u6587\u4ef6\u7684\u552f\u4e00\u6807\u8bc6\uff0c\u53ea\u8981\u8d44\u6e90\u6709\u53d8\u5316\uff0cETag \u5c31\u4f1a\u91cd\u65b0\u751f\u6210\uff0c\u9996\u6b21\u8bf7\u6c42\u8d44\u6e90\u65f6\u6709\u670d\u52a1\u5668\u8fd4\u56de\u3002\r\n\r\n\u5728\u4e0b\u4e00\u6b21\u8bf7\u6c42\u8d44\u6e90\u65f6\u4f1a\u5c06\u4e0a\u4e00\u6b21\u8fd4\u56de\u7684 ETag \u653e\u5230\u8bf7\u6c42\u5934\u7684 If-None-Match \u91cc\uff0c\u670d\u52a1\u5668\u5bf9\u6bd4 If-None-Match \u91cc\u4f20\u6765\u7684 ETag \u503c\u4e0e\u670d\u52a1\u5668\u7684\u662f\u5426\u4e00\u81f4\uff0c\u4ee5\u6b64\u5224\u65ad\u662f\u5426\u8d44\u8d44\u6e90\u88ab\u4fee\u6539\u8fc7\uff0c\u5982\u679c\u4fee\u6539\u4e86\u5219\u8fd4\u56de\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u548c\u65b0\u7684 ETag\uff0c\u82e5\u672a\u4fee\u6539\u5219\u7ee7\u7eed\u5224\u65adLast-Modified\u3002\r\n\r\n**\u2461 Last-Modified \u548c If-Modified-Since** \r\n\r\n\u5728\u9996\u6b21\u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u670d\u52a1\u5668\u8fd4\u56de\u8d44\u6e90 \u548c Last-Modified\uff0cLast-Modified \u7684\u503c\u662f\u8fd9\u4e2a\u8d44\u6e90\u5728\u670d\u52a1\u5668\u4e0a\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff0c\u6d4f\u89c8\u5668\u63a5\u6536\u540e\u7f13\u5b58\u6587\u4ef6\u548c Last-Modified\u3002\r\n\r\n\u4e0b\u6b21\u8bf7\u6c42\u8fd9\u4e2a\u8d44\u6e90\uff0c\u6d4f\u89c8\u5668\u68c0\u6d4b\u5230\u6709 Last-Modified \u8fd9\u4e2a header \uff0c\u4e8e\u662f\u6dfb\u52a0If-Modified-Since\u8fd9\u4e2a header \u5230\u8bf7\u6c42\u5934\u4e2d\uff0c\u503c\u5c31\u662fLast-Modified\u4e2d\u7684\u503c\uff1b\r\n\u670d\u52a1\u5668\u53bb\u5224\u65ad If-Modified-Since \u4e2d\u7684\u503c\u4e0e\u670d\u52a1\u5668\u4e2d\u8fd9\u4e2a\u8d44\u6e90\u7684\u6700\u540e\u4fee\u6539\u65f6\u95f4\u662f\u5426\u4e00\u81f4\uff0c\u5982\u679c\u4e00\u81f4\u5219\u8fd4\u56de 304 \u544a\u8bc9\u6d4f\u89c8\u5668\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u8d44\u6e90\uff0c\u4e0d\u4e00\u81f4\u5219\u8fd4\u56de Status 200 \u4e2a\u65b0\u7684\u8d44\u6e90\u3002\r\n\r\n**\u2462 ETag \u548c Last-Modified\u5bf9\u6bd4**\r\n\r\n1\ufe0f\u20e3 Last-Modified \u7684\u65f6\u95f4\u53ea\u80fd\u7cbe\u786e\u5230\u79d2\uff0c\u4e00\u79d2\u5185\u4fee\u6539\u591a\u6b21\u7684\u8bdd\u4ece\u65f6\u95f4\u4f53\u73b0\u4e0d\u51fa\u6765\u53d8\u5316\uff0c\uff0cETag \u7cbe\u786e\u5ea6\u66f4\u9ad8\uff0c\u6bcf\u6b21\u6539\u53d8\u90fd\u4f1a\u91cd\u65b0\u751f\u6210\u3002\u5982\u679c\u662f\u8d1f\u8f7d\u5747\u8861\u7684\u670d\u52a1\u5668\uff0c\u5404\u4e2a\u670d\u52a1\u5668\u751f\u6210\u7684Last-Modified\u4e5f\u6709\u53ef\u80fd\u4e0d\u4e00\u81f4\u3002\r\n\r\n2\ufe0f\u20e3 \u5728\u6027\u80fd\u4e0a\uff0cETag \u8981\u900a\u4e8eLast-Modified\uff0c\u6bd5\u7adf Last-Modified \u53ea\u9700\u8981\u8bb0\u5f55\u65f6\u95f4\uff0c\u800c ETag \u9700\u8981\u670d\u52a1\u5668\u901a\u8fc7\u7b97\u6cd5\u6765\u8ba1\u7b97\u51fa\u4e00\u4e2ahash\u503c\u3002\r\n\r\n3\ufe0f\u20e3 \u670d\u52a1\u5668\u6821\u9a8c\u4f18\u5148\u8003\u8651 ETag\u3002\r\n\r\n## \u53c2\u8003\u8d44\u6599\r\n\r\n<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP" target="_blank" rel="nofollow"> MDN HTTP \u6559\u7a0b </a>'},"E+I+":function(n,e,r){"use strict";r.r(e),e["default"]="# node + mysql\u4fdd\u5b58Emoji\u5931\u8d25\u4e71\u7801\u95ee\u9898\r\n\r\n## \u80cc\u666f\r\n\r\n\u5f00\u53d1\u73af\u5883\uff1a win + node(egg) + mysql \r\n\r\n\u7528\u6237\u81ea\u5b9a\u4e49\u6d88\u606f\u9700\u8981\u4fdd\u5b58\u5230mysql\u6570\u636e\u5e93\uff0c\u6d88\u606f\u53ef\u80fd\u5305\u542bEmoji\uff0c\u76f4\u63a5\u4fdd\u5b58\u6d88\u606f\u65f6Emoji\u4e71\u7801\u53d8\u6210????.\r\n\r\n## \u89e3\u51b3\r\n\r\n\u76f4\u63a5\u5148\u8bf4\u89e3\u51b3\u529e\u6cd5\uff1a\r\n\r\n\u2460 \u4fee\u6539mysql\u6570\u636e\u5e93\u7684\u5b57\u7b26\u96c6\u6539\u4e3a utf8mb4,\r\n\r\n\u2461 \u540c\u65f6\u8bbe\u7f6enode mysql\u8fde\u63a5chareset\u4e3a utf8mb4 \u5373\u53ef\u3002\r\n\r\n**\u8fd9\u79cd\u65b9\u5f0f\u6709\u4e2a\u7f3a\u70b9\u5c31\u662f\u4e0d\u517c\u5bb9 mysql 5.5.3 \u4e4b\u524d\u7684\u7248\u672c\uff0c\u5982\u679c\u8981\u8003\u8651\u517c\u5bb9\u8001\u7248\u672c\u8bf7\u91c7\u7528\u5176\u4ed6\u65b9\u5f0f\u3002**\r\n\r\n\r\n## \u95ee\u9898\u539f\u56e0\r\n\r\n\u6570\u636e\u5e93\u7684\u5b57\u7b26\u7f16\u7801\u6211\u4eec\u4e00\u822c\u8bbe\u7f6e\u4e3a utf8\uff0c\u8fd9\u91cc\u6211\u4eec\u51fa\u95ee\u9898\u4e5f\u662f\u8bbe\u7f6e\u7684 utf8, utf8\u5b57\u7b26\u7f16\u7801\u652f\u6301\u7684\u7f16\u7801\u8303\u56f4\u4e3a \\u0000-\\uFFFF\uff0c\u800c Emoji \u6240\u5728\u7684\u7f16\u7801\u8303\u56f4\u662f \\u1F601-\\u1F64F\uff0c\u8d85\u51fa MySql \u7684\u8fb9\u754c\u4e86\uff0c\u6240\u4ee5\u76f4\u63a5\u4fdd\u5b58Emoji\u4f1a\u51fa\u95ee\u9898\u3002utf8mb4 \u662f MySql \u5728 5.5.3 \u7248\u672c\u4e4b\u540e\u65b0\u589e\u7684\u7f16\u7801\u65b9\u5f0f\uff0c\u76ee\u7684\u5c31\u662f\u7528\u6765\u7528\u6765\u517c\u5bb9\u56db\u5b57\u8282\u7684 Unicode\uff0c\u5176\u4e2d\u5c31\u5305\u62ec Emoji\u3002\r\n\r\n\u540c\u65f6\u6570\u636e\u5e93\u8fde\u63a5\u914d\u7f6e\u7684chareset\u4e5f\u4fee\u6539\u4e3a utf8mb4,\u8fd9\u6837\u8bfb\u53d6Emoji\u7684\u65f6\u5019\u624d\u80fd\u6b63\u5e38\u8bfb\u53d6\u3002"},"HU5/":function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-14 13:33:32\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-15 16:25:31\r\n * @FilePath: \\qianduan.shop\\data\\blogs\\30.md\r\n--\x3e\r\n# Doris-1.4.2 Linux \u76f4\u63a5\u7f16\u8bd1\u95ee\u9898\u8bb0\u5f55\r\n\r\n\u5b98\u65b9\u6587\u6863\uff1a<a href="https://doris.apache.org/master/zh-CN/installing/compilation.html#%E7%9B%B4%E6%8E%A5%E7%BC%96%E8%AF%91-centos-ubuntu" target="_blank" rel="nofollow">\u76f4\u63a5\u7f16\u8bd1-centos-ubuntu</a>\r\n\r\n\u6211\u662f\u5728 AWS \u4e0a\u7684 EC2 \u8fdb\u884c\u7684\u90e8\u7f72\uff0c\u672c\u6587\u4e3b\u8981\u8bb0\u5f55**\u6309\u5b98\u65b9\u6587\u6863\u64cd\u4f5c\u76f4\u63a5\u7f16\u8bd1**\u8fc7\u7a0b\u4e2d\u9047\u5230\u7684\u95ee\u9898\uff0c\u65b9\u4fbf\u67e5\u8be2\u3002\r\n\r\n## 1. EC2 \u5b9e\u4f8b\u9009\u62e9\r\n\r\n\u4e0d\u8981\u592a\u62a0\uff0c\u6211\u5c31\u662f\u592a\u62a0\uff0c\u9009\u4e86\u6700\u4fbf\u5b9c\u6700\u5c0f\u7684\u6d4b\u8bd5\uff0c1\u68381G\u5185\u5b58\uff0c8G \u786c\u76d8\uff0c\u4e0d\u591f\u7528\u3002\r\n\r\n\u5347\u52302\u68388G\u5185\u5b58\uff0c24G \u786c\u76d8\u624d\u5b8c\u6210\u7f16\u8bd1\uff0c1G\u5185\u5b58\u4f1a\u62a5\u9519\u63d0\u793a\uff1avirtual memory exhausted: Cannot allocate memory\u3002\r\n\r\n<hr />\r\n\r\n## 2.flex \u7248\u672c\u592a\u4f4e\uff0c\u9700\u8981\u5927\u4e8e2.6.0\r\n\r\n```\r\n  [ec2-user ~] wget https://github.com/westes/flex/releases/download/v2.6.4/flex-2.6.4.tar.gz\r\n  [ec2-user ~] tar -xvf  flex-2.6.4.tar.gz\r\n  [ec2-user ~] cd flex-2.6.4\r\n  [ec2-user flex-2.6.4] ./configure\r\n  [ec2-user flex-2.6.4] make\r\n  [ec2-user flex-2.6.4] make install\r\n\r\n```\r\n\r\nflex \u8f6f\u4ef6\u5305\u6765\u6e90\uff1a<a href="https://bf.mengyan1223.wang/lfs/zh_CN/11.0/chapter03/packages.html" target="_blank" rel="nofollow">Linux From Scratch - \u7248\u672c 11.0-\u4e2d\u6587\u7ffb\u8bd1\u7248</a>\r\n\r\n<hr />\r\n\r\n## 3.\u914d\u7f6e JAVA_HOME \u73af\u5883\u53d8\u91cf\r\n\r\n\u53c2\u8003\uff1a<a href="https://blog.csdn.net/qq_43491705/article/details/111354584" target="_blank" rel="nofollow">linux\u914d\u7f6eJAVA_HOME\u73af\u5883</a>\r\n\r\n<hr />\r\n\r\n## 4. cmake \u7248\u672c\u592a\u4f4e\uff0c\u5b89\u88c5 cmake \u63d0\u793a\u627e\u4e0d\u5230 openssl\r\n\r\ncmake \u5b89\u88c5\u53c2\u8003\u95ee\u98981 flex\u7248\u672c\u66f4\u65b0\uff0c\u8f6f\u4ef6\u5305\u6765\u6e90\uff1a<a href="https://cmake.org/download/" target="_blank" rel="nofollow">CMake</a>\r\n\r\n```\r\ngmake: `cmake\' is up to date.\r\nloading initial cache file /home/ec2-user/cmake-3.22.1/Bootstrap.cmk/InitialCacheFlags.cmake\r\n-- Could NOT find OpenSSL, try to set the path to OpenSSL root folder in the system variable OPENSSL_ROOT_DIR (missing: OPENSSL_CRYPTO_LIBRARY OPENSSL_INCLUDE_DIR)\r\nCMake Error at Utilities/cmcurl/CMakeLists.txt:562 (message):\r\n  Could not find OpenSSL.  Install an OpenSSL development package or\r\n  configure CMake with -DCMAKE_USE_OPENSSL=OFF to build without OpenSSL.\r\n\r\n```\r\n\r\n**\u89e3\u51b3\u529e\u6cd5\uff1a**\r\n\r\n```\r\nyum install -y openssl openssl-devel\r\n\r\n```\r\n\r\n## 5.\u63d0\u793a\u9519\u8bef\uff1afatal error: sasl/sasl.h: No such file or directory\r\n\r\n\u8be6\u7ec6\u63d0\u793a\u5982\u4e0b\uff1b\r\n```\r\n###########################################################\r\n###                  Configure failed                   ###\r\n###########################################################\r\n### Accumulated failures:                               ###\r\n###########################################################\r\n libsasl2 (WITH_SASL_CYRUS) \r\n    module: self\r\n    action: fail\r\n    reason:\r\ncompile check failed:\r\nCC: CC\r\nflags: -lsasl2\r\n/usr/bin/../bin/gcc -fPIC -I/home/ec2-user/incubator-doris/thirdparty/installed/include -g -O2 -fPIC -Wall -Wsign-compare -Wfloat-equal -Wpointer-arith -Wcast-align -Wall -Werror _mkltmpDG8OLw.c -o _mkltmpDG8OLw.c.o  -L/home/ec2-user/incubator-doris/thirdparty/installed/lib -lsasl2:\r\n_mkltmpDG8OLw.c:3:10: fatal error: sasl/sasl.h: No such file or directory\r\n #include <sasl/sasl.h>\r\n          ^~~~~~~~~~~~~\r\ncompilation terminated.\r\nsource: \r\n#include <stddef.h>\r\n#include <sasl/sasl.h>\r\n\r\n libsasl (WITH_SASL_CYRUS) \r\n    module: self\r\n    action: fail\r\n    reason:\r\ncompile check failed:\r\nCC: CC\r\nflags: -lsasl\r\n/usr/bin/../bin/gcc -fPIC -I/home/ec2-user/incubator-doris/thirdparty/installed/include -g -O2 -fPIC -Wall -Wsign-compare -Wfloat-equal -Wpointer-arith -Wcast-align -Wall -Werror _mkltmpx7M6e0.c -o _mkltmpx7M6e0.c.o  -L/home/ec2-user/incubator-doris/thirdparty/installed/lib -lsasl:\r\n_mkltmpx7M6e0.c:3:10: fatal error: sasl/sasl.h: No such file or directory\r\n #include <sasl/sasl.h>\r\n          ^~~~~~~~~~~~~\r\ncompilation terminated.\r\nsource: \r\n#include <stddef.h>\r\n#include <sasl/sasl.h>\r\n\r\n```\r\n\r\n**\u89e3\u51b3\u529e\u6cd5**\r\n\r\n```\r\nyum -y install cyrus-sasl cyrus-sasl-devel cyrus-sasl-lib\r\n```\r\n\r\n## 6.sudo yum install centos-release-scl \u627e\u4e0d\u5230\r\n\r\n**\u89e3\u51b3\u529e\u6cd5**\r\n\r\n```\r\nrpm -ivh https://cbs.centos.org/kojifiles/packages/centos-release-scl-rh/2/3.el7.centos/noarch/centos-release-scl-rh-2-3.el7.centos.noarch.rpm\r\n\r\nrpm -ivh https://cbs.centos.org/kojifiles/packages/centos-release-scl/2/3.el7.centos/noarch/centos-release-scl-2-3.el7.centos.noarch.rpm\r\n\r\n```\r\n\r\n## 7.sudo yum install devtoolset-10 \u4f9d\u8d56 libgfortran5 \u7f3a\u5931\r\n\r\n**\u89e3\u51b3\u529e\u6cd5\uff1a**\r\n```\r\nrpm -ivh http://mirror.centos.org/centos/7/os/x86_64/Packages/libgfortran5-8.3.1-2.1.1.el7.x86_64.rpm\r\n\r\n```\r\n\r\n## 8.sudo yum install devtoolset-10 \u62a5\u9519\uff1aGPG key retrieval failed: [Errno 14] curl#37 - "Couldn\'t open file /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle"\r\n\r\n```\r\nwget http://public-yum.oracle.com/RPM-GPG-KEY-oracle-ol7 -O /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle\r\n\r\n```'},Iweq:function(n,e,r){"use strict";r.r(e),e["default"]="\x3c!--\r\n * @Date: 2021-12-16 09:00:13\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-16 09:39:21\r\n * @FilePath: \\qianduan.shop\\data\\blogs\\31.md\r\n--\x3e\r\n# Doris be\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u540e\u5f02\u5e38\u65ad\u5f00\u8fde\u63a5\r\n\r\n\u62a5\u9519\u63d0\u793a\uff1a\r\n\r\n```\r\nterminate called after throwing an instance of 'std::bad_alloc'\r\n  what():  std::bad_alloc\r\nMinidump created at: /home/ec2-user/doris/be/minidump/9b820b8c-9591-4c1f-557f0597-62edfe46.dmp\r\n*** Aborted at 1639572821 (unix time) try \"date -d @1639572821\" if you are using GNU date ***\r\nPC: @     0x7feb5ab0aca0 __GI_raise\r\n*** SIGABRT (@0x4f71) received by PID 20337 (TID 0x7feab8080700) from PID 20337; stack trace: ***\r\n    @          0x2149ad2 google::(anonymous namespace)::FailureSignalHandler()\r\n    @     0x7feb5ab0ad10 (unknown)\r\n    @     0x7feb5ab0aca0 __GI_raise\r\n    @     0x7feb5ab0c148 __GI_abort\r\n    @          0x1030f7f _ZN9__gnu_cxx27__verbose_terminate_handlerEv.cold\r\n    @          0x3898ca6 __cxxabiv1::__terminate()\r\n    @          0x3898d11 std::terminate()\r\n    @          0x3898e64 __cxa_throw\r\n    @          0x103004c _ZN12_GLOBAL__N_110handle_oomEPFPvS0_ES0_bb.cold\r\n    @          0x396307f tcmalloc::allocate_full_cpp_throw_oom()\r\n    @          0x38b7991 std::string::_Rep::_S_create()\r\n    @          0x38b87ce std::string::_Rep::_M_clone()\r\n    @          0x38b8884 std::string::reserve()\r\n    @          0x38b8c8c std::string::append()\r\n    @          0x14fdb9d apache::thrift::protocol::TBinaryProtocolT<>::readStringBody<>()\r\n    @          0x14fdcfc apache::thrift::protocol::TVirtualProtocol<>::readMessageBegin_virt()\r\n    @          0x1727fab apache::thrift::TDispatchProcessor::process()\r\n    @          0x2135021 apache::thrift::server::TConnectedClient::run()\r\n    @          0x212d8c3 apache::thrift::server::TThreadedServer::TConnectedClientRunner::run()\r\n    @          0x212ff83 apache::thrift::concurrency::Thread::threadMain()\r\n    @          0x211f7e0 std::thread::_State_impl<>::_M_run()\r\n    @          0x39148b0 execute_native_thread_routine\r\n    @     0x7feb5a8c040b start_thread\r\n    @     0x7feb5abc440f __GI___clone\r\n    @                0x0 (unknown)\r\n\r\n```\r\n\r\n## \u95ee\u9898\u539f\u56e0\r\n\r\n\u5185\u5b58\u6ea2\u51fa\uff0c\u7531\u4e8e\u662f\u6d4b\u8bd5\u73af\u5883\uff0c\u6211\u4eec\u9009\u7528\u7684 EC2 \u5b9e\u4f8b\u5185\u5b58\uff081G\uff09\u6bd4\u8f83\u5c0f\uff0c\u5bb9\u6613\u51fa\u73b0\u5185\u5b58\u6ea2\u51fa\u3002\r\n\r\n## \u89e3\u51b3\u529e\u6cd5\r\n\r\n\u2460 \u589e\u52a0\u673a\u5668\u5185\u5b58\r\n\r\n\u2461 \u8bbe\u7f6e echo 1 > /proc/sys/vm/overcommit_memory \u5141\u8bb8\u8fc7\u91cf\u4f7f\u7528\u5185\u5b58.\r\n\r\n```\r\nsudo -i\r\n\r\necho 1 > /proc/sys/vm/overcommit_memory\r\n\r\n```\r\n\r\n\u76f4\u63a5\u4f7f\u7528sudo echo 1 > /proc/sys/vm/overcommit_memory \u4e5f\u4f1a\u63d0\u793a Permission denied\u3002"},J55p:function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-27 14:41:11\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2022-01-22 09:41:51\r\n * @FilePath: \\qianduan.shop\\front\\data\\blogs\\10.md\r\n--\x3e\r\n# SEO Series - On-site Optimization\r\n\r\nWebsite SEO optimization is divided into three main areas: onsite optimization, offsite optimization, and technical optimization. This article focuses on onsite optimization, SEO onsite optimization refers to the internal content and structure of the website for optimization and adjustment, so that the website is search engine friendly, conducive to crawling, indexing, inclusion and ranking.\r\n\r\nFrom the internal website to start our SEO journey, this article introduces onsite optimization mainly contains **website content**, **website layout**, **user experience** three aspects.\r\n\r\n\r\n## 1.Website content\r\n\r\n### **Site Configuration**\r\n1\ufe0f\u20e3 Robots.txt file, tell search engines how to crawl the site, to prevent meaningless crawl \r\n\r\n2\ufe0f\u20e3 Sitemap sitemap, to ensure that the URL can be generated and submitted to search engines.\r\n\r\n### **Label Configuration**\r\n1\ufe0f\u20e3 TDK tag: the title word count is short, controlled within 20 words, for mobile, you can focus on writing the description tag.\r\n\r\nNote: TDK is title, description, keywords\r\n\r\n2\ufe0f\u20e3 Image tag ALT attribute: add alt logo for the pictures in the station, especially important for picture-based websites.\r\n\r\n3\ufe0f\u20e3 Nofollow tag: reasonable use can guide the spider crawl and weight transfer.\r\n\r\nNofollow has two uses: \r\n1.For meta tags\uff1a\r\n```\r\n<meta name="robots" content="nofollow" />\uff0c\r\n```\r\n\r\nTell the crawler that all links on the page do not need to be tracked.\u3002\r\n\r\n2.For a tags\uff1a\r\n```\r\n<a href="login.aspx" rel="nofollow">Login</a>\r\n```\r\nTell the crawler that the page does not need to be tracked.\r\n\r\n### **website content**\r\n1\ufe0f\u20e3 Create original content, there\'s nothing to say, search engines love it.\r\n\r\n2\ufe0f\u20e3 Enrich the content type, ensure the content diversity, including pictures, short video screens, icons, documents, etc.\r\n\r\n3\ufe0f\u20e3 content line structure, for the station SEO, the reasonable use of the "word around" to ensure the logical structure of the paragraph.\r\n\r\nThe word "around" is a strategy for onsite optimization, is the indicator title contains keywords, keywords contain keywords, internal anchor text contains keywords, the content page for the first time the keywords need to use strong tag bold. The role is to highlight the relevance of the page, emphasizing the core keywords, so that search engines quickly GET to the core content of the page.\r\n\r\n4\ufe0f\u20e3 keyword assignment, according to the user search purpose, create keywords, and to ensure the relevance of the keywords with features, control the number of anchor text. \r\n\r\n## 2. Website Layout\r\n\r\nMost people often ignore the design layout of the page, the search engine crawl page content and people read the same basic order, from top to bottom, from left to right, so the design layout to the user experience.\r\n\r\n1\ufe0f\u20e3 Website layout, navigation, columns, panels, products, articles, etc. in accordance with user needs to layout.\r\n\r\n2\ufe0f\u20e3 Reasonable internal chain settings, what is the internal chain, is the website link to their own anchor text, which can increase the relevance of the internal structure of the site, transfer the weight of the site as well as help users and search engines to understand the relevant information.\r\n\r\n3\ufe0f\u20e3 The site directory level is not easy too deep, too deep level is not conducive to crawling.\r\n\r\n## 3. User experience\r\n\r\n1\ufe0f\u20e3 Access speed should be fast, access speed is especially important, I believe you then visit a site if you can not open for a long time, you will not hesitate to choose to close the page.\r\n\r\n2\ufe0f\u20e3 Mobile adaptation, mobile traffic dominated today, the site adaptation of mobile natural indispensable.\r\n\r\n3\ufe0f\u20e3 Related article recommendation, as far as possible to meet the user\'s search needs.\r\n\r\n4\ufe0f\u20e3 page "value", good-looking things naturally attract people like.\r\n\r\n\r\n## Points to note\r\n\r\n1\ufe0f\u20e3 Try to avoid internal competition of keywords in the content page.\r\n\r\n2\ufe0f\u20e3 Collected content is strictly prohibited, reasonable reproduction and with the original copyright links.\r\n\r\n3\ufe0f\u20e3 Avoid the use of content farms, preferably not pseudo-original.\r\n\r\n4\ufe0f\u20e3 Avoid high keyword density, use related words instead.\r\n\r\n5\ufe0f\u20e3 Do not pile up keywords in the website title and image ALT attributes.\r\n\r\n\r\n**Note: The above methods still have many details that need attention, the above content is only for your reference and discussion. **\r\n\r\n'},"JN/6":function(n,e,r){"use strict";r.r(e),e["default"]="# \u6d4f\u89c8\u5668\u4e2d\u7684js\u4e8b\u4ef6\u5faa\u73af\uff08Event loop\uff09\r\n\r\n\u672c\u6587\u5c06\u7b80\u8ff0\u6d4f\u89c8\u5668\u4e2d\u7684js\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\uff0c\u5e2e\u52a9\u6211\u4eec\u7406\u89e3\u6d4f\u89c8\u5668\u73af\u5883js\u4ee3\u7801\u662f\u5982\u4f55\u8fd0\u884c\u7684\u3002\r\n\r\nJavascript\u7684\u4e00\u5927\u7279\u70b9\u662f\u5355\u7ebf\u7a0b\uff0c\u4e5f\u5c31\u610f\u5473\u7740\u540c\u4e00\u65f6\u95f4\u4ed6\u53ea\u80fd\u505a\u4e00\u4ef6\u4e8b\u3002\u4e8b\u4ef6\u5faa\u73af\uff08Event Loop\uff09\u662f\u4e3a\u4e86\u534f\u8c03\u4e8b\u4ef6\uff0c\u7528\u6237\u4ea4\u4e92\uff0cUI\u6e32\u67d3\uff0c\u7f51\u7edc\u5904\u7406\u7b49\u884c\u4e3a\uff0c\u9632\u6b62\u7ebf\u7a0b\u963b\u585e\u800c\u8bde\u751f\u7684\u3002\r\n\r\n## \u6d4f\u89c8\u5668\u4e8b\u4ef6\u5faa\u73af\r\n\r\n### 1.\u5b8f\u4efb\u52a1\uff08Macro Task\uff09\u548c\u5fae\u4efb\u52a1\uff08Micro Task\uff09 \r\n\r\n\u6d4f\u89c8\u5668\u4e2djs\u4e8b\u4ef6\u5faa\u73af\u7684\u5f02\u6b65\u961f\u5217\u6709\u4e24\u79cd\uff1amacro\uff08\u5b8f\u4efb\u52a1\uff09\u961f\u5217\u548c micro\uff08\u5fae\u4efb\u52a1\uff09\u961f\u5217\u3002\u5b8f\u4efb\u52a1\u961f\u5217\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u5fae\u4efb\u52a1\u961f\u5217\u53ea\u6709\u4e00\u4e2a\u3002\r\n\r\n\u5e38\u89c1\u7684\u5b8f\u4efb\u52a1\uff1a\u5b9a\u65f6\u5668\uff08setTimeout\uff0csetInterval\uff09\u3001script\uff08\u6574\u4f53\u4ee3\u7801\uff09\u3001 I/O \u64cd\u4f5c\u3001UI\u6e32\u67d3\u7b49\u3002 \r\n\r\n\u5e38\u89c1\u7684\u5fae\u4efb\u52a1: Promise.then(Promise\u7684\u56de\u8c03\u65b9\u6cd5)\u3001MutationObserver(html5\u65b0\u7279\u6027) \u7b49\u3002 \r\n\r\n### 2.\u4e8b\u4ef6\u5faa\u73af\u8fc7\u7a0b\u89e3\u6790\r\n\r\n\u4e00\u4e2a\u5b8c\u6574\u7684\u4e8b\u4ef6\u5faa\u73af\u8fc7\u7a0b\u53ef\u4ee5\u6982\u62ec\u4e3a\u4ee5\u4e0b\u9636\u6bb5\uff1a\r\n\r\n![js \u4e8b\u4ef6\u5faa\u73af](/static/images/event_loop.png) \r\n\r\n\u2460 \u521a\u5f00\u59cb\u6267\u884c\u6808\u7a7a,\u6211\u4eec\u53ef\u4ee5\u628a\u6267\u884c\u6808\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5b58\u50a8\u51fd\u6570\u8c03\u7528\u7684\u6808\u7ed3\u6784\uff0c\u9075\u5faa\u5148\u8fdb\u540e\u51fa\u7684\u539f\u5219\u3002\u5fae\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\uff0c\u5b8f\u4efb\u52a1\u961f\u5217\u91cc\u6709\u4e14\u53ea\u6709\u4e00\u4e2a script \u811a\u672c\uff08\u6574\u4f53\u4ee3\u7801\uff09\u3002 \r\n\r\n\u2461 \u5168\u5c40\u4e0a\u4e0b\u6587\uff08script \u6807\u7b7e\uff09\u88ab\u63a8\u5165\u6267\u884c\u6808\uff0c\u540c\u6b65\u4ee3\u7801\u6267\u884c\u3002\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5224\u65ad\u662f\u540c\u6b65\u4efb\u52a1\u8fd8\u662f\u5f02\u6b65\u4efb\u52a1\uff0c\u901a\u8fc7\u5bf9\u4e00\u4e9b\u63a5\u53e3\u7684\u8c03\u7528\uff0c\u53ef\u4ee5\u4ea7\u751f\u65b0\u7684\u5b8f\u4efb\u52a1\u4e0e\u5fae\u4efb\u52a1\uff0c\u5206\u522b\u88ab\u63a8\u5165\u5404\u81ea\u7684\u4efb\u52a1\u961f\u5217\u91cc\u3002\u540c\u6b65\u4ee3\u7801\u6267\u884c\u5b8c\u4e86\uff0cscript \u811a\u672c\u4f1a\u88ab\u79fb\u51fa\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u672c\u8d28\u4e0a\u662f\u961f\u5217\u7684\u5b8f\u4efb\u52a1\u7684\u6267\u884c\u548c\u51fa\u961f\u7684\u8fc7\u7a0b\u3002 \r\n\r\n\u2462 \u4e0a\u4e00\u6b65\u6211\u4eec\u51fa\u961f\u7684\u662f\u4e00\u4e2a\u5b8f\u4efb\u52a1\uff0c\u8fd9\u4e00\u6b65\u6211\u4eec\u5904\u7406\u7684\u662f\u5fae\u4efb\u52a1\u3002\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u6bcf\u6267\u884c\u5b8c\u4e00\u4e2a\u5b8f\u4efb\u52a1\u5c31\u4f1a\u53bb\u68c0\u6d4b\u5fae\u4efb\u52a1\u961f\u5217\u91cc\u662f\u5426\u6709\u5f85\u5904\u7406\u7684\u5fae\u4efb\u52a1\uff0c\u5982\u679c\u6709\uff0c\u5c31\u4f1a\u5168\u90e8\u4f9d\u6b21\u6267\u884c\u5e76\u6e05\u7a7a\u961f\u5217\uff1b\u5982\u679c\u6ca1\u6709\uff0c\u5c31\u6267\u884c\u4e0b\u4e2a\u5b8f\u4efb\u52a1\u3002\r\n\r\n\u2463 **\u6267\u884c\u6e32\u67d3\u64cd\u4f5c\uff0c\u66f4\u65b0\u754c\u9762**\r\n\r\n\u2464 \u68c0\u67e5\u662f\u5426\u5b58\u5728 Web worker \u4efb\u52a1\uff0c\u5982\u679c\u6709\uff0c\u5219\u5bf9\u5176\u8fdb\u884c\u5904\u7406\r\n\r\n\u2465 \u4e0a\u8ff0\u8fc7\u7a0b\u5faa\u73af\u5f80\u590d\uff0c\u76f4\u5230\u4e24\u4e2a\u961f\u5217\u90fd\u6e05\u7a7a \r\n\r\n\u7b80\u5355\u6765\u8bf4\uff1a \r\n\r\n**\u5f53\u4e00\u4e2a\u5b8f\u4efb\u52a1\u6267\u884c\u5b8c\u6210\u4e4b\u540e,\u4f1a\u68c0\u67e5\u662f\u5426\u6709\u5fae\u4efb\u52a1\u961f\u5217\u3002\u5982\u679c\u6709\uff0c\u5148\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u6240\u6709\u4efb\u52a1\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u4f1a\u8bfb\u53d6\u5b8f\u4efb\u52a1\u961f\u5217\u4e2d\u6700\u9760\u524d\u7684\u4e00\u4e2a\uff0c\u6267\u884c\u5b8f\u4efb\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9047\u5230\u5fae\u4efb\u52a1\uff0c\u4f9d\u6b21\u52a0\u5165\u5fae\u4efb\u52a1\u961f\u5217\u3002\u6808\u7a7a\u540e\uff0c\u518d\u6b21\u8bfb\u53d6\u5fae\u4efb\u52a1\u961f\u5217\u91cc\u7684\u4efb\u52a1\uff0c\u5982\u6b64\u5faa\u73af\u3002**\r\n\r\n\u4e3e\u4e2a\u4f8b\u5b50\uff1a \r\n\r\n```\r\nPromise.resolve().then(()=>{\r\n  console.log('Promise 1')  ;\r\n  setTimeout(()=>{\r\n    console.log('setTimeout 1');\r\n  },0);\r\n});\r\n\r\nsetTimeout(()=>{\r\n  console.log('setTimeout 2');\r\n  Promise.resolve().then(()=>{\r\n    console.log('Promise 2');\r\n  })\r\n},0);\r\n\r\n``` \r\n\r\n\u8f93\u51fa\u7ed3\u679c\uff1aPromise 1, setTimeout 2, promise 2, setTimeout 1\r\n\r\n\u4f8b\u5b50\u89e3\u6790\uff1a\r\n\r\n\u2460 \u5168\u5c40\u540c\u6b65\u4ee3\u7801(\u6574\u4e2a\u4ee3\u7801\u5757)\u6267\u884c(\u8fd9\u5c5e\u4e8e\u5b8f\u4efb\u52a1)\uff0c\u6267\u884c\u5b8c\u6bd5(\u4e0a\u8ff0\u4ee3\u7801\u4ea7\u751f\u4e86\u4e00\u4e2a\u5b8f\u4efb\u52a1setTimeout 2 \u548c\u4e00\u4e2a\u5fae\u4efb\u52a1Promise 1)\uff0c\u68c0\u67e5\u5e76\u6267\u884c\u5fae\u4efb\u52a1\u961f\u5217\uff0c\u8f93\u51faPromise 1\uff0c\u540c\u65f6\u4f1a\u751f\u6210\u4e00\u4e2a\u5b8f\u4efb\u52a1 setTimeout 1\u3002 \r\n\r\n\u2461 \u7136\u540e\u53bb\u67e5\u770b\u5b8f\u4efb\u52a1\u961f\u5217\uff0c\u5b8f\u4efb\u52a1 setTimeout 2 \u5728 setTimeout 1 \u4e4b\u524d\uff0c\u5148\u6267\u884c\u5b8f\u4efb\u52a1 setTimeout 2\uff0c\u8f93\u51fa setTimeout 2\u3002 \r\n\r\n\u2462 \u5728\u6267\u884c\u5b8f\u4efb\u52a1setTimeout 2\u65f6\u4f1a\u751f\u6210\u5fae\u4efb\u52a1Promise 2 \uff0c\u653e\u5165\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\uff0c\u63a5\u7740\u5148\u53bb\u6e05\u7a7a\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u6240\u6709\u4efb\u52a1\uff0c\u8f93\u51fa Promise 2\u3002 \r\n\r\n\u2463 \u6e05\u7a7a\u5b8c\u5fae\u4efb\u52a1\u961f\u5217\u4e2d\u7684\u6240\u6709\u4efb\u52a1\u540e\uff0c\u5c31\u53c8\u4f1a\u53bb\u5b8f\u4efb\u52a1\u961f\u5217\u53d6\u4e00\u4e2a\uff0c\u8fd9\u56de\u6267\u884c\u7684\u662f setTimeout 1\u3002"},KKCa:function(n,e){"function"===typeof Object.create?n.exports=function(n,e){n.super_=e,n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(n,e){n.super_=e;var r=function(){};r.prototype=e.prototype,n.prototype=new r,n.prototype.constructor=n}},LzLu:function(n,e,r){"use strict";r.r(e),e["default"]='# react cron\u8868\u8fbe\u5f0f\u751f\u6210\u7ec4\u4ef6qnn-react-cron\r\n\r\n\u6700\u8fd1\u9700\u6c42\u9047\u5230\u4e86\u9700\u8981\u7528\u6237\u914d\u7f6ecron\u8868\u8fbe\u5f0f\u7684\u9700\u6c42\uff0c\u53c8\u4e0d\u80fd\u8ba9\u7528\u6237\u76f4\u63a5\u8f93\u5165 **"0/10 * * * * ? *"** \u8fd9\u79cd\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684cron\u8868\u8fbe\u5f0f\uff0c\u53ea\u80fd\u901a\u8fc7\u53ef\u89c6\u5316\u754c\u9762\u5e2e\u52a9\u7528\u6237\u751f\u6210\u8868\u8fbe\u5f0f\uff0c\u9274\u4e8e\u751f\u6210\u903b\u8f91\u8fd8\u662f\u6bd4\u8f83\u590d\u6742\uff0c\u4e8e\u662f\u5c31\u5f00\u59cb\u5728\u7f51\u4e0a\u627e\u73b0\u6210\u7684\u8f6e\u5b50\u6765\u4f7f\u7528\u3002\r\n\r\n\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u4e24\u4e2a\u7ec4\u4ef6react-cron-antd\u548cqnn-react-cron, \u5148\u8bf4\u7ed3\u679c\uff0c\u6211\u4eec\u6700\u7ec8\u9009\u62e9qnn-react-cron,\u56e0\u4e3a\u5b83bug\u76f8\u5bf9\u5c11\uff0c\u652f\u6301\u591a\u8bed\u8a00\uff0c\u5c31\u662f\u8fd9\u6837\uff0c\u539f\u56e0\u540e\u9762\u7ec6\u8bf4\u3002\r\n\r\nqnn-react-cron\u6539\u7f16\u81eareact-cron-antd\uff0c\u6240\u4ee5\u4e24\u4e2a\u7ec4\u4ef6\u7684\u529f\u80fd\u662f\u4e00\u6837\u7684\uff0c\u90fd\u652f\u6301\u4ee5\u4e0b\u529f\u80fd\uff1a\r\n\r\n\ud83c\udf89 \u5168\u9762\u652f\u6301cron\uff1a\u79d2\u3001\u5206\u3001\u65f6\u3001\u65e5\u3001\u6708\u3001\u5468\u3001\u5e74\r\n\ud83c\udf89 \u65e5\u53ca\u5468\u6761\u4ef6\u4e92\u65a5\uff0c\u81ea\u52a8\u6539\u53d8\u54cd\u5e94\u503c\r\n\ud83c\udf89 \u652f\u6301\u53cd\u89e3\u6790cron\u8868\u8fbe\u5f0f\u5230UI\r\n\ud83c\udf89 \u53ef\u7ed3\u5408\u6b64\u7ec4\u4ef6\u4e0eAntd\u7684\u4e0b\u62c9\u53ca\u8f93\u5165\u7ec4\u4ef6\u5c01\u88c5\u6210\u4e0b\u62c9\u8f93\u5165\u6846\ud83c\udf89 \u5168\u9762\u652f\u6301cron\uff1a\u79d2\u3001\u5206\u3001\u65f6\u3001\u65e5\u3001\u6708\u3001\u5468\u3001\u5e74\r\n\ud83c\udf89 \u65e5\u53ca\u5468\u6761\u4ef6\u4e92\u65a5\uff0c\u81ea\u52a8\u6539\u53d8\u54cd\u5e94\u503c\r\n\ud83c\udf89 \u652f\u6301\u53cd\u89e3\u6790cron\u8868\u8fbe\u5f0f\u5230UI\r\n\ud83c\udf89 \u53ef\u7ed3\u5408\u6b64\u7ec4\u4ef6\u4e0eAntd\u7684\u4e0b\u62c9\u53ca\u8f93\u5165\u7ec4\u4ef6\u5c01\u88c5\u6210\u4e0b\u62c9\u8f93\u5165\u6846\r\n\r\n\u663e\u793a\u6548\u679c\u4e5f\u662f\u4e00\u6837\u7684\uff1a\r\n\r\n![react cron\u7ec4\u4ef6\u6548\u679c\u56fe](/static/images/7.jpg)\r\n\r\n\u90a3\u4e3a\u4ec0\u4e48qnn-react-cron\u7684\u4f5c\u8005\u8981\u53bb\u6539\u7f16reract-cron-antd\u7ec4\u4ef6\u5462\uff1f\r\n\r\n\u56e0\u4e3areact-cron-antd\u4f5c\u8005\u957f\u65f6\u95f4\u672a\u66f4\u65b0\u7ec4\u4ef6\uff0c\u5bfc\u81f4\u7ec4\u4ef6\u65e0\u6cd5\u6b63\u5e38\u5f15\u7528\uff0cqnn-react-cron\u9664\u4e86\u4fee\u590d\u4e86\u4e0d\u80fd\u7ec4\u4ef6\u4e0d\u80fd\u4f7f\u7528\u7684\u95ee\u9898\u5916\uff0c\u5728\u539f\u57fa\u7840\u589e\u52a0\uff1agetCronFns\u3001footer \u5c5e\u6027\u4f7f\u7ec4\u4ef6\u66f4\u52a0\u7075\u6d3b\uff0c\u4fee\u6539 value \u503c\u4f20\u5165\u540e\u6216\u8005\u66f4\u65b0\u540e\u81ea\u52a8\u91cd\u65b0\u6e32\u67d3\u3002\r\n\r\ngithub\u4e0areact-cron-antd\u8fd8\u6709\u51e0\u4e2a\u5c1a\u672a\u89e3\u51b3\u7684issues:\r\n\r\n<img alt="react-cron-antd issues" src="/static/images/8.png" width="100%" />\r\n\r\n\r\n\u5c31\u5728\u6700\u8fd1\u51e0\u5929qnn-react-cron\u652f\u6301\u4e86\u591a\u8bed\u8a00\uff0c\u66f4Nice\u4e86\u3002\u6070\u597d\u6211\u4eec\u9879\u76ee\u9700\u8981\u652f\u6301\u591a\u8bed\u8a00\uff0c\u7b80\u76f4\u592a\u53ca\u65f6\uff01\uff01\r\n\r\n## qnn-react-cron \u5982\u4f55\u4f7f\u7528\r\n\r\n\u76f4\u63a5\u4e0a\u4ee3\u7801\uff1a\r\n\r\n```\r\nimport React from "react";\r\nimport Cron from "qnn-react-cron";\r\n\r\n// \u53ef\u4f7f\u7528 QnnReactCron.Provider \u914d\u7f6e\u56fd\u9645\u5316\u8bed\u8a00\r\n// \u65e0\u9700\u914d\u7f6e\u8bed\u8a00\u65f6\uff0c\u53ef\u4e0d\u4f7f\u7528  QnnReactCron.Provider\r\n// QnnReactCron.Provider \u5e94\u8be5\u5305\u88f9\u4e8e\u5165\u53e3\u7ec4\u4ef6\u4ee5\u5b9e\u73b0\u5168\u90e8\u8def\u7531\u4e0b\u7684\u7ec4\u4ef6\u5185\u90e8\u8bed\u8a00\u90fd\u88ab\u81ea\u5b9a\u4e49\r\n\r\nexport default ()=>{\r\n\r\n    // language \u4e3a\u53ef\u9009\u53c2\u6570\uff0c \u5177\u4f53\u914d\u7f6e\u5982\u4e0b\r\n    const language = {\r\n        \r\n        // \u9762\u677f\u6807\u9898\r\n        paneTitle:{\r\n            second: "\u79d2",\r\n            minute: "\u5206",\r\n            hour: "\u65f6",\r\n            day: "\u65e5",\r\n            month: "\u6708",\r\n            week: "\u5468",\r\n            year: "\u5e74",\r\n        },\r\n\r\n        // assign  \u6307\u5b9a\r\n        assign: "\u6307\u5b9a",\r\n        // Don\'t assign  \u4e0d\u6307\u5b9a\r\n        donTAssign: "\u4e0d\u6307\u5b9a",\r\n\r\n        // Every minute ...   \u6bcf\u4e00\u79d2\u949f\u3001\u6bcf\u4e00\u5206\u949f\r\n        everyTime: {\r\n            second: "\u6bcf\u4e00\u79d2\u949f",\r\n            minute: "\u6bcf\u4e00\u5206\u949f",\r\n            hour: "\u6bcf\u4e00\u5c0f\u65f6",\r\n            day: "\u6bcf\u4e00\u65e5",\r\n            month: "\u6bcf\u4e00\u6708",\r\n            week: "\u6bcf\u4e00\u5468",\r\n            year: "\u6bcf\u5e74",\r\n        },\r\n\r\n        // from [a] to [b] [unit], executed once [unit]    a \u5230 b \u6bcf\u4e00\u4e2a\u65f6\u95f4\u5355\u4f4d\u6267\u884c\u4e00\u6b21\r\n        aTob: {\r\n            second: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}-{BInput}\u79d2\uff0c\u6bcf\u79d2\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            minute: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}-{BInput}\u5206\uff0c\u6bcf\u5206\u949f\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            hour: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}-{BInput}\u65f6\uff0c\u6bcf\u5c0f\u65f6\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            day: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}-{BInput}\u65e5\uff0c\u6bcf\u65e5\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            month: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}-{BInput}\u6708\uff0c\u6bcf\u6708\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            week: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}-{BInput}\uff0c\u6bcf\u661f\u671f\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            year: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}-{BInput}\u5e74\uff0c\u6bcf\u5e74\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n        },\r\n\r\n        // from [a] [unit] start, every [b] Execute once [unit]   \u4ece a \u5f00\u59cb, \u6bcf\u4e00\u4e2a\u65f6\u95f4\u5355\u4f4d\u6267\u884c\u4e00\u6b21\r\n        aStartTob: {\r\n            second: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}\u79d2\u5f00\u59cb\uff0c\u6bcf{BInput}\u79d2\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            minute: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}\u5206\u5f00\u59cb\uff0c\u6bcf{BInput}\u5206\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            hour: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}\u65f6\u5f00\u59cb\uff0c\u6bcf{BInput}\u5c0f\u65f6\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            day: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}\u65e5\u5f00\u59cb\uff0c\u6bcf{BInput}\u65e5\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n            month: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}\u6708\u5f00\u59cb\uff0c\u6bcf{BInput}\u6708\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n\r\n            // [n] in the NTH week of this month    \u672c\u6708\u7b2c n \u5468\u7684 \u661f\u671f[n] \u6267\u884c\u4e00\u6b21\r\n            week: (AInput, BInput) => (\r\n                <span>\r\n                    \u672c\u6708\u7b2c{AInput}\u5468\u7684{BInput}\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n\r\n            // \u672c\u6708\u7684\u6700\u540e\u4e00\u4e2a \u661f\u671f[n] \u6267\u884c\u4e00\u6b21\r\n            week2: (AInput) => <span>\u6708\u7684\u6700\u540e\u4e00\u4e2a{AInput}\u6267\u884c\u4e00\u6b21</span>,\r\n\r\n            year: (AInput, BInput) => (\r\n                <span>\r\n                    \u4ece{AInput}\u5e74\u5f00\u59cb\uff0c\u6bcf{BInput}\u5e74\u6267\u884c\u4e00\u6b21\r\n                </span>\r\n            ),\r\n        }\r\n\t\t\t\t\t\t\r\n    };\r\n\r\n    return <QnnReactCron.Provider value={{language}}>\r\n            <Cron\r\n                value="* * * * * ? *"\r\n                \r\n                // \u672a\u81ea\u5b9a\u4e49\u5e95\u90e8\u6309\u94ae\u65f6\uff0c\u7528\u6237\u70b9\u51fb\u786e\u8ba4\u6309\u94ae\u540e\u7684\u56de\u8c03\r\n                onOk={(value) => {\r\n                    console.log("cron:", value);\r\n                }}\r\n\r\n                // \u76f8\u5f53\u4e8e ref\r\n                getCronFns={(fns) => {\r\n                    // \u83b7\u53d6\u503c\u65b9\u6cd5\r\n                    // fns.getValue: () => string\r\n\r\n                    // \u89e3\u6790Cron\u8868\u8fbe\u5f0f\u5230UI \u8c03\u7528\u8be5\u65b9\u6cd5\u624d\u53ef\u4ee5\u91cd\u65b0\u6e32\u67d3 \u3010\u4e00\u822c\u4e0d\u4f7f\u7528\u3011(value\u503c\u6539\u53d8\u540e\u7ec4\u4ef6\u4f1a\u81ea\u52a8\u66f4\u65b0\u6e32\u67d3)\r\n                    // fns.onParse: () => Promise().then(()=>void).catch(()=>()=>void),\r\n                    this.fns = fns;\r\n                }}\r\n\r\n                // \u81ea\u5b9a\u4e49\u5e95\u90e8\u6309\u94ae\u540e\u9700\u8981\u81ea\u884c\u8c03\u7528\u65b9\u6cd5\u6765\u6216\u8005\u503c\r\n                footer={\r\n                    [\r\n                        //\u9ed8\u8ba4\u503c\r\n                         <Button style={{ marginRight: 10 }} onClick={()=>this.fns.onParse}>\r\n                            \u89e3\u6790\u5230UI\r\n                         </Button>\r\n                        <Button type="primary"  onClick={()=>console.log(this.fns.getValue)}>\r\n                            \u751f\u6210\r\n                        </Button>\r\n                    ]\r\n                }\r\n            />\r\n    </QnnReactCron.Provider>\r\n}\r\n```\r\n\r\n\r\n\u6700\u540e\u9644\u4e0agithub\u5730\u5740\uff1a<a href="https://github.com/wangzongming/qnn-react-cron" rel="nofollow" >https://github.com/wangzongming/qnn-react-cron</a>\r\n\r\n\u7528\u8d77\u6765\u8fd8\u6709\u4e00\u4e2a\u5c0f\u7f3a\u61be\u5c31\u662f\u5728ts\u4e2d\u6ca1\u6709\u7c7b\u578b\u58f0\u660e\u6587\u4ef6\u53ef\u4ee5\u7528\uff0c\u6709\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u53bb\u641e\u4e00\u4e2a\u53d1\u5e03\u51fa\u6765\u3002'},MCLT:function(n,e,r){(function(n){var t=Object.getOwnPropertyDescriptors||function(n){for(var e=Object.keys(n),r={},t=0;t<e.length;t++)r[e[t]]=Object.getOwnPropertyDescriptor(n,e[t]);return r},o=/%[sdj%]/g;e.format=function(n){if(!E(n)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var t=arguments,i=t.length,a=String(n).replace(o,(function(n){if("%%"===n)return"%";if(r>=i)return n;switch(n){case"%s":return String(t[r++]);case"%d":return Number(t[r++]);case"%j":try{return JSON.stringify(t[r++])}catch(e){return"[Circular]"}default:return n}})),l=t[r];r<i;l=t[++r])w(l)||!_(l)?a+=" "+l:a+=" "+s(l);return a},e.deprecate=function(r,t){if("undefined"!==typeof n&&!0===n.noDeprecation)return r;if("undefined"===typeof n)return function(){return e.deprecate(r,t).apply(this,arguments)};var o=!1;function i(){if(!o){if(n.throwDeprecation)throw new Error(t);n.traceDeprecation?console.trace(t):console.error(t),o=!0}return r.apply(this,arguments)}return i};var i,a={};function s(n,r){var t={seen:[],stylize:c};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),y(r)?t.showHidden=r:r&&e._extend(t,r),T(t.showHidden)&&(t.showHidden=!1),T(t.depth)&&(t.depth=2),T(t.colors)&&(t.colors=!1),T(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=l),h(t,n,t.depth)}function l(n,e){var r=s.styles[e];return r?"\x1b["+s.colors[r][0]+"m"+n+"\x1b["+s.colors[r][1]+"m":n}function c(n,e){return n}function u(n){var e={};return n.forEach((function(n,r){e[n]=!0})),e}function h(n,r,t){if(n.customInspect&&r&&A(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(t,n);return E(o)||(o=h(n,o,t)),o}var i=d(n,r);if(i)return i;var a=Object.keys(r),s=u(a);if(n.showHidden&&(a=Object.getOwnPropertyNames(r)),j(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(r);if(0===a.length){if(A(r)){var l=r.name?": "+r.name:"";return n.stylize("[Function"+l+"]","special")}if(S(r))return n.stylize(RegExp.prototype.toString.call(r),"regexp");if(O(r))return n.stylize(Date.prototype.toString.call(r),"date");if(j(r))return p(r)}var c,y="",w=!1,v=["{","}"];if(b(r)&&(w=!0,v=["[","]"]),A(r)){var k=r.name?": "+r.name:"";y=" [Function"+k+"]"}return S(r)&&(y=" "+RegExp.prototype.toString.call(r)),O(r)&&(y=" "+Date.prototype.toUTCString.call(r)),j(r)&&(y=" "+p(r)),0!==a.length||w&&0!=r.length?t<0?S(r)?n.stylize(RegExp.prototype.toString.call(r),"regexp"):n.stylize("[Object]","special"):(n.seen.push(r),c=w?f(n,r,t,s,a):a.map((function(e){return m(n,r,t,s,e,w)})),n.seen.pop(),g(c,y,v)):v[0]+y+v[1]}function d(n,e){if(T(e))return n.stylize("undefined","undefined");if(E(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return n.stylize(r,"string")}return k(e)?n.stylize(""+e,"number"):y(e)?n.stylize(""+e,"boolean"):w(e)?n.stylize("null","null"):void 0}function p(n){return"["+Error.prototype.toString.call(n)+"]"}function f(n,e,r,t,o){for(var i=[],a=0,s=e.length;a<s;++a)M(e,String(a))?i.push(m(n,e,r,t,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(m(n,e,r,t,o,!0))})),i}function m(n,e,r,t,o,i){var a,s,l;if(l=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]},l.get?s=l.set?n.stylize("[Getter/Setter]","special"):n.stylize("[Getter]","special"):l.set&&(s=n.stylize("[Setter]","special")),M(t,o)||(a="["+o+"]"),s||(n.seen.indexOf(l.value)<0?(s=w(r)?h(n,l.value,null):h(n,l.value,r-1),s.indexOf("\n")>-1&&(s=i?s.split("\n").map((function(n){return"  "+n})).join("\n").substr(2):"\n"+s.split("\n").map((function(n){return"   "+n})).join("\n"))):s=n.stylize("[Circular]","special")),T(a)){if(i&&o.match(/^\d+$/))return s;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=n.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=n.stylize(a,"string"))}return a+": "+s}function g(n,e,r){var t=n.reduce((function(n,e){return e.indexOf("\n")>=0&&0,n+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return t>60?r[0]+(""===e?"":e+"\n ")+" "+n.join(",\n  ")+" "+r[1]:r[0]+e+" "+n.join(", ")+" "+r[1]}function b(n){return Array.isArray(n)}function y(n){return"boolean"===typeof n}function w(n){return null===n}function v(n){return null==n}function k(n){return"number"===typeof n}function E(n){return"string"===typeof n}function x(n){return"symbol"===typeof n}function T(n){return void 0===n}function S(n){return _(n)&&"[object RegExp]"===P(n)}function _(n){return"object"===typeof n&&null!==n}function O(n){return _(n)&&"[object Date]"===P(n)}function j(n){return _(n)&&("[object Error]"===P(n)||n instanceof Error)}function A(n){return"function"===typeof n}function I(n){return null===n||"boolean"===typeof n||"number"===typeof n||"string"===typeof n||"symbol"===typeof n||"undefined"===typeof n}function P(n){return Object.prototype.toString.call(n)}function C(n){return n<10?"0"+n.toString(10):n.toString(10)}e.debuglog=function(r){if(T(i)&&(i=Object({NODE_ENV:"production"}).NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var t=n.pid;a[r]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",r,t,n)}}else a[r]=function(){};return a[r]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=b,e.isBoolean=y,e.isNull=w,e.isNullOrUndefined=v,e.isNumber=k,e.isString=E,e.isSymbol=x,e.isUndefined=T,e.isRegExp=S,e.isObject=_,e.isDate=O,e.isError=j,e.isFunction=A,e.isPrimitive=I,e.isBuffer=r("1gqn");var R=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(){var n=new Date,e=[C(n.getHours()),C(n.getMinutes()),C(n.getSeconds())].join(":");return[n.getDate(),R[n.getMonth()],e].join(" ")}function M(n,e){return Object.prototype.hasOwnProperty.call(n,e)}e.log=function(){console.log("%s - %s",L(),e.format.apply(e,arguments))},e.inherits=r("KKCa"),e._extend=function(n,e){if(!e||!_(e))return n;var r=Object.keys(e),t=r.length;while(t--)n[r[t]]=e[r[t]];return n};var D="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function q(n,e){if(!n){var r=new Error("Promise was rejected with a falsy value");r.reason=n,n=r}return e(n)}function z(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],t=0;t<arguments.length;t++)r.push(arguments[t]);var o=r.pop();if("function"!==typeof o)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return o.apply(i,arguments)};e.apply(this,r).then((function(e){n.nextTick(a,null,e)}),(function(e){n.nextTick(q,e,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,t(e)),r}e.promisify=function(n){if("function"!==typeof n)throw new TypeError('The "original" argument must be of type Function');if(D&&n[D]){var e=n[D];if("function"!==typeof e)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,t=new Promise((function(n,t){e=n,r=t})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(n,t){n?r(n):e(t)}));try{n.apply(this,o)}catch(a){r(a)}return t}return Object.setPrototypeOf(e,Object.getPrototypeOf(n)),D&&Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,t(n))},e.promisify.custom=D,e.callbackify=z}).call(this,r("Q2Ig"))},MW4u:function(n,e,r){"use strict";r.r(e),e["default"]="# umi practice question set # React team open source a new performance analysis tool - Scheduling Profiler !\r\n\r\nRecently, the React team open sourced a new performance analysis tool -- Scheduling Profiler\r\n\r\n! [avatar](/static/images/schedulingProfiler.jpg)\r\n\r\nReact's previous Profiler mainly analyzed the performance of components while rendering. It didn't tell us what React was doing (the actual collaborative scheduling bit). As the React Scheduler has grown more powerful, it no longer meets our analysis needs, and the new Profiler can show when components schedule state updates and when React processes them. It can also show how React categorizes and prioritizes the content it works on.\r\n\r\nFor example, here is a simple application that uses only the old (synchronized) ReactDOM.renderAPI. The parser shows that all the work scheduled and rendered by this application is done with synchronous priority.\r\n\r\nIt uses the new createRoot API to render at the default priority, and then synchronously updates to respond to an input event to manage a controlled component:\r\n\r\nThis is part of the profile that shows the idle application (no JavaScript running). In this case, React does some pre-rendering for the offscreen (not currently displayed) component.\r\n\r\n**offscreen is a new API not yet released for React 18**\r\n\r\n## How transitions work\r\n\r\nstartTransition is a new API added to React 18 that allows you to distinguish between non-urgent state updates. All updates in the startTransition callback are considered non-urgent, and if there is a more urgent update (such as the user entering a new value), the above update is interrupted until there are no other urgent actions before continuing.\r\n\r\nHere's an example using the startTransition API: React renders a small update first, showing the user some visual feedback (e.g. Loading state)\r\n\r\n! [avatar](/static/images/1.jpg)\r\n\r\nHow does ## Suspense affect rendering performance?\r\n\r\nThe React team expects to release full support for fetching data via Suspense sometime after React 18.0, but you can now use Suspense to handle things like delayed loading of React components. The new parser shows how long components are paused during rendering and how this affects overall rendering performance.\r\n\r\nFor example, here's an example that uses React.lazy to load a component. While this component is loading, React displays a placeholder. Once the component finishes loading, React will retry rendering and commit the final UI.\r\n\r\n! [avatar](/static/images/3.jpg)\r\n\r\n## What else might cause rendering delays?\r\n\r\nSuspense can cause rendering delays as React waits for data to load, but React can also get stuck waiting for a lot of JavaScript to run.\r\n\r\nThe React parser tool used to focus only on analyzing what React (or a React component) was doing, but any JavaScript the browser is running can affect performance. The new parser also shows non-React JavaScript, so it's easy to see when it's delaying the rendering of React.\r\n\r\n! [avatar](/static/images/2.jpg)\r\n\r\n## Tips for improving performance\r\n\r\nThe old parser just focused on doing some analysis, but the new version of the tool can give us some optimization tips: !\r\n\r\n! [avatar](/static/images/5.jpg)\r\n\r\nAlso the new parser warns about scheduling long synchronous React updates in event handlers: !\r\n\r\n\r\n! [avatar](/static/images/4.jpg)\r\n\r\nDevelopment Environment.\r\numi: 3.5.18\r\nnode: v14.15.1\r\nSystem: windows\r\n\r\nThis article mainly records some scenario-specific issues during the project practice, for reference only: ## 1.\r\n\r\n## 1. webpackChain custom loader error: this.getOptions is not a function\r\n\r\n** Scenario:**\r\n    Add loader to parse makdown file to html display, use webpackChain to add remark-loader,html-loader to report error.\r\n```\r\nexport default {\r\n    ...\r\n    chainWebpack(config){\r\n        config.module\r\n        .rule('compile-md')\r\n        .test(/\\.md$/)\r\n            .use(\"html-loader\")\r\n            .loader(\"html-loader\")\r\n            .end()\r\n            .use(\"markdown-loader\")\r\n    }\r\n    ...\r\n}\r\n  \r\n```\r\n**Solution:**\r\n    Just close the webpack5 editor and modify the umi configuration config.js or .umirc.js to.\r\n```\r\nexport default {\r\n    ...\r\n    webpack5:false,\r\n    ...\r\n}\r\n```\r\n\r\n## 2. mfsu, @umijs/preset-ui(block) are not supported under SSR(server-side rendering)\r\n\r\n## 3. SSR (server-side rendering) after the first request, click on the navigation menu, the route switch occurs to jump to a new page did not launch a request to the server to get a new page, but a locally done page re-rendering.\r\n**Solution:**\r\nReplace the NavLink component with a tag\r\n\r\n## 4. SSR (Server Side Rendering) requests server Css and js files and returns html content.\r\n**Solution:**\r\nIf you configure hash:true, turn off the hash function of the packaged file, because umi.server.js does not add hash to the reference address of js and css, for example, your packaged file name is umi.adsjsnd.css, but the reference file name of umi.server.js to css is umi.css, Modify the configuration config.js or .umirc.js to\r\n```\r\nexport default {\r\n    ...\r\n    hash:false\r\n    ...\r\n}\r\n```\r\n If hash:true is not configured, refer to this issues:https://github.com/umijs/umi/issues/4808\r\n\r\n ## 5. Enable mfsu:{} error: 1. Can't read property 'ModuleFederationPlugin' of undefined.\r\n **Solution:**\r\n Please make sure mfsu:{} is added to config.ts instead of config.dev.ts or config.prod.ts."},MuUr:function(n,e,r){n.exports={content:"content___1G4Bw",back:"back___26SyS"}},O9bE:function(n,e,r){"use strict";r.r(e),e["default"]='# husky7 add hook\u547d\u4ee4\u4e0d\u8d77\u4f5c\u7528\u95ee\u9898\r\n\r\n## \u80cc\u666f\r\n\r\n\u5f00\u53d1\u73af\u5883\uff1agit 2.20.1.windows.1 + node v14.15.1 + npm v6.14.8 + win10 + husky v7.0.4 \r\n\r\n\u9879\u76ee\u9700\u8981\u914d\u7f6egit hook\uff0c\u5728commit\u4e4b\u524d\u6267\u884c\u4ee3\u7801\u6821\u9a8cESLint\uff0c\u89c4\u8303commit\u63d0\u4ea4\u65e5\u5fd7\u683c\u5f0f\u3002\u6211\u4eec\u4f7f\u7528husky\u6765\u914d\u7f6egit hook.\r\n\r\n## \u89e3\u51b3\u529e\u6cd5\r\n\r\n\u5347\u7ea7 npm \u5230v7\u7248\u672c\u6216\u66f4\u9ad8\u3002\r\n\r\n## \u8fc7\u7a0b\r\n\r\n\u53c2\u8003 husky \u6587\u6863\u6267\u884c\u547d\u4ee4\uff1a<a href="https://github.com/typicode/husky" rel="nofollow">husky github</a>\r\n\r\n```\r\n  npm install husky -D \r\n  npm set-script prepare "husky install"\r\n```\r\n\r\n\u5230\u8fd9\u4e00\u6b65\uff0cnpm set-script\u547d\u4ee4\u4e0d\u5b58\u5728\uff0c\u6240\u4ee5\u6211\u4eec\u624b\u52a8\u6267\u884c\u3002\r\n\r\n```\r\n  npx husky install\r\n  npx husky add .husky/commit-msg \'npx --no-install commitlint --edit "$1"\'\r\n```\r\n\r\nhusky add \u64cd\u4f5c\u4e0d\u8d77\u4f5c\u7528\uff0c\u63d0\u793a\u5982\u4e0b\uff1a\r\n\r\n```\r\nUsage:\r\n  husky install [dir] (default: .husky)\r\n  husky uninstall\r\n  husky set|add <file> [cmd]\r\n\r\n```\r\n\r\n\u7136\u540e\u53bbgithub issue\u53bb\u627e\u6709\u89e3\u51b3\u529e\u6cd5\u6ca1\u6709\uff0c\u6709\u4eba\u9047\u5230\u76f8\u540c\u7684\u95ee\u9898\uff1a\r\n<a href="https://github.com/typicode/husky/issues/1010" rel="nofollow">Can\'t add a hook</a>\r\n\r\n\u6709\u4eba\u63d0\u5230\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4:\r\n\r\n```\r\nnode node_modules/.bin/husky install ...\r\nnode node_modules/.bin/husky add ...\r\n\r\n```\r\n\r\n\u4f46\u662f\u6211\u8fd9\u91cc\u8fd8\u662f\u4e0d\u884c\uff0c\u8fd8\u662f\u6709\u62a5\u9519\uff1a\r\n\r\n```\r\nC:\\Users\\user\\projects\\project\\node_modules\\.bin\\husky:2\r\nbasedir=$(dirname "$(echo "$0" | sed -e \'s,\\\\,/,g\')")\r\n          ^^^^^^^\r\nSyntaxError: missing ) after argument list\r\n\r\n```\r\n\r\n\u6700\u540e\u8fd8\u662f\u5347\u7ea7 npm \u5230\u6700\u65b0\u7684 v8 \u624d\u641e\u5b9a'},P56z:function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-27 14:41:11\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2022-01-22 09:36:06\r\n * @FilePath: \\qianduan.shop\\front\\data\\blogs\\5.md\r\n--\x3e\r\n# NodeJs initiates https request with error: certificate has expired\r\n\r\nIn the course of a Node development project, it is likely that we will need to request an external address in order to call an external function interface or pull external data. Usually we use https to secure the communication process, here when we use NodeJs to initiate an https request it prompts: certificate has expired error.\r\n\r\n## How to solve\r\n1. The simple and brutal way, set the environment variables, add the following code to the top of your file.\r\n\r\n`process.env.NODE_TLS_REJECT_UNAUTHORIZED = \'0\';`\r\n\r\n**Note: This approach is problematic, and will make NodeJs not reject unauthenticated certificates**\r\n\r\n2. set **rejectUnauthorized** of request options to **false**, ignoring certificate security\r\n```\r\n  http.request(path,{\r\n    rejectUnauthorized:false\r\n  })\r\n```\r\n3. Export your certificate file (XXX.key and XXX.pem) to initiate a request specifying the certificate using the request destination address.\r\n```\r\nlet express = require("express");\r\nlet https = require("https");\r\nlet fs = require("fs");\r\n// configure\r\nconst httpsOption = {\r\n    key : fs.readFileSync(". /path/XXX.key"),\r\n    cert: fs.readFileSync(". /path/XXX.pem")\r\n}\r\nhttps.createServer(httpsOption, app).listen(443);\r\n```\r\n'},S9YV:function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-16 18:55:39\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-21 11:27:06\r\n * @FilePath: \\qianduan.shop\\data\\blogs\\32.md\r\n--\x3e\r\n# Doris \u542f\u52a8 BE \u62a5\u9519\uff1afile descriptors limit is too small\r\n\r\n\u6d4b\u8bd5\u73af\u5883\u542f\u52a8 BE \u5931\u8d25\uff0c\u63d0\u793a\u5982\u4e0b\uff1a\r\n\r\n```\r\nE1216 10:50:15.593854  9129 storage_engine.cpp:419] File descriptor number is less than 60000. Please use (ulimit -n) to set a value equal or greater than 60000\r\nW1216 10:50:15.593933  9129 storage_engine.cpp:181] check fd number failed, error: Internal error: file descriptors limit is too small\r\nW1216 10:50:15.593942  9129 storage_engine.cpp:103] open engine failed, error: Internal error: file descriptors limit is too small\r\nF1216 10:50:15.594342  9129 doris_main.cpp:199] fail to open StorageEngine, res=file descriptors limit is too small\r\n\r\n```\r\n\r\n## \u89e3\u51b3\u529e\u6cd5\r\n\r\n\r\n\u4fee\u6539 /etc/security/limits.conf, \u6267\u884c\u547d\u4ee4\uff1a\r\n\r\n```\r\necho "* soft nofile 204800" >> /etc/security/limits.conf\r\necho "* hard nofile 204800" >> /etc/security/limits.conf\r\necho "* soft nproc 204800" >> /etc/security/limits.conf\r\necho "* hard nproc 204800 " >> /etc/security/limits.conf\r\n```\r\n\r\n\u4fee\u6539 /etc/sysctl.conf, \u6267\u884c\u547d\u4ee4\uff1a\r\n\r\n```\r\necho fs.file-max = 6553560 >> /etc/sysctl.conf\r\n```\r\n \r\n\r\n\u91cd\u542fBE\u670d\u52a1\u5668\uff0c\u91cd\u542fBE\u8fdb\u7a0b\r\n\r\n\r\n**\u6ce8\uff1a\u6b64\u89e3\u51b3\u529e\u6cd5\u4e0d\u9002\u7528\u5728docker\u4e2d\u542f\u52a8\u7684BE**\uff0cdocker \u4e2d\u542f\u52a8\u7684 BE \u9047\u5230\u6b64\u95ee\u9898\uff0c \u4e0a\u9762\u7684\u65b9\u6cd5\u4e0d\u80fd\u89e3\u51b3\uff0c\u53ef\u53c2\u8003: <a href="https://www.cnblogs.com/JenningsMao/p/9209689.html" rel="nofollow" target="_blank">https://www.cnblogs.com/JenningsMao/p/9209689.html</a>\u3002'},Sd6e:function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-27 14:41:11\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2022-01-22 09:33:47\r\n * @FilePath: \\qianduan.shop\\front\\data\\blogs\\2.md\r\n--\x3e\r\n# react in the implementation of markdown file reading display\r\n\r\n \xa0 \xa0 Recently, I\'m doing a pure front-end blog, and I need to display the content of the markdown file on the page.\r\n\r\n## 1. Parse the file with webpack\'s remark-loader, other loaders can also be used (markdown-loader, etc.)\r\nThe webpack configuration is as follows.\r\n````\r\nmodule.exports = {\r\n  // ...\r\n  module: {\r\n    rules: [\r\n      {\r\n        test: /\\.md$/,\r\n        use: [\r\n          {\r\n            loader: "html-loader",\r\n          },\r\n          {\r\n            loader: "remark-loader",\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n  },\r\n};\r\n```\r\nyou can use import to introduce the md file in the code after configuration.\r\n\r\nNote: If you use ts, import md from "module.md" will indicate that the module is not recognized and you need to add the following type declaration.\r\n```\r\ndeclare module "*.md" {\r\n  const content: string;\r\n  export default content;\r\n}\r\n```\r\nThis will parse the md file normally.\r\n\r\nFor more details on remark-loader configuration, please see: https://webpack.js.org/loaders/remark-loader/#usage\r\n\r\n## 2. Converting file content to html\r\nMy requirement is to convert md to html, so the first step can only apply md content normally, but cannot display it directly, so we need to use the plugins of remark-loader to help us finish the conversion.\r\n```\r\nimport RemarkHTML from "remark-html";\r\n\r\nmodule.exports = {\r\n  // ...\r\n  module: {\r\n    rules: [\r\n      {\r\n        test: /\\.md$/,\r\n        use: [\r\n          {\r\n            loader: "html-loader",\r\n          },\r\n          {\r\n            loader: "remark-loader",\r\n            options: {\r\n              remarkOptions: {\r\n                plugins: [RemarkHTML],\r\n              },\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    ],\r\n  },\r\n};\r\n```\r\nThis way you can get the content string converted to html directly by import md form "module.md".\r\n\r\n## 3. Show in react\r\nThe code is as follows.\r\n```\r\nimport React from "react";\r\nimport styles from ". /detail.less";\r\nconst content = require(`. /block.md`);\r\n\r\nfunction BlogDetail (props:any) {\r\n  return <div className={styles.content}>\r\n    <article dangerouslySetInnerHTML={{ __html: content }}></article\r\n  </div>;\r\n}\r\n```\r\nexport default BlogDetail;\r\n\r\n## 4.Practical issues\r\n### 4.1 You need to turn off webpack5 when using webpackChain in umi, otherwise the loader will report an error: this.getOptions is not a function\r\n### 4.2 You don\'t have to use the loader to process the md file, you can also use a three-party library like marked to process the conversion\r\n\r\n\r\n**markdown and JSX mixed use reference\uff1a<a href="https://qianduan.shop/blogs/detail/25" target="_blank">Parsing React components in md files using MDX</a>**'},SrX3:function(n,e,r){"use strict";r.r(e),e["default"]="\x3c!--\r\n * @Date: 2021-12-27 14:41:11\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2022-01-22 09:37:32\r\n * @FilePath: \\qianduan.shop\\front\\data\\blogs\\8.md\r\n--\x3e\r\n# SEO series of search engine workflow\r\n\r\nAs the saying goes, if you know your enemy, you will win a hundred battles. In order to do a better job of SEO optimization, the home page we need to know the working principle of search engines, in order to target the development of optimization strategies. Basically, all the search engine workflow is the same: crawl the web, indexing, analysis, ranking exhibits.\r\n\r\nThis article only introduces the basic process of each link in the search engine to do the main thing, not to do the specific principle of the development of description, because each link involves a lot of details, each link can be a long story, an article is not possible to introduce the complete exhaustive. Further analysis of each link will follow.\r\n\r\n## The workflow of the browser\r\n\r\n## 1. Crawl the web\r\n\r\nSearch engines are used to crawl and access the pages of the program called spiders / crawlers (Spider) or robots (Robot), later referred to as crawlers.\r\n\r\nFor crawling to the web content, the search engine will have a variety of algorithms to filter the content analysis, filter out the spam content, filter out the quality of the page into the library indexing session.\r\n\r\nThis link will basically filter to most of the spam sites.\r\n\r\n### Automatic crawling\r\nThe crawler hangs out on the Internet every day and passes the crawled pages back to the search engine for subsequent operations.\r\n\r\n### Manual submission\r\nWe can also take the initiative to submit link addresses to search engines to shorten the cycle of crawlers finding our website. Search engines generally provide webmaster tools to provide this function.\r\n\r\n### Automatic code submission\r\n\r\nWe can write their own timing scripts through the search engine to provide the API to submit addresses on a regular basis, making full use of the search engine to provide a general inclusion quota to simplify the work. Baidu now for the active submission of the number of times per day included limit.\r\n\r\n## 2. Indexing\r\n\r\nThe quality of the web content will be saved, classification, quality of the site directly into the index library.\r\n\r\n## 3. Analysis\r\n\r\nAccording to certain rules for website scoring, the rules include but are not limited to website age, content relevance, content usefulness, website open speed, etc., to meet the standard will be included.\r\n\r\n## 4. Ranking\r\n\r\nThe web pages are ranked according to the scores obtained from the analysis, and the search results are displayed according to the ranking when users search for relevant content.\r\n\r\n\r\n"},"T+lz":function(n,e,r){"use strict";r.r(e);r("/zsF");var t=r("PArb"),o=(r("+BJd"),r("mr32")),i=r("MuUr"),a=r.n(i),s=r("TA4h"),l=r("q5Ws"),c=r("dfwb"),u=r("jdwX"),h=r("nKUr"),d=["geekblue","volcano","error","success","pink","red","yellow","orange","cyan","green","blue","purple","magenta","gold","lime","processing","warning"];function p(n){var e,i,p=n.match.params.id,f=s["a"].find((n=>n.id==p)),m=null===f||void 0===f||null===(e=f.tags)||void 0===e?void 0:e.map(((n,e)=>{var r=e%d.length;return Object(h["jsx"])(o["a"],{icon:"#",color:d[r],children:n},n)})),g=r("1hAn")("./".concat(p,".md")),b=f&&(null===(i=f.tags)||void 0===i?void 0:i.join(","));return Object(h["jsx"])(h["Fragment"],{children:Object(h["jsxs"])("div",{className:a.a.content,children:[Object(h["jsx"])(l["a"],{title:(null===f||void 0===f?void 0:f.title)||"",keywords:"".concat(b),description:"".concat(b,",").concat(null===f||void 0===f?void 0:f.description)}),Object(h["jsx"])("article",{dangerouslySetInnerHTML:{__html:u["markdown"].toHTML(g.default)}}),Object(h["jsx"])("div",{children:m}),Object(h["jsx"])(t["a"],{}),Object(h["jsx"])(t["a"],{}),Object(h["jsx"])(c["a"],{})]})})}e["default"]=p},TA4h:function(n,e,r){"use strict";e["a"]=[{id:10,title:"SEO series of onsite optimization",description:"Introducing SEO optimization and considerations in website content, typography, user experience, etc.",tags:["SEO"],date:"2021-10-12"},{id:9,title:"Prototypes and prototype chains, inheritance",description:"Prototype and prototype chain, inheritance, simple implementation.",tags:["js"],date:"2021-10-08"},{id:8,title:"SEO series of search engine working principle",description:"Understanding how search engines work.",tags:["SEO"],date:"2021-10-07"},{id:7,title:"SEO series of basic concepts",description:"What is SEO?what is SEO for us? where can SEO be used? what is black hat, white hat, gray hat, green hat SEO?",tags:["SEO"],date:"2021-10-05"},{id:6,title:"Mobile Adaptation Solutions",description:"Commonly used mobile adaptation solutions, including: media queries, rem layout, vw&vh",tags:["Mobile Adaptation","Layout"],date:"2021-09-28"},{id:5,title:"NodeJs initiates https request with error:certificate has expired",description:"The https request in egg prompted a certificate has expired error (certificate has expired) problem log",tags:["node","https"],date:"2021-09-26"},{id:4,title:"React team open source new performance analysis tool - Scheduling Profiler !",description:"Recently, the React team has open sourced a new performance analysis tool \u2014\u2014 Scheduling Profiler",tags:["react","Performance Analysis"],date:"2021-09-20"},{id:3,title:"umi practice questions summary - continuous update",description:"Summary of the problems encountered in the process of using umi",tags:["react","umi","Scaffolding"],date:"2021-09-19"},{id:2,title:"Read and display markdown files in react",description:"Read and display markdown files in react",tags:["react","markdown"],date:"2021-09-15"},{id:1,title:"login status -- cookies\u3001session\u3001token",description:"We all know that http is stateless, which means that the state cannot be maintained between the requester and the responder, it is all one-time, and he does not know what happened before the request. However, in some application scenarios, we need to maintain the status. For example, various background management systems need to log in to perform various operations. At this time, we need to maintain the user's login status.We all know that http is stateless, which means that the state cannot be maintained between the requester and the responder, it is all one-time, and he does not know what happened before the request. However, in some application scenarios, we need to maintain the status. For example, various background management systems need to log in to perform various operations. At this time, we need to maintain the user's login status.",tags:["login status","cookies","session","token"],date:"2021-09-13"}]},Tho3:function(n,e,r){"use strict";r.r(e),e["default"]='# mysql\u6dfb\u52a0\u7d22\u5f15\u540e\u5bfc\u81f4cpu\u98d9\u5347\u95ee\u9898\u8bb0\u5f55\r\n\r\n## \u80cc\u666f\r\n\r\n\u65b0\u52a0\u7684\u529f\u80fd\u67d0\u4e2a\u6570\u636e\u63a5\u53e3\u67e5\u8be2\u6162\uff0c\u7ecf\u6392\u67e5\u662f\u67e5\u8be2\u4e00\u4e2a\u7b2c\u4e09\u65b9\u7ed1\u5b9a\u6570\u636e\u8868\u6162\uff0c\u6240\u4ee5\u5411\u6570\u636e\u5e93\u6dfb\u52a0\u7d22\u5f15\u4ee5\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\uff0c\u4f46\u662f\u5728\u6dfb\u52a0\u540e\u670d\u52a1\u5668CPU\u76f4\u63a5\u4ece20+%\u76f4\u63a5\u98d9\u5347\u81f395+%,\u6570\u636e\u5e93\u8fde\u63a5\u6570\u4e5f\u98de\u6da8\uff0c\u7ed3\u679c\u5f53\u7136\u5c31\u4e0d\u7528\u8bf4\u4e86\uff0c\u76f4\u63a5\u5bfc\u81f4\u65e5\u5fd7\u5165\u5e93\u5931\u8d25\uff0c\u6570\u636e\u67e5\u8be2\u8d85\u65f6\uff0c\u5f71\u54cd\u73b0\u6709\u4e1a\u52a1\u3002\r\n\r\n## \u95ee\u9898\u6392\u67e5\r\n\r\n\u9996\u5148\u8003\u8651\u505a\u4e86\u4ec0\u4e48\u64cd\u4f5c\u5bfc\u81f4\u7684\u95ee\u9898\uff0c\u56e0\u4e3a\u95ee\u9898\u51fa\u73b0\u662f\u5728\u6dfb\u52a0\u7d22\u5f15\u540e\u51fa\u73b0\u7684\uff0c\u6240\u4ee5\u9996\u5148\u8003\u8651\u7684\u662f\u6dfb\u52a0\u7684\u7d22\u5f15\u6709\u95ee\u9898\uff0c\u7531\u4e8e\u540c\u65f6\u6dfb\u52a0\u4e86\u51e0\u4e2a\u7d22\u5f15\uff0c\u4e0d\u77e5\u9053\u662f\u54ea\u4e2a\u51fa\u4e86\u95ee\u9898\u3002 \r\n\r\n\u6211\u4eec\u5c1d\u8bd5\u5220\u9664\u6240\u6709\u65b0\u52a0\u7684\u7d22\u5f15\uff0c\u4f46\u662f\u670d\u52a1\u5668CPU\u62c9\u6ee1\u4e86\uff0c\u4efb\u4f55\u64cd\u4f5c\u90fd\u505a\u4e0d\u4e86\uff0c\u8fd9\u5c31\u5f88\u86cb\u75bc\u3002\r\n\r\n\u6211\u4eec\u7684\u6570\u636e\u5e93\u4f7f\u7528\u7684\u662fAWS\u7684RDS\uff0c\u5b83\u63d0\u4f9b\u4e86performace insight\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u67e5\u770bTop 10\u8017\u65f6\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u770b\u5230\u65b0\u6dfb\u52a0\u7d22\u5f15\u7684\u8868\u67e5\u8be2\u975e\u5e38\u6162\uff0c\u5927\u91cfsql\u8bed\u53e5\u7b49\u5f85\u6267\u884c\u3002 \r\n\r\n\u73b0\u5728\u60f3\u8ba9mysql\u80fd\u591f\u6267\u884c\u6211\u4eec\u7684\u5220\u9664\u7d22\u5f15\u7684\u547d\u4ee4\uff0c\u6240\u4ee5\u6211\u4eec\u5c1d\u8bd5\u4e34\u65f6\u5347\u7ea7mysql\u7684\u914d\u7f6e\uff0c\u4f46\u662f\u6ca1\u6709\u4ec0\u4e48\u7528\uff0c\u5347\u7ea7\u540eCPU\u4e5f\u662f\u76f4\u63a595+%\uff0c\u8fd8\u662f\u65e0\u6cd5\u6267\u884c\u5220\u9664\u7d22\u5f15\u64cd\u4f5c\u3002\r\n\r\n\u6700\u540e\u65e0\u5948\uff0c\u53ea\u80fd\u5c06\u6162\u67e5\u8be2\u6240\u5728\u7684\u4e1a\u52a1\u63a5\u53e3\u6682\u65f6\u505c\u6389\uff08**\u6ce8\uff1a\u6211\u4eec\u8fd9\u91cc\u7684\u670d\u52a1\u5668\u4e3b\u8981\u662f\u65e5\u5fd7\u8bb0\u5f55\uff0c\u6240\u4ee5\u7efc\u5408\u8003\u91cf\u6682\u65f6\u505c\u4e00\u4e0b\u5f71\u54cd\u4e0d\u5927**\uff09\uff0c \u7b49CPU\u964d\u4e0b\u6765\u540e\uff0c\u6267\u884c\u7d22\u5f15\u5220\u9664\u64cd\u4f5c\uff0c\u6062\u590d\u51fa\u95ee\u9898\u4e4b\u524d\u7684\u72b6\u6001\u3002\r\n\r\n## \u7d22\u5f15\u7684\u95ee\u9898\r\n\r\n\u56de\u8fc7\u5934\u6765\u518d\u770b\u7d22\u5f15\u7684\u95ee\u9898\uff0c\u6dfb\u52a0\u7684\u51e0\u4e2a\u7d22\u5f15\u4e2d\uff0c\u6709\u4e00\u4e2a\u7d22\u5f15\u5176\u5b9e\u662f\u6709\u95ee\u9898\u7684\uff0c\u95ee\u9898\u7d22\u5f15\u7684\u6570\u636e\u503c\u5206\u5e03\u5f88\u5c11\uff0c\u8fd9\u6837\u7684\u7d22\u5f15\u8fc7\u6ee4\u884c\u5f88\u5dee\uff0c\u8fd9\u6837\u7684\u7d22\u5f15\u5c31\u5f88\u5bb9\u6613\u5f15\u8d77CPU\u98d9\u5347\u3002\r\n\r\n\u5177\u4f53\u7684\u5206\u6790\u53ef\u53c2\u8003\uff1a<a href="http://mysql.taobao.org/monthly/2015/10/03" rel="nofollow" target="_blank">http://mysql.taobao.org/monthly/2015/10/03</a> ,\u8fd9\u91cc\u4e0d\u505a\u8be6\u7ec6\u9610\u8ff0\u3002\r\n\r\n## \u603b\u7ed3\r\n\r\n1.\u5408\u7406\u7684\u4f7f\u7528\u7d22\u5f15\r\n\r\n2.\u5bf9\u751f\u4ea7\u73af\u5883\u7684\u64cd\u4f5c\u4e00\u5b9a\u8981\u7ecf\u8fc7\u538b\u6d4b\uff0c\u8fd9\u91cc\u6211\u4eec\u5c31\u53ea\u662f\u5728\u6d4b\u8bd5\u73af\u5883\u6dfb\u52a0\u540e\u6ca1\u6709\u51fa\u73b0\u95ee\u9898\u5c31\u76f4\u63a5\u4e0a\u751f\u4ea7\u73af\u5883\uff0c\u8fd9\u4e2a\u6d41\u7a0b\u5c31\u51fa\u73b0\u4e86\u95ee\u9898\u3002'},UJWk:function(n,e,r){"use strict";r.r(e),e["default"]="# nodejs PM2 \u5ef6\u65f6\u9000\u51fa\r\n\r\n\u5728\u65e5\u5e38\u5f00\u53d1\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u7ecf\u5e38\u4f1a\u7528\u5230 pm2 \u6765\u8d77\u5230\u670d\u52a1\uff0c\u751a\u81f3\u4f1a\u7528 watch \u6765\u5b9e\u73b0\u70ed\u66f4\u65b0\u3002\r\n\r\n\u4f46\u4e0a\u9762\u8fd9\u79cd\u6a21\u5f0f\u5e76\u4e0d\u9002\u5408\u7528\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u56e0\u4e3a pm2 \u96f6\u5ef6\u65f6\u91cd\u542f\uff0c\u4f1a\u5bfc\u81f4\u6b63\u5728\u5904\u7406\u7684\u8bf7\u6c42\u76f4\u63a5\u88ab\u9500\u6bc1\uff0c\u5982\u679c\u6570\u636e\u5e93\u6ca1\u52a0\u4e8b\u52a1\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6570\u636e\u5e93\u7684\u6570\u636e\u4e0d\u5b8c\u6574\u3002\r\n\r\n\u5904\u7406\u65b9\u6cd5\u662f\u5ef6\u65f6 kill\uff0c\u53c2\u6570\u662f--kill-timeout\u3002\r\n\r\n\u5728\u542f\u52a8\u7684app.js\u4e2d\u6dfb\u52a0 SIGINT \u7684\u76d1\u542c\uff0c\u5e76\u5728\u56de\u8c03\u4e2d\u7528\u5269\u4f59\u7684timeout\u65f6\u95f4\u5904\u7406\u6570\u636e\u3002\r\n\r\n```\r\nprocess.on('SIGINT', function() {\r\n   db.stop(function(error) {\r\n     process.exit(error ? 1 : 0)\r\n   })\r\n})\r\n```\r\n\r\n\u542f\u52a8\u65b9\u5f0f\u5982\u4e0b\uff1a\r\n```\r\npm2 start app.js --kill-timeout 3000\r\n```\r\n\r\n\u91cd\u8f7d\u5c31\u4f1a\u89e6\u53d1\u3002\r\n\r\n```\r\npm2 reload\r\n```\r\n\r\n## \u5b9e\u9645\u95ee\u9898\r\n\r\n\u4e00\u822c\u4f7f\u7528 pm2\uff0c\u6211\u4eec\u662f\u5e0c\u671b pm2 \u7ed9\u6211\u4eec\u63d0\u4f9b\u8d1f\u8f7d\u5747\u8861\uff0c\u6bcf\u6b21 pull \u597d\u4ee3\u7801\uff0creload \u4e00\u4e0b\u5c31\u80fd\u5347\u7ea7\u5230\u6700\u65b0\u7684\u670d\u52a1\uff0c\u800c\u4e0d\u9700\u8981\u4ece Nginx \u4e0a\u4e0b\u624b\u3002\u4f46\u662f\u9ed8\u8ba4\u60c5\u51b5\u4e0b pm2 \u76f4\u63a5\u91cd\u542f\u4f1a\u5bfc\u81f4\u6b63\u5728\u5904\u7406\u7684\u8bf7\u6c42\u4e22\u5931\u3002\u6240\u4ee5\u6211\u4eec\u5e0c\u671b PM2 \u5728\u91cd\u542f\u524d\uff0c\u53ef\u4ee5\u5148\u901a\u77e5 App\uff0c\u5e76\u7ed9\u8db3\u591f\u7684\u65f6\u95f4\u8ba9 App \u5904\u7406\u5b8c\u6b63\u5728\u5904\u7406\u7684\u8bf7\u6c42\uff0c\u5e76\u4e14\u4e0d\u518d\u63a5\u6536\u65b0\u7684\u8bf7\u6c42\uff0c\u7136\u540e\u518d\u91cd\u542f\u670d\u52a1\u3002\r\n\r\n\u6211\u4eec\u53ef\u4ee5\u628a\u4e0a\u9762\u7684\u4f8b\u5b50\u6539\u6210\u8fd9\u6837\u3002\r\n```\r\nprocess.on('SIGINT', function() {\r\n    global.app.running = false;\r\n    db.stop(function(err) {\r\n        process.exit(err ? 1 : 0)\r\n   })\r\n})\r\n```\r\n\r\nglobal.app.running \u4e3a\u6574\u4e2a\u670d\u52a1\u7684\u5168\u5c40\u53d8\u91cf\uff0c\u53ea\u8981\u670d\u52a1\u542f\u52a8\u5c31\u8d4b\u503c\u4e3atrue\uff0c\u5e76\u4e14\u5728\u6240\u6709\u8def\u7531\u62e6\u622a\u5668\u4e2d\u589e\u52a0\u5224\u65ad\u903b\u8f91\uff1a\u53ea\u8981true\u65f6\u624d\u63a5\u6536\u8bf7\u6c42\uff0c\u8fd9\u6837\u5c31\u80fd\u4fdd\u8bc1\u5f53global.app.running\u4e3afalse\u65f6\uff0c\u6b63\u5728\u5904\u7406\u7684\u8bf7\u6c42\u4e0d\u4f1a\u88ab\u9500\u6bc1\uff0c\u6240\u6709\u540e\u6765\u8fdb\u5165\u7684\u8bf7\u6c42\u90fd\u5931\u8d25\uff0c\u4ece\u800c\u4fdd\u8bc1\u6570\u636e\u5e93\u5b8c\u6574\u6027\u3002\r\n\r\n\u4f46\u662f\u8fd9\u79cd\u62e6\u622a\u65b9\u5f0f\u592a\u8fc7\u4e8e\u7c97\u66b4\uff0c\u53ea\u662f\u4fdd\u8bc1\u6570\u636e\u5e93\u5b8c\u6574\uff0c\u4f46\u662f\u4f9d\u7136\u8fbe\u4e0d\u5230\u5e73\u6ed1\uff0c\u5e73\u6ed1\u5347\u7ea7\u8fd8\u6709\u5f88\u591a\u8def\u8981\u8d70\u3002\r\n\r\n\r\n## \u53c2\u8003\u94fe\u63a5\r\n[Graceful Stop](https://pm2.keymetrics.io/docs/usage/signals-clean-restart/)"},UgUT:function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-27 14:41:11\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2022-01-22 09:36:28\r\n * @FilePath: \\qianduan.shop\\front\\data\\blogs\\6.md\r\n--\x3e\r\n# Mobile Adaptation Solutions\r\n  Before reading, we hope you have some understanding of the basic concepts, such as hardware concepts: screen size, screen resolution, device pixels, pixel density; system concepts: display resolution, device independent pixels, logical resolution; browser concepts: device pixel ratio, viewport. If you do not understand these basic concepts, you can first read: [Mobile adaptation basic concepts](https://juejin.cn/post/6959047144065990663)  \r\n  \r\n## 1. Media queries, responsive layout\r\n  css provides @media media query to set different styles, according to different flat layout different styles, so as to achieve the purpose of different screen adaptations.  \r\n\r\n### Load different style files for different screens\r\n```\r\n<link media="(max-width: 600px)" href=". /path/mobile.css" rel="stylesheet" />\r\n<link media="(min-width: 980px)" href=". /path/pc.css" rel="stylesheet"/>\r\n```  \r\n\r\n### Media queries in CSS style sheets\r\n```\r\n@media screen and (max-width:1024px){\r\n  div{\r\n    font-size: 64px;\r\n  }\r\n}\r\n@media screen and (max-width: 400px){\r\n  div{\r\n    font-size: 58px;\r\n  }\r\n}\r\n```  \r\n\r\nMedia query syntax rules and more examples refer to: https://www.runoob.com/cssref/css3-pr-mediaquery.html  \r\n\r\n\r\n## 2. Dynamic rem\r\nrem is a relative length unit in css, and its size is determined by the font size of the root element (html).  \r\n\r\nFor different screens, we can dynamically modify the font size of the root element, and the size of the elements in the page will also change in the same proportion, so as to achieve the adaptation effect.  \r\n\r\nIn actual development, we can use tools to help us convert px to rem, such as [postcss-px2rem](https://www.npmjs.com/package/postcss-px2rem), so that we can write px directly according to the design.\r\n\r\nOf course, the layout using rem problem has been solved, so how to achieve the text font size adaptation? Is it also with rem? The answer is NO!,** text font size is not recommended to use rem**.\r\nFor example: we want to see the same text size under the Retina screen of iPhone3G and iPhone4. In other words, we don\'t want the text to be smaller under Retina screen, besides, we want to see more text on the big screen phone, and, nowadays, most of the font files come with some dot sizes, usually 16px and 24px, so we don\'t want to have odd sizes like 13px and 15px. In this way, it is decided that rem is not suitable for paragraph text in the production of H5 pages.\r\n\r\n**Summary**\r\n1. meta tags set the viewport width to the screen width.\r\n2. modify the font-size of the root element (html) for different screens, usually set it to one-tenth of the screen width (introduce the lib-flexible library or write your own logic).\r\n3. configure the development environment with postcss-px2rem or similar plugins.\r\n4. write the style according to the design, and take the width and height of the element directly from the design, in px, which will be converted to rem by the plugin.\r\n5. paragraph text is also written in accordance with the design, the unit is px, no need to convert to rem.\r\n\r\n\r\n# # 3. viewport units: vw, vh, vmin, vmax\r\nThe viewport units are: vw, vh, vmin and vmax. vw unit indicates the percentage of the width of the root element, 1vw is equal to 1% of the viewport width.\r\n\r\n### The flow of vw adaptation scheme.\r\n\r\n1. the meta tag sets the viewport width to the screen width.\r\n2. development environment configured with postcss-px-to-viewport or similar plugin.\r\n3. according to the design to write the style, element width and height directly from the design width and height, the unit is px, the plug-in will be converted to vw.\r\n4. paragraph text is also written in accordance with the design, the unit is px, no need to convert to vw.\r\n\r\n## 4. Fixed viewport width, the overall scaling of the page\r\n```\r\n<meta name="viewport" content="width=device-width, user-scalable=no" />\r\n```\r\n\r\nThis solution is actually equivalent to scaling the page as a whole. It is essentially a linear scaling of the page to fit different screen sizes. This scheme is fine for devices within a certain size range. This solution is simple and convenient, but not very suitable if you want to develop an interface that spans both tablets and phones. Because the difference between mobile and tablet screen sizes is too large, it will result in too much scaling and interface elements appearing less harmonious. This solution is suitable for some simple activity pages, or pages that do not require high page adaptation.\r\n\r\n'},"YZ5/":function(n,e,r){"use strict";r.r(e),e["default"]="# Node\u5b9a\u65f6\u4efb\u52a1\u600e\u4e48\u505a\r\n\r\n## \u80cc\u666f \r\n\r\n\u76ee\u524d\u6211\u4eec\u9047\u5230\u4e86\u8fd9\u6837\u4e00\u4e2a\u9700\u6c42\uff0c\u6bcf\u4e2a\u7528\u6237\u90fd\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5b9a\u65f6\u63a8\u9001\uff0c\u5b9a\u65f6\u4efb\u52a1\u7684\u65f6\u95f4\u914d\u7f6e\u7531\u7528\u6237\u81ea\u5df1\u914d\u7f6e\uff0c\u968f\u65f6\u4fee\u6539\uff0c\u800c\u4e0d\u662f\u4f20\u7edf\u7684\u7531\u670d\u52a1\u5668\u8bbe\u5b9a\u597d\u65f6\u95f4\u8dd1\u5b9a\u65f6\u4efb\u52a1\u3002\r\n\r\n\u5982\u679c\u662f\u5df2\u77e5\u5b9a\u65f6\u4efb\u52a1\u5faa\u73af\u5468\u671f\uff0c\u90a3\u4e48Linux Crontab \u5b9a\u65f6\u4efb\u52a1\u5373\u53ef\u5b9e\u73b0\u3002\u5728node\u4e2d\u4e5f\u5df2\u7ecf\u6709\u76f8\u5bf9\u6210\u719f\u7684\u65b9\u6848\u3002\u4e0b\u9762\u5c06\u6211\u81ea\u5df1\u4e86\u89e3\u5230\u7684Node\u5b9a\u65f6\u4efb\u52a1\u65b9\u6848\u65b9\u6848\u505a\u4e00\u4e2a\u4ecb\u7ecd\u3002\r\n\r\n## egg\u6846\u67b6\u63d0\u4f9b\u7684schduler\u5b9a\u65f6\u4efb\u52a1\r\n\r\negg\u662f\u963f\u91cc\u65d7\u4e0b\u7684Node\u4f01\u4e1a\u7ea7\u5e94\u7528\u6846\u67b6\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u5957\u673a\u5236\u7ed9\u5f00\u53d1\u8005\u4f18\u96c5\u7684\u7f16\u5199\u5b9a\u65f6\u4efb\u52a1\uff0c\u8be6\u7ec6\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff1a<a rel=\"nofollow\">https://eggjs.org/zh-cn/basics/schedule.html</a> \uff0c\u8fd9\u91cc\u4e0d\u5bf9\u5177\u4f53\u7528\u6cd5\u505a\u8be6\u7ec6\u9610\u8ff0\uff0c\u53ea\u7b80\u5355\u8bb2\u4e00\u4e0b\u5b83\u7684\u914d\u7f6e\u7528\u6cd5\u3002\r\n\r\n1.\u9759\u6001\u5b9a\u65f6\u4efb\u52a1\uff0c\u5373\u5b9a\u65f6\u5468\u671f\uff0c\u5904\u7406\u903b\u8f91\u5199\u6b7b\u3002\r\n\r\n2.\u52a8\u6001\u914d\u7f6e\u5b9a\u65f6\u4efb\u52a1\uff0c\u8fd9\u79cd\u76f8\u5bf9\u6765\u8bf4\u7075\u6d3b\u4e00\u70b9\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u63a7\u5236\u5b9a\u65f6\u4efb\u52a1\u5468\u671f\u3002\r\n\r\n3.\u901a\u8fc7\u4ee3\u7801\u624b\u52a8\u89e6\u53d1\u5b9a\u65f6\u4efb\u52a1\uff0c\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u4e00\u4e9b\u903b\u8f91\u5224\u65ad\u662f\u5426\u89e6\u53d1\u5b9a\u65f6\u4efb\u52a1\u3002\r\n\r\n\u4ece\u4e0a\u8ff0\u4e09\u70b9\u770b\uff0cegg\u63d0\u4f9b\u7684\u5b9a\u65f6\u4efb\u52a1\u4e0d\u80fd\u6ee1\u8db3\u6211\u4eec\u9700\u8981\u7528\u6237\u81ea\u884c\u914d\u7f6e\u5b9a\u65f6\u5468\u671f\u7684\u9700\u6c42\uff0c\u6240\u4ee5\u53ea\u80fd\u5bfb\u6c42\u5176\u4ed6\u65b9\u6848\uff0c\u901a\u8fc7\u67e5\u8be2\u8d44\u6599\u6211\u4eec\u53d1\u73b0\u4e86node-schedule\u7684\u5e93\u4e5f\u63d0\u4f9b\u4e86\u5b9a\u65f6\u4efb\u52a1\u7684\u529f\u80fd\u3002\r\n\r\n## node-schedule\r\n\r\n\u5728\u6d4f\u89c8\u4e86node-schudule\u7684\u6587\u6863 <a rel=\"nofollow\">https://www.npmjs.com/package/node-schedule</a> \u4e4b\u540e\uff0c\u4ed6\u7684\u7528\u6cd5\u5982\u4e0b:\r\n\r\n```\r\n\r\nconst schedule = require('node-schedule');\r\n\r\nconst job = schedule.scheduleJob('42 * * * *', function(){\r\n  console.log('The answer to life, the universe, and everything!');\r\n});\r\n\r\n```\r\n\u662f\u7684\uff0c\u4ed6\u652f\u6301\u81ea\u5b9a\u4e49\u5b9a\u65f6\u5468\u671f\uff0c\u53ef\u4ee5\u6ee1\u8db3\u6211\u4eec\u7684\u9700\u6c42\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u6211\u4eec\u7684\u9009\u62e9\uff0cNice!\r\n\r\n\u7ee7\u7eed\u6d4f\u89c8\u5176\u4ed6\u5f00\u53d1\u8005\u7684\u4f7f\u7528\u6587\u7ae0\uff0c\u53d1\u73b0\u6709\u4e00\u4e2anode-schedule\u7684\u76f8\u5173\u95ee\u9898\u8bb0\u5f55\uff0c\u7b80\u8981\u8bf4\u5c31\u662f\u5b9a\u65f6\u5668\u5728\u9884\u5b9a\u65f6\u95f4\u6267\u884c\u4e862\u6b21\uff0c\u5177\u4f53\u95ee\u9898\u89c1\u539f\u6587\uff1a<a rel=\"nofollow\">https://cnodejs.org/topic/5b58414b8d66b90b2b7384a7</a> \u3002\u8fd9\u662f\u4e00\u4e2a\u4f4e\u6982\u7387\u7684\u95ee\u9898\uff0c\u6211\u4eec\u6ca1\u6709\u53bb\u505a\u9a8c\u8bc1\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u9700\u6c42\uff0c\u53ca\u65f6\u5b9a\u65f6\u5668\u6267\u884c\u4e24\u6b21\uff0c\u5bf9\u6211\u4eec\u7684\u7ed3\u679c\u5e76\u6ca1\u6709\u5f71\u54cd\uff0c\u6240\u4ee5\u8fd9\u4e0d\u662f\u963b\u788d\u6211\u4eec\u4f7f\u7528\u5b83\u7684\u969c\u788d\uff0c\u6709\u5174\u8da3\u7684\u540c\u5b66\u53ef\u4ee5\u53bb\u6d4b\u6d4bbug\u3002\r\n\r\n\r\n## \u5199\u5728\u6700\u540e\r\n\r\n\u6700\u540e\u8fd9\u91cc\u662f\u5bf9\u6211\u4eec\u81ea\u5df1\u9879\u76ee\u5b9a\u65f6\u5b9a\u65f6\u4efb\u52a1\u89e3\u51b3\u65b9\u6848\u7684\u603b\u7ed3\uff0c\u4e0d\u611f\u5174\u8da3\u7684\u540c\u5b66\u53ef\u7565\u8fc7\u3002\r\n\r\n\u6211\u4eec\u7684\u540e\u7aef\u5c31\u662f\u7528\u7684egg\u6846\u67b6\uff0c\u6240\u4ee5\u6700\u540e\u6211\u4eec\u7684\u89e3\u51b3\u65b9\u6848\u662f\u5728agent\u8fdb\u7a0b\u4e2d\u52a0\u4e86node-schdule\u7684\u5b9a\u65f6\u5668\uff0c\u7528\u6237\u7684\u5b9a\u65f6\u5668\u90fd\u4f1a\u540c\u6b65\u7684agent\u8fdb\u7a0b\u4e2d\u6267\u884c\uff0c\u76ee\u524d\u6211\u4eec\u7684\u7528\u6237\u91cf\u4e0d\u5927\uff0c\u6682\u65f6\u53ea\u60f3\u5230\u4e86\u8fd9\u79cd\u89e3\u51b3\u65b9\u5f0f\uff0c\u540e\u7eed\u8d77\u91cf\u540e\u53ef\u80fd\u4f1a\u5206\u5e03\u5f0f\u90e8\u7f72\u540e\u53f0\uff0c\u8fd9\u4f1a\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u91cf\u5927\u7684\u8bdd\u5355\u8fdb\u7a0b\u8dd1\u4e5f\u4f1a\u662f\u4e00\u4e2a\u95ee\u9898\uff0c\u5e76\u4e14egg\u672c\u8eab\u4e0d\u5efa\u8bae\u5728agent\u8fdb\u7a0b\u4e2d\u505a\u592a\u591a\u4e1a\u52a1\u76f8\u5173\u7684\u4e1c\u897f\u3002\u8fd8\u6709\u4e2a\u6bd4\u8f83\u91cd\u8981\u7684\u662fagent\u662f\u8f85\u52a9\u8fdb\u7a0b\uff0c\u4e00\u4e9bwork\u7684\u516c\u5171\u5de5\u4f5c\u5b9e\u5728agent\u4e2d\u5b8c\u6210\u7684\uff0cagent\u53d1\u751f\u672a\u6355\u83b7\u7684\u9519\u8bef\u4e0d\u4f1a\u9000\u51fa\u91cd\u542f\uff0c\u6240\u4ee5\u5bb9\u9519\u5904\u7406\u5fc5\u987b\u8981\u505a\uff0c\u800c\u4e14\u8981\u505a\u597d\u3002\r\n\r\n\u5982\u679c\u4f60\u6709\u66f4\u597d\u7684\u65b9\u6848\uff0c\u6b22\u8fce [\u7559\u8a00](https://qianduan.shop/aboutUs) \u544a\u8bc9\u6211\u4eec\u3002"},ZQeU:function(n,e,r){"use strict";r.r(e),e["default"]="\x3c!--\r\n * @Date: 2021-12-14 10:59:08\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-15 16:23:45\r\n * @FilePath: \\qianduan.shop\\data\\blogs\\29.md\r\n--\x3e\r\n# Doris \u90e8\u7f72\u542f\u52a8 FE \u62a5\u9519\uff1athe self host 172.31.26.7 does not equal to the host in ROLE file 172.17.0.1. You need to set 'priority_networks' config in fe.conf to match the host 172.17.0.1\r\n\r\n\u62a5\u9519\u4fe1\u606f\u5982\u4e0b\uff1a\r\n\r\n```\r\njava.io.IOException: the self host 172.31.26.7 does not equal to the host in ROLE file 172.17.0.1. You need to set 'priority_networks' config in fe.conf to match the host 172.17.0.1\r\n\tat org.apache.doris.catalog.Catalog.getClusterIdAndRole(Catalog.java:903)\r\n\tat org.apache.doris.catalog.Catalog.initialize(Catalog.java:805)\r\n\tat org.apache.doris.PaloFe.start(PaloFe.java:125)\r\n\tat org.apache.doris.PaloFe.main(PaloFe.java:63)\r\n\r\n```\r\n\r\n\u6839\u636e\u9519\u8bef\u63d0\u793a\u4fee\u6539 fe.conf \u4e2d\u7684 priority_networks \u914d\u7f6e\u7ed1\u5b9a\u5185\u7f51IP,\u91cd\u542f\u4e5f\u4e0d\u8d77\u4f5c\u7528\u3002\r\n## \u89e3\u51b3\u529e\u6cd5\r\n\r\n\u5220\u9664 doris-meta\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u76ee\u5f55\u53ca\u6587\u4ef6\uff0c\u4fee\u6539 fe.conf \u91cc\u9762\u7684 priority_networks,\u91cd\u542f\u5373\u53ef\u89e3\u51b3\u3002\r\n"},bUk7:function(n,e,r){"use strict";r.r(e),e["default"]="# umi SSR \u6253\u5305\u914d\u7f6e\u4f18\u5316\r\n\r\n\u6211\u8fd9\u91cc\u6709 SEO \u7684\u9700\u6c42\uff0c\u6240\u4ee5\u9700\u8981\u505a SSR ,\u672c\u6587\u4e3b\u8981\u8bb0\u5f55 umi ssr(\u670d\u52a1\u7aef\u6e32\u67d3)\u914d\u7f6e\u5982\u4f55\u4f18\u5316\uff0c\u4ec5\u8bb0\u5f55\u672c\u4eba\u5b9e\u8df5\u8fc7\u7a0b\u4e2d\u6240\u7528\u5230\u7684\u914d\u7f6e\u4f18\u5316\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002\r\n\r\n## \u5f00\u53d1\u73af\u5883\r\n\r\nwin 10 + React 17 + umi 3.5.18 + node 14.15.1\r\n\r\n## \u5982\u4f55\u67e5\u770b\u6253\u5305\u540e\u5305\u4f53\u5927\u5c0f\u53ca\u5404\u4f9d\u8d56\u5927\u5c0f\r\n\r\npackage.json \u4e2d\u914d\u7f6e\u547d\u4ee4\r\n```\r\nscripts:{\r\n    ...\r\n    \"analyze\": \"cross-env UMI_ENV=prod ANALYZE=1 umi build\"\r\n    ...\r\n}\r\n```\r\n\u6267\u884c npm run annalyze \u5c31\u4f1a\u8f93\u51fa\u5305\u5206\u6790\u7ed3\u679c\u3002\r\n\r\n## umi \u914d\u7f6e(.umirc.ts \u6216\u8005 config.ts)\r\n\r\n### 1. \u5f00\u542f\u670d\u52a1\u7aef\u6e32\u67d3\r\n\r\n```\r\n    ssr:{}\r\n```\r\n\r\n### 2.\u8c03\u6574 splitChunks \u7b56\u7565\uff0c\u51cf\u5c11\u6574\u4f53\u5c3a\u5bf8\r\n\r\n\u9879\u76ee\u4e2d\u4f7f\u7528\u4e86 antd \u7b2c\u4e09\u65b9\u4f9d\u8d56\uff0c\u53ef\u901a\u8fc7 splitChunks \u914d\u7f6e\u8c03\u6574\u516c\u5171\u4f9d\u8d56\u7684\u63d0\u53d6\u7b56\u7565\u3002\r\n\r\n```\r\nexport default {\r\n  dynamicImport: {},\r\n  chunks: ['vendors', 'umi'],\r\n  chainWebpack: function (config, { webpack }) {\r\n    config.merge({\r\n      optimization: {\r\n        splitChunks: {\r\n          chunks: 'all',\r\n          minSize: 30000,\r\n          minChunks: 3,\r\n          automaticNameDelimiter: '.',\r\n          cacheGroups: {\r\n            vendor: {\r\n              name: 'vendors',\r\n              test({ resource }) {\r\n                return /[\\\\/]node_modules[\\\\/]/.test(resource);\r\n              },\r\n              priority: 10,\r\n            },\r\n          },\r\n        },\r\n      }\r\n    });\r\n  },\r\n}\r\n```\r\n\r\n### 3.\u5982\u679c\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u70ed\u66f4\u65b0\u6162\u6216\u8005\u4fee\u6539\u4ee3\u7801\u540e\u589e\u91cf\u7f16\u8bd1\uff0c\u53ef\u8c03\u6574 SourceMap \u751f\u6210\u65b9\u5f0f\r\n\r\n```\r\n// \u7981\u7528 sourcemap\r\nexport default {\r\n  devtool: false,\r\n};\r\n\r\n// \u6216\u8005\r\n\r\n// \u4f7f\u7528\u6700\u4f4e\u6210\u672c\u7684 sourcemap \u751f\u6210\u65b9\u5f0f\uff0c\u9ed8\u8ba4\u662f cheap-module-source-map\r\nexport default {\r\n  devtool: 'eval',\r\n};\r\n\r\n```\r\n\r\n### 4.\u914d\u7f6e externals \u5c06\u5927\u5c3a\u5bf8\u4f9d\u8d56\u4ece\u5916\u90e8\u5f15\u5165\uff0c\u51cf\u5c11\u7f16\u8bd1\u6d88\u8017\r\n\r\n\u6bd4\u5982\uff1areact \u3001react-dom \u3001charts\u7b49\r\n\r\n```\r\nexport default {\r\n  // \u914d\u7f6e external\r\n  externals: {\r\n    'react': 'window.React',\r\n    'react-dom': 'window.ReactDOM',\r\n  },\r\n\r\n  // \u5f15\u5165\u88ab external \u5e93\u7684 scripts\r\n  // \u533a\u5206 development \u548c production\uff0c\u4f7f\u7528\u4e0d\u540c\u7684\u4ea7\u7269\r\n  scripts: process.env.NODE_ENV === 'development' ? [\r\n    'https://gw.alipayobjects.com/os/lib/react/16.13.1/umd/react.development.js',\r\n    'https://gw.alipayobjects.com/os/lib/react-dom/16.13.1/umd/react-dom.development.js',\r\n  ] : [\r\n    'https://gw.alipayobjects.com/os/lib/react/16.13.1/umd/react.production.min.js',\r\n    'https://gw.alipayobjects.com/os/lib/react-dom/16.13.1/umd/react-dom.production.min.js',\r\n  ],\r\n}\r\n```\r\n\r\n**\u6ce8\u610f\uff1a**\r\n\r\n\u5982\u679c\u8981\u652f\u6301 IE10 \u6216\u4ee5\u4e0b\uff0cexternal react \u8fd8\u9700\u8981\u989d\u5916\u5f15\u5165\u8865\u4e01\uff0c\u6bd4\u5982 <a href=\"https://gw.alipayobjects.com/os/lib/alipay/react16-map-set-polyfill/1.0.2/dist/react16-map-set-polyfill.min.js\" target=\"_blank\" rel=\"nofollow\">https://gw.alipayobjects.com/os/lib/alipay/react16-map-set-polyfill/1.0.2/dist/react16-map-set-polyfill.min.js</a>\r\n\u5982\u679c external antd\uff0c\u9700\u540c\u65f6 external \u989d\u5916\u7684 moment\u3001react \u548c react-dom\uff0c\u5e76\u5728 antd \u524d\u5f15\u5165\u3002\r\n\r\n### 5.\u5f00\u542f\u6309\u9700\u52a0\u8f7d\r\n\r\n```\r\ndynamicImport: {},\r\n```\r\n\r\n### 6.\u6839\u636e\u9879\u76ee\u60c5\u51b5\u81ea\u884c\u5224\u65ad\u662f\u5426\u5f00\u542f\u9884\u6e32\u67d3\r\n\r\n\u9884\u6e32\u67d3\u4f1a\u7ed9\u6bcf\u4e2a\u9875\u9762\u8f93\u5165 html, \u4e00\u822c\u9759\u6001\u7f51\u7ad9\u9002\u5408\u4f7f\u7528\u3002\r\n\r\n```\r\nexportStatic: {},\r\n```\r\n\r\n### 7. \u9759\u6001\u8d44\u6e90\u4f7f\u7528CDN, \u901a\u8fc7 publicPath \u914d\u7f6e\u9759\u6001\u8d44\u6e90 CDN \u5730\u5740\u3002\r\n\r\n```\r\npublicPath:\"https://www.cdn.com/\"\r\n```\r\n\r\n## \u53c2\u8003\u94fe\u63a5\r\n\r\n\u7f16\u8bd1\u63d0\u901f\u7684\u914d\u7f6e\u53c2\u8003\uff1a<a href=\"https://umijs.org/zh-CN/guide/boost-compile-speed#%E9%85%8D%E7%BD%AE-externals\" rel=\"nofollow\" target=\"_blank\"> umi \u5982\u4f55\u505a\u7f16\u8bd1\u63d0\u901f</a>"},cq0f:function(n,e,r){"use strict";r.r(e),e["default"]="# GitHub\u4e0a\u5982\u4f55\u53d1\u73b0\u4f18\u79c0\u5f00\u6e90\u9879\u76ee\r\n\r\n\r\n\r\nGitHub\u4e0a\u65e0\u6570\u7684\u5f00\u6e90\u9879\u76ee\u4f9b\u6211\u4eec\u5b66\u4e60\uff0c\u90a3\u4e48\u5728\u5982\u6b64\u591a\u7684\u9879\u76ee\u4e2d\uff0c\u5982\u4f55\u627e\u5230\u4f60\u60f3\u8981\u7684\uff0c\u6709\u4ef7\u503c\u7684\u4f18\u79c0\u5f00\u6e90\u9879\u76ee\u5462\uff1f\u672c\u7ad9\u6bcf\u4e2a\u6708\u90fd\u4f1a\u66f4\u65b0\u4ee5\u524d\u524d\u7aef\u5f00\u6e90\u9879\u76ee\u7ed9\u5927\u5bb6\u53c2\u8003\u5b66\u4e60\uff0c\u4f46\u6388\u4eba\u4ee5\u9c7c\u4e0d\u5982\u6388\u4eba\u4ee5\u6e14\uff0c\u672c\u6587\u5c06\u4ecb\u7ecd\u5982\u4f55\u5728github\u53d1\u73b0\u4f18\u79c0\u9879\u76ee\uff0c\u8282\u7ea6\u6211\u4eec\u7684\u65f6\u95f4\u3002\r\n\r\n\r\n\r\n## 1.Follow\r\n\r\n\u5173\u6ce8GitHub\u4e0a\u6d3b\u8dc3\u7684\u8001\u53f8\u673a\u3002\r\n\r\n\r\n\r\nGitHub\u4e0a\u6240\u6709\u4f60\u5173\u6ce8\u7684\u4ebacreate,start\u6216\u8005fork\u4e86\u4e00\u4e2a\u9879\u76ee\uff0c\u90fd\u4f1a\u51fa\u73b0\u5728\u4f60\u7684\u65f6\u95f4\u7ebf\u4e0a\uff0c\u8fd9\u79cd\u5c31\u9002\u5408\u61d2\u4eba\u64cd\u4f5c\uff0c\u770b\u522b\u4eba\u5728\u5b66\u4ec0\u4e48\u505a\u4ec0\u4e48\uff0c\u81ea\u5df1\u4e5f\u8ddf\u7740\u505a\u5c31\u884c\u4e86\u3002\u522b\u4eba\u8ddf\u8e2a\u7684\u9879\u76ee\u8981\u4e48\u5c31\u662f\u9879\u76ee\u505a\u5f97\u597d\uff0c\u6216\u8005\u5bf9\u81ea\u5df1\u6709\u7528\uff0c\u6211\u4eec\u53ea\u9700\u4ece\u8fd9\u90e8\u5206\u9879\u76ee\u91cc\u9762\u53bb\u7b5b\u9009\u6211\u4eec\u60f3\u8981\u7684\u5c31\u884c\uff0c\r\n\r\n\r\n\r\n## 2.Explore Repositories\r\n\r\ngithub \u4e5f\u4f1a\u63a8\u4e00\u4e9b\u4f60\u53ef\u80fd\u611f\u5174\u8da3\u7684\u4ed3\u5e93\u7ed9\u4f60\u7684\uff0c\u53ea\u8981\u4f60\u4e00\u6253\u5f00 github\u7f51\u7ad9\u5c31\u51fa\u73b0\u4e86\u3002\r\n\r\n\r\n\r\n## 3.Expolre\r\n\r\n### 3.1 Trending \u8d8b\u52bf\r\n\r\n\u5728 Trending \u9875\u9762\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u6700\u8fd1\u4e00\u4e9b\u70ed\u95e8\u7684\u5f00\u6e90\u9879\u76ee\u6216\u8005\u5f00\u53d1\u8005\uff0c\u8fd9\u4e2a\u9875\u9762\u53ef\u4ee5\u7b97\u662f\u5f88\u591a\u4eba\u4e3b\u52a8\u83b7\u53d6\u4e00\u4e9b\u5f00\u6e90\u9879\u76ee\u548c\u6d3b\u8dc3\u5f00\u53d1\u8005\u6700\u597d\u7684\u9014\u5f84\u3002\r\n\r\n\u9996\u5148\u70b9\u51fb Explore => Trending\u3002\r\n\r\n- \u53ef\u4ee5\u9009\u62e9\u770b\u5f00\u6e90\u9879\u76ee\u8fd8\u662f\u5f00\u53d1\u8005\uff0c\u5207\u6362 Repositories \u548c Developers \u5373\u53ef\u3002\r\n- \u53ef\u4ee5\u9009\u62e9\u300c\u5f53\u5929\u70ed\u95e8\u300d\u3001\u300c\u4e00\u5468\u4e4b\u5185\u70ed\u95e8\u300d\u548c\u300c\u4e00\u6708\u4e4b\u5185\u70ed\u95e8\u300d\u6765\u67e5\u770b\u3002\r\n- \u53ef\u4ee5\u9009\u62e9\u8bed\u8a00\u7c7b\u6765\u67e5\u770b\uff0c\u6bd4\u5982\u4f60\u60f3\u67e5\u770b\u6700\u8fd1\u70ed\u95e8\u7684 React \u9879\u76ee\uff0c\u90a3\u4e48\u53f3\u8fb9\u5c31\u53ef\u4ee5\u9009\u62e9 React \u8bed\u8a00\u3002\r\n\r\n\r\n\r\n\u8fd9\u4e2a\u9875\u9762\u63a8\u8350\u5927\u5bb6\u6bcf\u9694\u51e0\u5929\u5c31\u53bb\u770b\u4e0b\uff0c\u4e3b\u52a8\u53d1\u6398\u4e00\u4e9b\u4f18\u79c0\u7684\u5f00\u6e90\u9879\u76ee\u3002\r\n\r\n### 3.2 Topics \u8bdd\u9898\r\n\r\nTopics \u91cc\u9762\u4e5f\u53ef\u4ee5\u770b\u67d0\u4e2a\u8bdd\u9898\u6216\u8005\u9886\u57df\u5185\u6700\u4f18\u79c0\u7684\u9879\u76ee\u3002\r\n\r\n\u6bd4\u5982\u524d\u7aef\u9886\u57df\uff1a**Front end**\r\n\r\n\r\n\r\n## 4.Star\r\n\r\n\u4f60\u53ef\u4ee5\u5728\u67d0\u4e9b\u5927\u725b\u7684 star \u5217\u8868\u91cc\u9762\u627e\u4f18\u79c0\u5f00\u6e90\u9879\u76ee\r\n\r\n\r\n\r\n## 5.Search\r\n\r\n\u9664\u4e86\u5e73\u65f6\u4e3b\u52a8\u53d1\u73b0\u4f18\u79c0\u5f00\u6e90\u9879\u76ee\u4e4b\u5916\uff0c\u4e3b\u52a8\u641c\u7d22\u53c8\u662f\u975e\u5e38\u91cd\u8981\u7684\u6280\u80fd\uff0c\u5f88\u591a\u767e\u5ea6\u6216\u8005 google \u4e0d\u5230\u7684\u4e1c\u897f\uff0c\u5728 github \u4e0a\u90fd\u80fd\u627e\u5230\u3002\r\n\r\n\u8f93\u5165\u641c\u7d22\u5173\u952e\u5b57\uff0c\u53ef\u4ee5\u9009\u62e9\u6392\u5e8f\u7684\u65b9\u5f0f\u3001\u8bed\u8a00\u3001\u4ed3\u5e93\u3002\r\n\r\n\r\n\r\n## \u5199\u5728\u6700\u540e\r\n\r\nGitHub \u4e0a\u7684\u4f18\u79c0\u5f00\u6e90\u9879\u76ee\u771f\u7684\u662f\u592a\u591a\u4e86\uff0c\u4e0d\u7ba1\u662f\u5de5\u4f5c\u4e0a\u8fd0\u7528\u63d0\u5347\u6548\u7387\uff0c\u8fd8\u662f\u5bf9\u6e90\u7801\u8fdb\u884c\u5b66\u4e60\u90fd\u4f1a\u6709\u83ab\u5927\u7684\u5e2e\u52a9\u3002\r\n"},dfwb:function(n,e,r){"use strict";var t=r("6ldB"),o=r.n(t),i=r("fWWA"),a=r("nKUr");e["a"]=()=>Object(a["jsx"])(i["a"],{ignore:!0,children:Object(a["jsx"])(o.a.Google,{client:"ca-pub-2087076429727327",slot:"9331479126",style:{display:"block",textAlign:"center",width:"100%",height:"90px"}})})},fWWA:function(n,e,r){"use strict";var t=r("cDcd"),o=(r("J+/v"),r("MoRW")),i=r("nKUr"),a=()=>Object(i["jsx"])(o["a"],{status:"500",title:"500",style:{background:"none"},subTitle:"Sorry, something went wrong!"});class s extends t["Component"]{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(n){return console.log("UI ERROR:",n),{hasError:!0}}render(){return this.state.hasError?this.props.ignore?null:Object(i["jsx"])(a,{}):this.props.children}}e["a"]=s},jLCa:function(n,e,r){(function(n){var e=n.Markdown=function(n){switch(typeof n){case"undefined":this.dialect=e.dialects.Gruber;break;case"object":this.dialect=n;break;default:if(!(n in e.dialects))throw new Error("Unknown Markdown dialect '"+String(n)+"'");this.dialect=e.dialects[n];break}this.em_state=[],this.strong_state=[],this.debug_indent=""};function t(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function o(){var n=r("MCLT");return"Markdown.mk_block( "+n.inspect(this.toString())+", "+n.inspect(this.trailing)+", "+n.inspect(this.lineNumber)+" )"}n.parse=function(n,r){var t=new e(r);return t.toTree(n)},n.toHTML=function(e,r,t){var o=n.toHTMLTree(e,r,t);return n.renderJsonML(o)},n.toHTMLTree=function(n,e,r){"string"===typeof n&&(n=this.parse(n,e));var t=f(n),o={};t&&t.references&&(o=t.references);var i=b(n,o,r);return y(i),i};var i=e.mk_block=function(n,e,r){1==arguments.length&&(e="\n\n");var i=new String(n);return i.trailing=e,i.inspect=o,i.toSource=t,void 0!=r&&(i.lineNumber=r),i};function s(n){var e=0,r=-1;while(-1!==(r=n.indexOf("\n",r+1)))e++;return e}function l(n,e){var r=n+"_state",t="strong"==n?"em_state":"strong_state";function o(n){this.len_after=n,this.name="close_"+e}return function(i,a){if(this[r][0]==e)return this[r].shift(),[i.length,new o(i.length-e.length)];var s=this[t].slice(),l=this[r].slice();this[r].unshift(e);var c=this.processInline(i.substr(e.length)),u=c[c.length-1];this[r].shift();if(u instanceof o){c.pop();var h=i.length-u.len_after;return[h,[n].concat(c)]}return this[t]=s,this[r]=l,[e.length,e]}}function c(n){var e=n.split(""),r=[""],t=!1;while(e.length){var o=e.shift();switch(o){case" ":t?r[r.length-1]+=o:r.push("");break;case"'":case'"':t=!t;break;case"\\":o=e.shift();default:r[r.length-1]+=o;break}}return r}e.prototype.split_blocks=function(n,e){n=n.replace(/(\r\n|\n|\r)/g,"\n");var r,t=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,o=[],a=1;null!=(r=/^(\s*\n)/.exec(n))&&(a+=s(r[0]),t.lastIndex=r[0].length);while(null!==(r=t.exec(n)))"\n#"==r[2]&&(r[2]="\n",t.lastIndex--),o.push(i(r[1],r[2],a)),a+=s(r[0]);return o},e.prototype.processBlock=function(n,e){var r=this.dialect.block,t=r.__order__;if("__call__"in r)return r.__call__.call(this,n,e);for(var o=0;o<t.length;o++){var i=r[t[o]].call(this,n,e);if(i)return(!h(i)||i.length>0&&!h(i[0]))&&this.debug(t[o],"didn't return a proper array"),i}return[]},e.prototype.processInline=function(n){return this.dialect.inline.__call__.call(this,String(n))},e.prototype.toTree=function(n,e){var r=n instanceof Array?n:this.split_blocks(n),t=this.tree;try{this.tree=e||this.tree||["markdown"];while(r.length){var o=this.processBlock(r.shift(),r);o.length&&this.tree.push.apply(this.tree,o)}return this.tree}finally{e&&(this.tree=t)}},e.prototype.debug=function(){var n=Array.prototype.slice.call(arguments);n.unshift(this.debug_indent),"undefined"!==typeof print&&print.apply(print,n),"undefined"!==typeof console&&"undefined"!==typeof console.log&&console.log.apply(null,n)},e.prototype.loop_re_over_block=function(n,e,r){var t,o=e.valueOf();while(o.length&&null!=(t=n.exec(o)))o=o.substr(t[0].length),r.call(this,t);return o},e.dialects={},e.dialects.Gruber={block:{atxHeader:function(n,e){var r=n.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(r){var t=["header",{level:r[1].length}];return Array.prototype.push.apply(t,this.processInline(r[2])),r[0].length<n.length&&e.unshift(i(n.substr(r[0].length),n.trailing,n.lineNumber+2)),[t]}},setextHeader:function(n,e){var r=n.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(r){var t="="===r[2]?1:2,o=["header",{level:t},r[1]];return r[0].length<n.length&&e.unshift(i(n.substr(r[0].length),n.trailing,n.lineNumber+2)),[o]}},code:function(n,e){var r=[],t=/^(?: {0,3}\t| {4})(.*)\n?/;if(n.match(t)){n:do{var o=this.loop_re_over_block(t,n.valueOf(),(function(n){r.push(n[1])}));if(o.length){e.unshift(i(o,n.trailing));break n}if(!e.length)break n;if(!e[0].match(t))break n;r.push(n.trailing.replace(/[^\n]/g,"").substring(2)),n=e.shift()}while(1);return[["code_block",r.join("\n")]]}},horizRule:function(n,e){var r=n.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(r){var t=[["hr"]];return r[1]&&t.unshift.apply(t,this.processBlock(r[1],[])),r[3]&&e.unshift(i(r[3])),t}},lists:function(){var n="[*+-]|\\d+\\.",e=/[*+-]/,r=new RegExp("^( {0,3})("+n+")[ \t]+"),t="(?: {0,3}\\t| {4})";function o(e){return new RegExp("(?:^("+t+"{0,"+e+"} {0,3})("+n+")\\s+)|(^"+t+"{0,"+(e-1)+"}[ ]{0,4})")}function a(n){return n.replace(/ {0,3}\t/g,"    ")}function s(n,e,r,t){if(e)n.push(["para"].concat(r));else{var o=n[n.length-1]instanceof Array&&"para"==n[n.length-1][0]?n[n.length-1]:n;t&&n.length>1&&r.unshift(t);for(var i=0;i<r.length;i++){var a=r[i],s="string"==typeof a;s&&o.length>1&&"string"==typeof o[o.length-1]?o[o.length-1]+=a:o.push(a)}}}function l(n,e){var r=new RegExp("^("+t+"{"+n+"}.*?\\n?)*$"),o=new RegExp("^"+t+"{"+n+"}","gm"),a=[];while(e.length>0){if(!r.exec(e[0]))break;var s=e.shift(),l=s.replace(o,"");a.push(i(l,s.trailing,s.lineNumber))}return a}function c(n,e,r){var t=n.list,o=t[t.length-1];if(!(o[1]instanceof Array&&"para"==o[1][0]))if(e+1==r.length)o.push(["para"].concat(o.splice(1,o.length-1)));else{var i=o.pop();o.push(["para"].concat(o.splice(1,o.length-1)),i)}}return function(n,t){var i=n.match(r);if(i){var h,d,p=[],f=j(i),m=!1,g=[p[0].list];while(1){for(var b=n.split(/(?=\n)/),y="",w=0;w<b.length;w++){var v="",k=b[w].replace(/^\n/,(function(n){return v=n,""})),E=o(p.length);if(i=k.match(E),void 0!==i[1]){y.length&&(s(h,m,this.processInline(y),v),m=!1,y=""),i[1]=a(i[1]);var x=Math.floor(i[1].length/4)+1;if(x>p.length)f=j(i),h.push(f),h=f[1]=["listitem"];else{var T=!1;for(d=0;d<p.length;d++)if(p[d].indent==i[1]){f=p[d].list,p.splice(d+1,p.length-(d+1)),T=!0;break}T||(x++,x<=p.length?(p.splice(x,p.length-x),f=p[x-1].list):(f=j(i),h.push(f))),h=["listitem"],f.push(h)}v=""}k.length>i[0].length&&(y+=v+k.substr(i[0].length))}y.length&&(s(h,m,this.processInline(y),v),m=!1,y="");var S=l(p.length,t);S.length>0&&(u(p,c,this),h.push.apply(h,this.toTree(S,[])));var _=t[0]&&t[0].valueOf()||"";if(!_.match(r)&&!_.match(/^ /))break;n=t.shift();var O=this.dialect.block.horizRule(n,t);if(O){g.push.apply(g,O);break}u(p,c,this),m=!0}return g}function j(n){var r=e.exec(n[2])?["bulletlist"]:["numberlist"];return p.push({list:r,indent:n[1]}),r}}}(),blockquote:function(n,e){if(n.match(/^>/m)){var r=[];if(">"!=n[0]){var t=n.split(/\n/),o=[],a=n.lineNumber;while(t.length&&">"!=t[0][0])o.push(t.shift()),a++;var s=i(o.join("\n"),"\n",n.lineNumber);r.push.apply(r,this.processBlock(s,[])),n=i(t.join("\n"),n.trailing,a)}while(e.length&&">"==e[0][0]){var l=e.shift();n=i(n+n.trailing+l,l.trailing,n.lineNumber)}var c=n.replace(/^> ?/gm,""),u=(this.tree,this.toTree(c,["blockquote"])),h=f(u);return h&&h.references&&(delete h.references,d(h)&&u.splice(1,1)),r.push(u),r}},referenceDefn:function(n,e){var r=/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/;if(n.match(r)){f(this.tree)||this.tree.splice(1,0,{});var t=f(this.tree);void 0===t.references&&(t.references={});var o=this.loop_re_over_block(r,n,(function(n){n[2]&&"<"==n[2][0]&&">"==n[2][n[2].length-1]&&(n[2]=n[2].substring(1,n[2].length-1));var e=t.references[n[1].toLowerCase()]={href:n[2]};void 0!==n[4]?e.title=n[4]:void 0!==n[5]&&(e.title=n[5])}));return o.length&&e.unshift(i(o,n.trailing)),[]}},para:function(n,e){return[["para"].concat(this.processInline(n))]}}},e.dialects.Gruber.inline={__oneElement__:function(n,e,r){var t;e=e||this.dialect.inline.__patterns__;var o,i=new RegExp("([\\s\\S]*?)("+(e.source||e)+")");return t=i.exec(n),t?t[1]?[t[1].length,t[1]]:(t[2]in this.dialect.inline&&(o=this.dialect.inline[t[2]].call(this,n.substr(t.index),t,r||[])),o=o||[t[2].length,t[2]],o):[n.length,n]},__call__:function(n,e){var r,t=[];function o(n){"string"==typeof n&&"string"==typeof t[t.length-1]?t[t.length-1]+=n:t.push(n)}while(n.length>0)r=this.dialect.inline.__oneElement__.call(this,n,e,t),n=n.substr(r.shift()),u(r,o);return t},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}\[\]()#\+.!\-]/,"\\":function(n){return this.dialect.inline.__escape__.exec(n)?[2,n.charAt(1)]:[1,"\\"]},"![":function(n){var e=n.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(e){e[2]&&"<"==e[2][0]&&">"==e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1)),e[2]=this.dialect.inline.__call__.call(this,e[2],/\\/)[0];var r={alt:e[1],href:e[2]||""};return void 0!==e[4]&&(r.title=e[4]),[e[0].length,["img",r]]}return e=n.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/),e?[e[0].length,["img_ref",{alt:e[1],ref:e[2].toLowerCase(),original:e[0]}]]:[2,"!["]},"[":function(n){var r=String(n),t=e.DialectHelpers.inline_until_char.call(this,n.substr(1),"]");if(!t)return[1,"["];var o,i,a=1+t[0],s=t[1];n=n.substr(a);var l=n.match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(l){var c=l[1];if(a+=l[0].length,c&&"<"==c[0]&&">"==c[c.length-1]&&(c=c.substring(1,c.length-1)),!l[3])for(var u=1,h=0;h<c.length;h++)switch(c[h]){case"(":u++;break;case")":0==--u&&(a-=c.length-h,c=c.substring(0,h));break}return c=this.dialect.inline.__call__.call(this,c,/\\/)[0],i={href:c||""},void 0!==l[3]&&(i.title=l[3]),o=["link",i].concat(s),[a,o]}return l=n.match(/^\s*\[(.*?)\]/),l?(a+=l[0].length,i={ref:(l[1]||String(s)).toLowerCase(),original:r.substr(0,a)},o=["link_ref",i].concat(s),[a,o]):1==s.length&&"string"==typeof s[0]?(i={ref:s[0].toLowerCase(),original:r.substr(0,a)},o=["link_ref",i,s[0]],[a,o]):[1,"["]},"<":function(n){var e;return null!=(e=n.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"==e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(n){var e=n.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(n){return[3,["linebreak"]]}},e.dialects.Gruber.inline["**"]=l("strong","**"),e.dialects.Gruber.inline["__"]=l("strong","__"),e.dialects.Gruber.inline["*"]=l("em","*"),e.dialects.Gruber.inline["_"]=l("em","_"),e.buildBlockOrder=function(n){var e=[];for(var r in n)"__order__"!=r&&"__call__"!=r&&e.push(r);n.__order__=e},e.buildInlinePatterns=function(n){var e=[];for(var r in n)if(!r.match(/^__.*__$/)){var t=r.replace(/([\\.*+?|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");e.push(1==r.length?t:"(?:"+t+")")}e=e.join("|"),n.__patterns__=e;var o=n.__call__;n.__call__=function(n,r){return void 0!=r?o.call(this,n,r):o.call(this,n,e)}},e.DialectHelpers={},e.DialectHelpers.inline_until_char=function(n,e){var r=0,t=[];while(1){if(n.charAt(r)==e)return r++,[r,t];if(r>=n.length)return null;var o=this.dialect.inline.__oneElement__.call(this,n.substr(r));r+=o[0],t.push.apply(t,o.slice(1))}},e.subclassDialect=function(n){function e(){}function r(){}return e.prototype=n.block,r.prototype=n.inline,{block:new e,inline:new r}},e.buildBlockOrder(e.dialects.Gruber.block),e.buildInlinePatterns(e.dialects.Gruber.inline),e.dialects.Maruku=e.subclassDialect(e.dialects.Gruber),e.dialects.Maruku.processMetaHash=function(n){for(var e=c(n),r={},t=0;t<e.length;++t)if(/^#/.test(e[t]))r.id=e[t].substring(1);else if(/^\./.test(e[t]))r["class"]?r["class"]=r["class"]+e[t].replace(/./," "):r["class"]=e[t].substring(1);else if(/\=/.test(e[t])){var o=e[t].split(/\=/);r[o[0]]=o[1]}return r},e.dialects.Maruku.block.document_meta=function(n,e){if(!(n.lineNumber>1)&&n.match(/^(?:\w+:.*\n)*\w+:.*$/)){f(this.tree)||this.tree.splice(1,0,{});var r=n.split(/\n/);for(p in r){var t=r[p].match(/(\w+):\s*(.*)$/),o=t[1].toLowerCase(),i=t[2];this.tree[1][o]=i}return[]}},e.dialects.Maruku.block.block_meta=function(n,e){var r=n.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(r){var t,o=this.dialect.processMetaHash(r[2]);if(""===r[1]){var i=this.tree[this.tree.length-1];if(t=f(i),"string"===typeof i)return;for(a in t||(t={},i.splice(1,0,t)),o)t[a]=o[a];return[]}var s=n.replace(/\n.*$/,""),l=this.processBlock(s,[]);for(a in t=f(l[0]),t||(t={},l[0].splice(1,0,t)),o)t[a]=o[a];return l}},e.dialects.Maruku.block.definition_list=function(n,e){var r,t=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,o=["dl"];if(s=n.match(t)){var i=[n];while(e.length&&t.exec(e[0]))i.push(e.shift());for(var a=0;a<i.length;++a){var s=i[a].match(t),l=s[1].replace(/\n$/,"").split(/\n/),c=s[2].split(/\n:\s+/);for(r=0;r<l.length;++r)o.push(["dt",l[r]]);for(r=0;r<c.length;++r)o.push(["dd"].concat(this.processInline(c[r].replace(/(\n)\s+/,"$1"))))}return[o]}},e.dialects.Maruku.block.table=function(n,e){var r,t,o=function(n,e){e=e||"\\s",e.match(/^[\\|\[\]{}?*.+^$]$/)&&(e="\\"+e);var r,t=[],o=new RegExp("^((?:\\\\.|[^\\\\"+e+"])*)"+e+"(.*)");while(r=n.match(o))t.push(r[1]),n=r[2];return t.push(n),t},i=/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/,a=/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/;if(t=n.match(i))t[3]=t[3].replace(/^\s*\|/gm,"");else if(!(t=n.match(a)))return;var s=["table",["thead",["tr"]],["tbody"]];t[2]=t[2].replace(/\|\s*$/,"").split("|");var l=[];for(u(t[2],(function(n){n.match(/^\s*-+:\s*$/)?l.push({align:"right"}):n.match(/^\s*:-+\s*$/)?l.push({align:"left"}):n.match(/^\s*:-+:\s*$/)?l.push({align:"center"}):l.push({})})),t[1]=o(t[1].replace(/\|\s*$/,""),"|"),r=0;r<t[1].length;r++)s[1][1].push(["th",l[r]||{}].concat(this.processInline(t[1][r].trim())));return u(t[3].replace(/\|\s*$/gm,"").split("\n"),(function(n){var e=["tr"];for(n=o(n,"|"),r=0;r<n.length;r++)e.push(["td",l[r]||{}].concat(this.processInline(n[r].trim())));s[2].push(e)}),this),[s]},e.dialects.Maruku.inline["{:"]=function(n,e,r){if(!r.length)return[2,"{:"];var t=r[r.length-1];if("string"===typeof t)return[2,"{:"];var o=n.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!o)return[2,"{:"];var i=this.dialect.processMetaHash(o[1]),a=f(t);for(var s in a||(a={},t.splice(1,0,a)),i)a[s]=i[s];return[o[0].length,""]},e.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,e.buildBlockOrder(e.dialects.Maruku.block),e.buildInlinePatterns(e.dialects.Maruku.inline);var u,h=Array.isArray||function(n){return"[object Array]"==Object.prototype.toString.call(n)};u=Array.prototype.forEach?function(n,e,r){return n.forEach(e,r)}:function(n,e,r){for(var t=0;t<n.length;t++)e.call(r||n,n[t],t,n)};var d=function(n){for(var e in n)if(hasOwnProperty.call(n,e))return!1;return!0};function f(n){return h(n)&&n.length>1&&"object"===typeof n[1]&&!h(n[1])?n[1]:void 0}function m(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function g(n){if("string"===typeof n)return m(n);var e=n.shift(),r={},t=[];!n.length||"object"!==typeof n[0]||n[0]instanceof Array||(r=n.shift());while(n.length)t.push(g(n.shift()));var o="";for(var i in r)o+=" "+i+'="'+m(r[i])+'"';return"img"==e||"br"==e||"hr"==e?"<"+e+o+"/>":"<"+e+o+">"+t.join("")+"</"+e+">"}function b(n,e,r){var t;r=r||{};var o=n.slice(0);"function"===typeof r.preprocessTreeNode&&(o=r.preprocessTreeNode(o,e));var i=f(o);if(i){for(t in o[1]={},i)o[1][t]=i[t];i=o[1]}if("string"===typeof o)return o;switch(o[0]){case"header":o[0]="h"+o[1].level,delete o[1].level;break;case"bulletlist":o[0]="ul";break;case"numberlist":o[0]="ol";break;case"listitem":o[0]="li";break;case"para":o[0]="p";break;case"markdown":o[0]="html",i&&delete i.references;break;case"code_block":o[0]="pre",t=i?2:1;var a=["code"];a.push.apply(a,o.splice(t,o.length-t)),o[t]=a;break;case"inlinecode":o[0]="code";break;case"img":o[1].src=o[1].href,delete o[1].href;break;case"linebreak":o[0]="br";break;case"link":o[0]="a";break;case"link_ref":o[0]="a";var s=e[i.ref];if(!s)return i.original;delete i.ref,i.href=s.href,s.title&&(i.title=s.title),delete i.original;break;case"img_ref":o[0]="img";s=e[i.ref];if(!s)return i.original;delete i.ref,i.src=s.href,s.title&&(i.title=s.title),delete i.original;break}if(t=1,i){for(var l in o[1]){t=2;break}1===t&&o.splice(t,1)}for(;t<o.length;++t)o[t]=b(o[t],e,r);return o}function y(n){var e=f(n)?2:1;while(e<n.length)"string"===typeof n[e]?e+1<n.length&&"string"===typeof n[e+1]?n[e]+=n.splice(e+1,1)[0]:++e:(y(n[e]),++e)}n.renderJsonML=function(n,e){e=e||{},e.root=e.root||!1;var r=[];if(e.root)r.push(g(n));else{n.shift(),!n.length||"object"!==typeof n[0]||n[0]instanceof Array||n.shift();while(n.length)r.push(g(n.shift()))}return r.join("\n\n")}})(function(){return e}())},jYGW:function(n,e,r){"use strict";r.r(e),e["default"]='# antd\u7684carousel\u8d70\u9a6c\u706f\u7ec4\u4ef6\u5728flex\u5e03\u5c40\u4e0b\u4f1a\u51fa\u73b0\u65e0\u9650\u5bbd\u5ea6\u7684BUG\r\n\r\n## \u95ee\u9898\u590d\u73b0\r\n\r\n\u5f00\u53d1\u73af\u5883\uff1a win10 + React17 + umi3 + antd v4.16\r\n\r\n\u4efb\u610f\u5c42\u6b21\u7684\u7236\u7ea7\u8282\u70b9\u7684\u5e03\u5c40\u8bbe\u7f6e\u4e3aflex\u5e03\u5c40\uff0ccarousel\u7ec4\u4ef6\u5c31\u4f1a\u51fa\u73b0\u65e0\u9650\u5bbd\u5ea6\u7684\u95ee\u9898\u3002\r\n\r\n\u6d4b\u8bd5\u4ee3\u7801\u5982\u4e0b\uff1a\r\n\r\n```\r\n<div style={{ display: "flex" }}>\r\n  <Carousel autoplay>\r\n    <div>\r\n      <h3>1</h3>\r\n    </div>\r\n    <div>\r\n      <h3>2</h3>\r\n    </div>\r\n  </Carousel>\r\n</div>\r\n```\r\n\r\n\u7ed3\u679c\u5982\u4e0b\u56fe\uff1a\r\n\r\n<img alt="antd\u7684carousel\u8d70\u9a6c\u706f\u7ec4\u4ef6\u5728flex\u5e03\u5c40\u4e0b\u4f1a\u51fa\u73b0\u65e0\u9650\u5bbd\u5ea6\u7684BUG]" src="/static/images/6.png" width="100%">\r\n\r\n## \u5982\u4f55\u89e3\u51b3\r\n1.\u76f4\u63a5\u8bbe\u7f6ecarousel\u7ec4\u4ef6\u7684\u6837\u5f0f\u5bbd\u5ea6\u4e3a\u56fa\u5b9a\u5bbd\u5ea6\r\n```\r\n  <Carousel autoplay style={{width:"500px"}}>\r\n    <div>\r\n      <h3>1</h3>\r\n    </div>\r\n    <div>\r\n      <h3>2</h3>\r\n    </div>\r\n  </Carousel>\r\n```\r\n\r\n2.\u5982\u679c**\u4e0d\u5b58\u5728\u5d4c\u5957flex\u5e03\u5c40\u4e14\u7236\u7ea7\u8282\u70b9\u4e3aflex\u5e03\u5c40**\u7684\u8bdd\uff0c\u53ef\u4ee5\u901a\u8fc7\u8986\u76d6\u8bbe\u7f6e\u6837\u5f0f\u89e3\u51b3\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\r\n\r\n```\r\n\r\n.ant-carousel {\r\n  flex: 1;\r\n  max-width: 100%;\r\n}\r\n\r\n```\r\n\r\n3.\u5982\u679c**\u5b58\u5728\u5d4c\u5957flex\u5e03\u5c40\u6216\u8de8\u4e862\u4e2a\u5c42\u7ea7\u53ca\u4ee5\u4e0a\u7684\u7236\u7ea7\u8282\u70b9\u4e3aflex\u5e03\u5c40**\u7684\u8bdd\uff0c\u53ef\u4ee5\u6307\u5b9a\u7236\u8282\u70b9\u5bbd\u5ea6\u4e3a\u67d0\u4e2a**\u56fa\u5b9a\u5bbd\u5ea6**\u89e3\u51b3\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a\r\n\r\n```\r\n//\u5d4c\u5957flex\u5e03\u5c40\r\n<div style={{ display: "flex"" }}>\r\n  <div style={{ display: "flex", width:"500px" }}>\r\n    <Carousel autoplay>\r\n      <div>\r\n        <h3>1</h3>\r\n      </div>\r\n      <div>\r\n        <h3>2</h3>\r\n      </div>\r\n    </Carousel>\r\n  </div>\r\n</div>\r\n\r\n//\u8de8\u4e862\u4e2a\u5c42\u7ea7\u53ca\u4ee5\u4e0a\u7684\u7236\u7ea7\u8282\u70b9\u4e3aflex\u5e03\u5c40\r\n<div style={{ display: "flex"" }}>\r\n  <div style={{ width:"500px" }}> //\u6307\u5b9a\u7236\u8282\u70b9\u5bbd\u5ea6\u4e3a500px\r\n    <Carousel autoplay>\r\n      <div>\r\n        <h3>1</h3>\r\n      </div>\r\n      <div>\r\n        <h3>2</h3>\r\n      </div>\r\n    </Carousel>\r\n  </div>\r\n</div>\r\n\r\n```'},jdwX:function(n,e,r){e.markdown=r("jLCa"),e.parse=e.markdown.toHTML},kUOa:function(n,e,r){"use strict";r.r(e),e["default"]="\x3c!--\r\n * @Date: 2021-12-02 17:41:43\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-02 18:05:49\r\n * @FilePath: \\qianduan.shop\\data\\blogs\\25.md\r\n--\x3e\r\n\r\n# \u4f7f\u7528MDX\u5728md\u6587\u4ef6\u4e2d\u89e3\u6790React\u7ec4\u4ef6\r\n\r\n## \u80cc\u666f\r\n\r\n\u4e4b\u524d\u6211\u4eec\u5904\u7406\u8fc7<a href=\"https://qianduan.shop/blogs/detail/2\"> md \u6587\u4ef6\u5904\u7406\u6210 html \u5c55\u793a</a>,\u4f7f\u7528 markdown \u8bed\u6cd5\u5199\u6587\u7ae0\uff0c\u4f46\u662f\u5728\u6b64\u57fa\u7840\u4e0a\u505a\u6837\u5f0f\u8c03\u6574\u5f88\u9ebb\u70e6\uff0c\u5c55\u73b0\u5f62\u5f0f\u4e5f\u4e0d\u591f\u4e30\u5bcc\uff0c\u6240\u4ee5\u6211\u4eec\u60f3\u8ba9 md \u4e0e React JSX\u7ed3\u5408\u6765\u4e30\u5bcc\u6211\u4eec\u7684\u5c55\u73b0\u5f62\u5f0f\u3002\r\n\r\n\u8fd9\u91cc\u6211\u4eec\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 MDX \u6765\u5b9e\u73b0\u6211\u4eec\u7684\u9700\u6c42\uff0cMDX\u4f1a\u5c06\u5e38\u89c4\u7684 Markdown \u548c JSX\u7f16\u8bd1\u4e3aJavascript\uff0c.md \u540e\u7f00\u7684\u6587\u4ef6\u540d\u9700\u8981\u6539\u6210 .mdx \u540e\u7f00\u3002\r\n\r\n## \u5728 React JSX \u4e2d\u4f7f\u7528 MDX\r\n\r\n\u2460 \u76f4\u63a5\u5f15\u7528 @mdx-js/react \u89e3\u6790\r\n\r\n```\r\n  import {MDXProvider} from '@mdx-js/react'\r\n  import Post from './post.mdx'\r\n  // ^-- Assumes an integration is used to compile MDX to JS, such as\r\n  // `@mdx-js/esbuild`, `@mdx-js/loader`, `@mdx-js/node-loader`, or\r\n  // `@mdx-js/rollup`, and that it is configured with\r\n  // `options.providerImportSource: '@mdx-js/react'`.\r\n\r\n  const components = {\r\n    em: props => <i {...props} />\r\n  }\r\n\r\n  <MDXProvider components={components}>\r\n    <Post />\r\n  </MDXProvider>\r\n```\r\n\r\n\u2461 \u4f7f\u7528 webpack \u6216\u8005 create-react-app(CRA), Next.js\uff0c\u4e0b\u8f7d\u914d\u7f6e @mdx-js/loader \u5373\u53ef\uff0cloader \u914d\u7f6e\u65b9\u6cd5\u6b64\u5904\u4e0d\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u8bf7\u81ea\u884c\u767e\u5ea6\u6216Google\u3002\r\n\r\n## \u5728 Node \u4e2d\u4f7f\u7528 MDX\uff0cSSR \u670d\u52a1\u7aef\u6e32\u67d3\u662f\u4f1a\u7528\u5230\r\n\r\n\u5b89\u88c5 @mdx-js/node-loader@next, \u6b64\u4f9d\u8d56\u5305\u4ec5\u9002\u7528\u4e8e ESM\uff08ES Module\uff09\uff0c\u9700\u8981 Node 12+ \u624d\u80fd\u4f7f\u7528\u5b83\uff0c\u5e76\u4e14\u5fc5\u987b\u4f7f\u7528import \u800c\u4e0d\u662frequired\u3002\r\n\r\n```\r\nimport {renderToStaticMarkup} from 'react-dom/server.js'\r\nimport React from 'react'\r\nimport Content from './example.mdx'\r\n\r\nconsole.log(renderToStaticMarkup(React.createElement(Content)))\r\n\r\n```\r\n\r\n\r\n## \u6700\u540e  \r\n\r\n\u672c\u6587\u53ea\u4ecb\u7ecd\u4e86React\u4e2d MDX \u7684\u4f7f\u7528\uff0cMDX \u8fd8\u53ef\u4ee5\u5728\u66f4\u591a\u7684\u5730\u65b9\u4f7f\u7528\uff1aesbuild,rollup,Preact,Vue 3,Emotion\u7b49\u3002\r\n\r\n\u66f4\u591a\u5173\u4e8eMDX\u7684 \u7528\u6cd5\u53ca\u4ecb\u7ecd\u53c2\u8003\u94fe\u63a5\uff1a<a target=\"_blank\" href=\"https://mdxjs.com/docs/getting-started/#quick-start\" rel=\"nofollow\"> MDX\u5b98\u7f51 </a>"},n4kd:function(n,e,r){"use strict";r.r(e),e["default"]='# umi antd \u4e2d\u62a5\u9519 load component failed Error: Module "./antd/es/drawer/style" does not exist in container.\r\n\r\n## \u80cc\u666f\r\n\r\n\u5f00\u53d1\u73af\u5883\uff1awin10 + umi v3.5.0 + antd v4.14.0 + node 14.17.5 + React v17.0.0\r\n\r\n\u9879\u76ee\u4e2d\u7b2c\u4e00\u6b21\u4f7f\u7528drawer\u7ec4\u4ef6\uff0c\u5f15\u5165\u7ec4\u4ef6\u540e\u62a5\u9519\uff1a\r\n\r\nload component failed Error: Module "./antd/es/drawer/style" does not exist in container.\r\n\r\n![umi antd](/static/images/26_1.png)\r\n\r\n## \u89e3\u51b3\r\n\r\n\u5220\u6389 src/.umi\u76ee\u5f55 \u91cd\u65b0\u8fd0\u884c\u4e0b\u5c31\u597d\u4e86\r\n\r\n## \u5176\u4ed6\r\n\r\n\u7b2c\u4e00\u6b21\u4f7f\u7528 antd \u7684 Timeline \u7ec4\u4ef6\u4e5f\u9047\u5230\u4e86\u540c\u6837\u95ee\u9898\uff0c\u89e3\u51b3\u65b9\u6cd5\u4e00\u6837,\u53ef\u89c1\u7c7b\u4f3c\u9519\u8bef\u89e3\u51b3\u65b9\u6cd5\u76f8\u540c\u3002'},nixE:function(n,e,r){"use strict";r.r(e),e["default"]="\x3c!--\r\n * @Date: 2021-12-27 14:41:11\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2022-01-22 09:37:15\r\n * @FilePath: \\qianduan.shop\\front\\data\\blogs\\7.md\r\n--\x3e\r\n# SEO Series of Basic Concepts\r\nWhat is SEO, what is SEO for us, and where can SEO be used? Before learning SEO, we must know what we want to learn, what is it for, and how to use it. Learn with questions in order to better understand the use of SEO.\r\n\r\n## What is SEO\r\nSEO is the abbreviation of \"Search Engine Optimization\" (Search Engine Optimization), is a kind of analysis of search engine ranking laws, to understand how various search engines search, how to crawl the Internet page, how to determine the search results of specific keywords ranking technology.\r\n\r\nThe current global market ranking of the top ten search engines include.\r\n1.Google\r\n2. bing\r\n3.yahoo\r\n4.baidu\r\n5.Yandex\r\n6.DuckDuckGo\r\n7.Ask\r\n8.AOL\r\n9.WolframAlpha\r\n10.Internet Archive\r\n\r\nAccording to the target market mainstream search engine to do SEO, so as to achieve the best optimization results. For example: in China mainly for Baidu, Sogou, 306, Google (Hong Kong, Macao and Taiwan), Bing, Sleipnir and other search engines to do optimization; to do the global market naturally preferred Google; the most popular search engine in the Russian market is Yandex.\r\n\r\n\r\n## What's the use of SEO\r\nTo put it directly, it is to get free traffic from search engines and reduce promotion costs. The use of easily referenced by search means, targeted optimization of the site to improve the natural ranking of the site in the search engines, to attract more users to visit the site, to improve the number of visitors to the site.\r\n\r\n## White Hat SEO (regular)\r\n\r\nUsually we say that is also through the formal compliance with search engine optimization guidelines for SEO technical means, is a fair approach, is the use of SEO optimization methods in line with the provisions of the mainstream search engine issue guidelines, comply with the search engine rules standards, through the creation of original content, user-centric, reasonable modification of the site's content, tags, directory, file structure, the production of standard static pages, etc., optimize the overall structure of the site, user experience as the center, improve the site weight, improve the overall ranking of the site.\r\n\r\nWhite hat SEO has been considered by the industry as the best SEO practice, which is operated under the condition of avoiding all risks and also avoiding any conflicts with search engine issuance guidelines, it is also the highest professional ethical standard for SEO practitioners.\r\n\r\n## Black hat SEO (undesirable)\r\n\r\nBlack hat SEO is the meaning of cheating, through cheating means to hoodwink the search engine to obtain the ranking, black hat SEO practices do not comply with the mainstream search engine issuance policy regulations. The main characteristic of black hat SEO profit is short and quick, in order to short-term benefits and the use of cheating methods. At the same time at any time because of the search engine algorithm changes and face penalties.\r\n\r\nBy cheating the search engine ranking rules, the use of bad cheating methods such as jump pages, bridge pages, web page orientation, web page hijacking, keyword stacking, hidden links, link factories, mass distribution software, etc., to deceive search engines and search users, to obtain short-term search rankings, do not comply with the rules of inclusion, harmful to the long-term development of the site, causing the domain name K, serious will lead to the domain host is blacklisted by search engines, banned from crawling.\r\n\r\nBlack hat is different from the white hat kind of long-term strategy. Black hat focus on short-term benefits, through cheating techniques to obtain a large number of traffic.\r\n\r\n## Grey Hat SEO (black then white)\r\n\r\nBlack but not completely black, white is not completely white, between the black hat and white hat. It can be said to play ball, good luck, bad luck will be K. SEO gray hat part of the early use of black hat methods to quickly improve site ranking, ranking up, turn to white hat, the later use of search engine rules in line with optimization practices to improve site ranking.\r\n\r\n## Green Hat SEO\r\n\r\nThe definition of green hat SEO and the traditional understanding of white hat SEO and black hat SEO are very different, green hat SEO is neither keen on the traditional white hat SEO of the establishment of internal and external links nor keen on black hat SEO of various tricky means, creating valuable information is the prerequisite for green hat SEO.\r\n\r\nCharacteristics of green hat SEO:\r\n\r\n1, they are keen on the creation of Internet value and resist the generation and proliferation of spam information.\r\n2\u3001They are often the initiators of some of the latest ideas or the challengers of traditional ideas.\r\n3, they all for the user to create value-based, rarely for a search engine to make special adjustments or catering.\r\n4, they are even for marketing purposes, but also to conduct a lot of research, be sure to pursue a new valuable information generated;.\r\n5, they are also to SEO as a job, rather than a simple hobby.\r\n6\u3001They are keen on brand creation, not inferior cottage industry.\r\n"},pMRU:function(n,e,r){"use strict";r.r(e),e["default"]="# node\u4e8b\u4ef6\u5faa\u73af\uff08Event loop\uff09\r\n\r\n\u672c\u6587\u5c06\u7b80\u8ff0node\u4e8b\u4ef6\u5faa\u73af\u7684\u673a\u5236\uff0c\u5e2e\u52a9\u6211\u4eec\u7406\u89e3node\u73af\u5883\u4e2d\u4ee3\u7801\u662f\u5982\u4f55\u8fd0\u884c\u7684\u3002\r\n\r\n## 1.node\u8fd0\u884c\u673a\u5236 \r\n\r\nnode\u4f7f\u7528V8\u4f5c\u4e3ajs\u89e3\u6790\u5f15\u64ce\uff0cI/O\u5904\u7406\u4f7f\u7528\u4e86\u81ea\u5df1\u8bbe\u8ba1\u7684libuv,libuv\u662f\u4e00\u4e2a\u57fa\u4e8e\u4e8b\u4ef6\u7684\u8de8\u5e73\u53f0\u62bd\u8c61\u5c42\uff0c\u5c01\u88c5\u4e86\u4e0d\u540c\u64cd\u4f5c\u7cfb\u7edf\u4e00\u4e9b\u5e95\u5c42\u7279\u6027\uff0c\u5bf9\u5916\u63d0\u4f9b\u7edf\u4e00\u7684API,\u4e8b\u4ef6\u5faa\u73af\u673a\u5236\u4e5f\u662f\u5b83\u91cc\u9762\u7684\u5b9e\u73b0\u3002\r\n\r\n\u8fd0\u884c\u673a\u5236\uff1a \r\n\r\n\u2460 V8\u5f15\u64ce\u89e3\u6790JavaScript\u811a\u672c\u3002 \r\n\r\n\u2461 \u89e3\u6790\u540e\u7684\u4ee3\u7801\uff0c\u8c03\u7528Node API\u3002 \r\n\r\n\u2462 libuv\u5e93\u8d1f\u8d23Node API\u7684\u6267\u884c\u3002\u5b83\u5c06\u4e0d\u540c\u7684\u4efb\u52a1\u5206\u914d\u7ed9\u4e0d\u540c\u7684\u7ebf\u7a0b\uff0c\u5f62\u6210\u4e00\u4e2aEvent Loop\uff08\u4e8b\u4ef6\u5faa\u73af\uff09\uff0c\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5c06\u4efb\u52a1\u7684\u6267\u884c\u7ed3\u679c\u8fd4\u56de\u7ed9V8\u5f15\u64ce\u3002 \r\n\r\n\u2463 V8\u5f15\u64ce\u518d\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u7528\u6237\u3002 \r\n\r\n## 2.\u4e8b\u4ef6\u5faa\u73af\r\n\r\nlibuv\u5f15\u64ce\u4e2d\u7684\u4e8b\u4ef6\u5faa\u73af\u5206\u4e3a 6 \u4e2a\u9636\u6bb5\uff0c\u5faa\u73af\u8fd0\u884c\u3002 \r\n\r\n\u6bcf\u4e2a\u9636\u6bb5\u90fd\u6709\u4e00\u4e2a FIFO \u961f\u5217\u6765\u6267\u884c\u56de\u8c03\u3002\u6bcf\u5f53\u8fdb\u5165\u65b0\u9636\u6bb5\u7684\u65f6\u5019\uff0c\u90fd\u4f1a\u4ece\u5bf9\u5e94\u7684\u56de\u8c03\u961f\u5217\u4e2d\u53d6\u51fa\u51fd\u6570\u53bb\u6267\u884c\uff0c\u5f53\u961f\u5217\u4e3a\u7a7a\u6216\u8005\u6267\u884c\u7684\u56de\u8c03\u6570\u91cf\u5230\u8fbe\u7cfb\u7edf\u8bbe\u5b9a\u7684\u9608\u503c\uff0c\u5c31\u4f1a\u8fdb\u5165\u4e0b\u4e00\u9636\u6bb5\u3002\r\n\r\n\u6d41\u7a0b\u5982\u4e0b\uff1a \r\n\r\n```\r\n\r\n   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u250c\u2500>\u2502           timers          \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502  \u2502     pending callbacks     \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502  \u2502       idle, prepare       \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502   incoming:   \u2502\r\n\u2502  \u2502           poll            \u2502<\u2500\u2500\u2500\u2500\u2500\u2524  connections, \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502   data, etc.  \u2502\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\u2502  \u2502           check           \u2502\r\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2514\u2500\u2500\u2524      close callbacks      \u2502\r\n   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n  \r\n```\r\n\r\n\u2460 \u5b9a\u65f6\u5668(timers)\uff1a\u672c\u9636\u6bb5\u6267\u884c\u5df2\u7ecf\u88ab setTimeout() \u548c setInterval() \u7684\u56de\u8c03\u51fd\u6570\u3002\r\n\r\n**\u6ce8\u610f\uff1a\u8f6e\u8be2\u9636\u6bb5\u63a7\u5236\u4f55\u65f6\u5b9a\u65f6\u5668\u6267\u884c\u3002**\u8f6e\u8be2\u9636\u6bb5\u56de\u8c03\u961f\u5217\u6267\u884c\u5b8c\u6bd5\u540e\uff0cnode\u4f1a\u68c0\u67e5\u662f\u5426\u6709\u5b9a\u65f6\u5668\u5230\u671f\uff0c\u5982\u679c\u6709\uff0c\u5219\u56de\u5230timers\u9636\u6bb5\u6267\u884c\u5b9a\u65f6\u5668\u56de\u8c03\uff0c\u6240\u4ee5\u5b9a\u65f6\u5668\u7684\u6267\u884c\u65f6\u95f4\u4e0d\u662f\u786e\u5b9a\u7684\uff0c\u5b9a\u65f6\u5668\u6709\u53ef\u80fd\u88ab\u8f6e\u8be2\u9636\u6bb5\u6b63\u5728\u6267\u884c\u7684\u56de\u8c03\u963b\u585e\u5bfc\u81f4\u5ef6\u8fdf\uff0cnode\u53ea\u4fdd\u8bc1\u4fdd\u8bc1\u5c3d\u5feb\u6267\u884c\u3002\r\n\r\n\u2461 \u5f85\u5b9a\u56de\u8c03(pending callbacks)\uff1a\u6267\u884c\u5ef6\u8fdf\u5230\u4e0b\u4e00\u4e2a\u5faa\u73af\u8fed\u4ee3\u7684 I/O \u56de\u8c03\u3002  \r\n\r\n\u6b64\u9636\u6bb5\u5bf9\u67d0\u4e9b\u7cfb\u7edf\u64cd\u4f5c\uff08\u5982 TCP \u9519\u8bef\u7c7b\u578b\uff09\u6267\u884c\u56de\u8c03\u3002\u4f8b\u5982\uff0c\u5982\u679c TCP \u5957\u63a5\u5b57\u5728\u5c1d\u8bd5\u8fde\u63a5\u65f6\u63a5\u6536\u5230 ECONNREFUSED\uff0c\u5219\u67d0\u4e9b *nix \u7684\u7cfb\u7edf\u5e0c\u671b\u7b49\u5f85\u62a5\u544a\u9519\u8bef\u3002\u8fd9\u5c06\u88ab\u6392\u961f\u4ee5\u5728 \u6302\u8d77\u7684\u56de\u8c03 \u9636\u6bb5\u6267\u884c\u3002\r\n\r\n\u2462 idle, prepare\uff1a\u4ec5\u7cfb\u7edf\u5185\u90e8\u4f7f\u7528\u3002 \r\n\r\n\u2463 \u8f6e\u8be2(poll)\uff1a\u68c0\u7d22\u65b0\u7684 I/O \u4e8b\u4ef6;\u6267\u884c\u4e0e I/O \u76f8\u5173\u7684\u56de\u8c03\uff08\u51e0\u4e4e\u6240\u6709\u60c5\u51b5\u4e0b\uff0c\u9664\u4e86\u5173\u95ed\u7684\u56de\u8c03\u51fd\u6570\uff0c\u90a3\u4e9b\u7531\u8ba1\u65f6\u5668\u548c setImmediate() \u8c03\u5ea6\u7684\u4e4b\u5916\uff09\uff0c\u5176\u4f59\u60c5\u51b5 node \u5c06\u5728\u9002\u5f53\u7684\u65f6\u5019\u5728\u6b64\u963b\u585e\u3002 \r\n\r\n\u8f6e\u8be2 \u9636\u6bb5\u6709\u4e24\u4e2a\u91cd\u8981\u7684\u529f\u80fd\uff1a\r\n\r\n1.\u8ba1\u7b97\u5e94\u8be5\u963b\u585e\u548c\u8f6e\u8be2 I/O \u7684\u65f6\u95f4\u3002 \r\n\r\n2.\u63a5\u7740\uff0c\u5904\u7406\u8f6e\u8be2\u961f\u5217\u91cc\u7684\u4e8b\u4ef6\u3002 \r\n\r\n\u5f53\u4e8b\u4ef6\u5faa\u73af\u8fdb\u5165\u8f6e\u8be2\u9636\u6bb5\u4e14\u6ca1\u6709\u88ab\u8c03\u5ea6\u7684\u8ba1\u65f6\u5668\u65f6\uff0c\u5c06\u53d1\u751f\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u4e4b\u4e00\uff1a\r\n\r\n    1)\u5982\u679c\u8f6e\u8be2\u961f\u5217\u4e0d\u662f\u7a7a\u7684 \uff0c\u4e8b\u4ef6\u5faa\u73af\u5c06\u5faa\u73af\u8bbf\u95ee\u56de\u8c03\u961f\u5217\u5e76\u540c\u6b65\u6267\u884c\u5b83\u4eec\uff0c\u76f4\u5230\u961f\u5217\u5df2\u7528\u5c3d\uff0c\u6216\u8005\u8fbe\u5230\u4e86\u4e0e\u7cfb\u7edf\u76f8\u5173\u7684\u786c\u6027\u9650\u5236\u3002\r\n\r\n    2)\u5982\u679c\u8f6e\u8be2\u961f\u5217\u662f\u7a7a\u7684 \uff0c\u8fd8\u6709\u4e24\u4ef6\u4e8b\u53d1\u751f\uff1a\r\n\r\n        \u5982\u679c\u811a\u672c\u88ab setImmediate() \u8c03\u5ea6\uff0c\u5219\u4e8b\u4ef6\u5faa\u73af\u5c06\u7ed3\u675f \u8f6e\u8be2 \u9636\u6bb5\uff0c\u5e76\u7ee7\u7eed \u68c0\u67e5 \u9636\u6bb5\u4ee5\u6267\u884c\u90a3\u4e9b\u88ab\u8c03\u5ea6\u7684\u811a\u672c\u3002\r\n\r\n        \u5982\u679c\u811a\u672c\u672a\u88ab setImmediate() \u8c03\u5ea6\uff0c\u5219\u4e8b\u4ef6\u5faa\u73af\u5c06\u7b49\u5f85\u56de\u8c03\u88ab\u6dfb\u52a0\u5230\u961f\u5217\u4e2d\uff0c\u7136\u540e\u7acb\u5373\u6267\u884c\u3002\r\n\r\n\u4e00\u65e6 \u8f6e\u8be2 \u961f\u5217\u4e3a\u7a7a\uff0c\u4e8b\u4ef6\u5faa\u73af\u5c06\u68c0\u67e5 _\u5df2\u8fbe\u5230\u65f6\u95f4\u9608\u503c\u7684\u8ba1\u65f6\u5668_\u3002\u5982\u679c\u4e00\u4e2a\u6216\u591a\u4e2a\u8ba1\u65f6\u5668\u5df2\u51c6\u5907\u5c31\u7eea\uff0c\u5219\u4e8b\u4ef6\u5faa\u73af\u5c06\u7ed5\u56de\u8ba1\u65f6\u5668\u9636\u6bb5\u4ee5\u6267\u884c\u8fd9\u4e9b\u8ba1\u65f6\u5668\u7684\u56de\u8c03\u3002\r\n\r\n\u2464 \u68c0\u6d4b(check)\uff1asetImmediate() \u56de\u8c03\u51fd\u6570\u5728\u8fd9\u91cc\u6267\u884c\u3002 \r\n\r\n\u2465 \u5173\u95ed\u7684\u56de\u8c03\u51fd\u6570(close callbacks )\uff1a\u4e00\u4e9b\u5173\u95ed\u7684\u56de\u8c03\u51fd\u6570\uff0c\u5982\uff1asocket.on('close', ...)\u3002\r\n\r\n\u5982\u679c\u5957\u63a5\u5b57\u6216\u5904\u7406\u51fd\u6570\u7a81\u7136\u5173\u95ed\uff08\u4f8b\u5982 socket.destroy()\uff09\uff0c\u5219'close' \u4e8b\u4ef6\u5c06\u5728\u8fd9\u4e2a\u9636\u6bb5\u53d1\u51fa\u3002\u5426\u5219\u5b83\u5c06\u901a\u8fc7 process.nextTick() \u53d1\u51fa\u3002"},q5Ws:function(n,e,r){"use strict";var t=r("qhky"),o=r("nKUr");e["a"]=n=>{var e=n.title,r=n.description,i=n.keywords,a=n.children;return Object(o["jsxs"])(t["a"],{children:[Object(o["jsxs"])("title",{children:[e," - \u524d\u7aef\u7f51"]}),Object(o["jsx"])("meta",{name:"description",content:r}),Object(o["jsx"])("meta",{name:"keywords",content:i}),a]})}},tZMB:function(n,e,r){"use strict";r.r(e),e["default"]='\x3c!--\r\n * @Date: 2021-12-23 16:46:37\r\n * @LastEditors: lzj\r\n * @LastEditTime: 2021-12-27 14:48:26\r\n * @FilePath: \\developer-platformd:\\lzj\\qianduan.shop\\front\\data\\blogs\\33.md\r\n--\x3e\r\n\r\n# Doris Stream Load \u5bfc\u5165\u6570\u636e\r\n\r\n## \u80cc\u666f\r\n\r\n\u6211\u4eec\u9700\u8981\u5bf9\u6e38\u620f\u4e0a\u62a5\u7684\u6253\u70b9\u4e8b\u4ef6\u8fdb\u884c\u5206\u6790\u5904\u7406\uff0c\u8001\u7248\u672c\u7cfb\u7edf\u662f\u5c06log event \u4e8b\u4ef6\u65e5\u5fd7\u76f4\u63a5\u5199\u5165\u5173\u7cfb\u578b\u6570\u636e\u5e93 mysql \u4e2d\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4e0d\u5229\u4e8e\u5bf9\u540e\u7eed\u505a\u5206\u6790\u5904\u7406\uff0c\u73b0\u5728\u51c6\u5907\u91c7\u7528 Doris \u6570\u636e\u5e93\u6765\u505a\u6570\u636e\u67e5\u8be2\u5206\u6790\u3002\r\n\r\n\u6700\u5f00\u59cb\u6211\u4eec\u662f\u6536\u5230\u4e8b\u4ef6\u65e5\u5fd7\u540e\u5b9e\u65f6\u5199\u5165Doris\uff0c\u4f7f\u7528\u7684\u662f insert into \u8bed\u53e5\u76f4\u63a5\u5199\u6570\u636e\uff0c\u8fd9\u79cd\u65b9\u5f0f\u662f\u4e0d\u88ab\u5b98\u65b9\u63a8\u8350\u7684\uff0c\u6211\u4eec\u5c31\u662f\u6ca1\u7ec6\u8bfb\u6587\u6863\uff0c\u624d\u6d6a\u8d39\u65f6\u95f4\u5728\u8fd9\u79cd\u5bfc\u5165\u65b9\u5f0f\u4e0a\u6d4b\u8bd5\uff0c\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u63d0\u793a\u9519\u8bef\u5982\u4e0b\uff1a\r\n\r\n```\r\nfailed to init delta writer. version count: 504, exceed limit: 500. tablet: 28970.1449237103.0c4ddb2afb4291b5-e24959d87fa48e98\r\n```\r\n\r\n\u8fd9\u662f\u56e0\u4e3a\u5bfc\u5165\u6570\u636e\u8fc7\u4e8e\u9891\u7e41\uff0c\u6570\u636e\u7248\u672c\u592a\u591a\u4e86\uff0c\u6240\u4ee5\u4e0d\u5141\u8bb8\u5bfc\u5165\u3002\r\n\r\n\u7531\u4e8e\u65f6\u95f4\u7d27\uff0c\u4e0d\u60f3\u5bf9\u73b0\u6709\u7cfb\u7edf\u505a\u8fc7\u591a\u6539\u52a8\uff0c\u6211\u4eec\u8f6c\u6362\u4e86\u5bfc\u5165\u65b9\u5f0f\uff0c\u91c7\u7528\u4e86Stream Load \u65b9\u5f0f\u5bfc\u5165\u6570\u636e\u3002\r\n\r\n## \u6d4b\u8bd5\u8fc7\u7a0b\r\n\r\nDoris \u90e8\u7f72\u5728 AWS \u7684 EC2 \u4e2d\uff0c\u76ee\u524d\u6d4b\u8bd5\u73af\u5883\u90e8\u7f72\u4e86\u4e09\u53f0 BE\uff082\u68384G\uff09,\u4e00\u53f0 FE(2\u68388G)\u3002\r\n\r\n\u5b9e\u73b0\u601d\u8def\u4e3b\u8981\u662f\uff1a\u670d\u52a1\u7aef\u6536\u5230\u6253\u70b9\u4e8b\u4ef6\u540e\u76f4\u63a5\u5199\u5165 AWS \u7684 Kineses\uff0clambda \u518d\u6279\u91cf\u8bfb\u53d6\u6570\u636e\u91c7\u7528 Stream Load \u7684\u65b9\u5f0f\u5bfc\u5165 Doris\u3002\r\n\r\n\u9996\u5148\u662f\u672c\u5730\u6d4b\u8bd5\uff0c\u6839\u636e\u901a\u8fc7 curl \u547d\u4ee4\u8fde\u63a5 FE \u5bfc\u5165\u6570\u636e\uff0cFE \u4f1a\u8fd4\u56de\u4e00\u4e2a\u91cd\u5b9a\u5411\u5230 BE\uff0c\u8fde\u63a5 BE \u624d\u4f1a\u771f\u6b63\u5bfc\u5165\u6570\u636e\uff0c\u4f46\u662f\u8fd4\u56de\u7684 BE \u7684 ip \u5730\u5740\u662fip\u5185\u7f51,\u5916\u90e8\u65e0\u6cd5\u8bbf\u95ee\uff0c\u6240\u4ee5\u63d0\u793a\u8fde\u63a5\u4f1a\u8d85\u65f6\u3002\r\n\r\n```\r\n*   Trying 34.214.***.**...\r\n* TCP_NODELAY set\r\n* Connected to 34.214.***.** (34.214.***.**) port 8030 (#0)\r\n* Server auth using Basic with user \'root\'\r\n> PUT /api/Didabu/log_event/_stream_load HTTP/1.1\r\n> Host: 34.214.***.**:8030\r\n> Authorization: Basic cm9vdDpkb3Jpc19yb290\r\n> User-Agent: curl/7.55.1\r\n> Accept: */*\r\n> Content-Length: 144\r\n> Expect: 100-continue\r\n>\r\n< HTTP/1.1 307 Temporary Redirect\r\n< Date: Mon, 27 Dec 2021 05:37:00 GMT\r\n< Vary: Origin\r\n< Vary: Access-Control-Request-Method\r\n< Vary: Access-Control-Request-Headers\r\n< Content-Language: en-US\r\n< Location: http://root:doris_root@172.31.***.**:8040/api/Didabu/log_event/_stream_load?\r\n< Connection: close\r\n<\r\n* Closing connection 0\r\n* Issue another request to this URL: \'http://root:doris_root@172.31.***.**:8040/api/Didabu/log_event/_stream_load?\'\r\n*   Trying 172.31.***.**...\r\n* TCP_NODELAY set\r\n* connect to 172.31.***.** port 8040 failed: Timed out\r\n* Failed to connect to 172.31.***.** port 8040: Timed out\r\n* Closing connection 1\r\ncurl: (7) Failed to connect to 172.31.***.** port 8040: Timed out\r\n\r\n```\r\n\r\n\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u662f\u516c\u6709\u4e91\u90e8\u7f72\uff0cBE \u6ce8\u518c\u5230 FE \u4f7f\u7528\u7684\u662f\u5185\u7f51IP, FE \u548c BE \u662f\u901a\u8fc7\u5185\u7f51 IP \u8fde\u63a5\u901a\u4fe1\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u901a\u8fc7 curl \u547d\u4ee4\u672c\u5730\u6d4b\u8bd5\u5bfc\u5165\u65f6\uff0cFE \u8fd4\u56de\u7684 BE \u5730\u5740\u662f\u5185\u7f51 IP\uff0c\u672c\u5730\u65e0\u6cd5\u8fde\u63a5\u3002\r\n\r\n\u6211\u4eec\u5c1d\u8bd5\u8fc7\u5c06 BE \u7684 priority-network \u7ed1\u5b9a\u7684 ip \u6539\u4e3a\u5b83\u7684\u516c\u7f51 IP,\u4f46\u662f\u6ca1\u6709\u6210\u529f\uff0c\u53ea\u80fd\u7ed1\u5b9a\u672c\u673a\u7f51\u5361\u7684 IP, \u5373 ip addr \u547d\u4ee4\u770b\u5230\u7684 IP;\r\n\r\n>\u4e0d\u540c\u4e8e\u5176\u4ed6\u547d\u4ee4\u7684\u63d0\u4ea4\u65b9\u5f0f\uff0cStream Load \u662f\u901a\u8fc7 HTTP \u534f\u8bae\u4e0e Doris \u8fdb\u884c\u8fde\u63a5\u4ea4\u4e92\u7684\u3002\r\n>\r\n>\u8be5\u65b9\u5f0f\u4e2d\u6d89\u53ca HOST:PORT \u5e94\u4e3a HTTP \u534f\u8bae\u7aef\u53e3\u3002\r\n>\r\n>\u516c\u6709\u4e91\u7528\u6237\u5fc5\u987b\u4f7f\u7528 Compute Node\uff08BE\uff09\u7684 HTTP \u534f\u8bae\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 8040\u3002\r\n>\r\n>\u79c1\u6709\u5316\u90e8\u7f72\u7528\u6237\u53ef\u4ee5\u4f7f\u7528 Leader Node\uff08FE\uff09\u7684 HTTP \u534f\u8bae\u7aef\u53e3\uff0c\u9ed8\u8ba4\u4e3a 8030\u3002\u4f46\u987b\u4fdd\u8bc1\u5ba2\u6237\u7aef\u6240\u5728\u673a\u5668\u7f51\u7edc\u80fd\u591f\u8054\u901a Compute Node \u6240\u5728\u673a\u5668\u3002\r\n\r\n\u6211\u4eec\u672c\u5730\u6d4b\u8bd5\u53ea\u80fd\u76f4\u63a5\u8fde\u63a5 BE \u7684 8040\u6d4b\u8bd5\uff0c\u81f3\u4e8e\u6d4b\u8bd5\u53ca\u751f\u4ea7\u73af\u5883\u5bfc\u5165\u5b9e\u5728 lambda \u4e2d\u5b8c\u6210\uff0clambda \u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e VPC \u8bbf\u95ee EC2 \u5185\u7f51 IP\uff0c\u4e0d\u5b58\u5728\u8bbf\u95ee\u4e0d\u4e86\u7684\u95ee\u9898\u3002\r\n\r\n## \u5176\u4ed6\u95ee\u9898\r\n\r\n1.be \u65e5\u5fd7\u5927\u91cf\u51fa\u73b0\uff1atoo many filtered rows\r\n\r\n\u539f\u56e0\uff1a\u63a8\u9001\u7684\u6570\u636e\u5217\u6570\u4e0d\u7b26\u5408\u6216\u6570\u636e\u683c\u5f0f\u4e0d\u5bf9\u3002\r\n\r\n## \u53c2\u8003\u94fe\u63a5\r\n\r\n<a href="http://18.237.177.172:8030/Playground/structure/information_schema" target="_blank" rel="nofollow">Doris\u6587\u6863</a>\r\n\r\n'},tljC:function(n,e,r){"use strict";r.r(e),e["default"]="# Login status -- cookies\u3001 session\u3001 token\r\n\r\nWe all know that http is stateless, which means that the state cannot be maintained between the requester and the responder, it is all one-time, and he does not know what happened before the request. However, in some application scenarios, we need to maintain the status. For example, various background management systems need to log in to perform various operations. At this time, we need to maintain the user's login status.\r\n\r\nCommon login schemes are:\r\n\r\n1.cookies+session\r\n\r\n2.json web token(JWT)\r\n\r\n## cookie and session\r\n\r\nCookies are a type of front-end storage, but compared to other methods such as localStorage, with the help of HTTP headers and browser capabilities, cookies can be front-end unaware\u3002\r\n\r\nThe general process is like this\uff1a\r\n\r\n- In the interface that provides the markup, directly \"seed\" to the browser through the Set-Cookie field of the HTTP return header\u3002\r\n- When the browser initiates a request, it will automatically bring the cookie to the interface through the Cookie field of the HTTP request header\u3002\r\n- The server and the SessionId field in the cookie query the user session data of the user to which the current request belongs\u3002\r\n\r\n### cookie config\r\n\r\n- **Domain / Path**\r\n  The Domain attribute specifies which domains should be attached with this cookie when the browser makes an HTTP request. If this attribute is not specified, the browser will set it as the first-level domain name of the current URL by default. For example, http://www.example.com will be set to http://example.com, and if you visit http:// Any subdomain of example.com, HTTP requests will also carry this cookie. If the domain name specified by the server in the Set-Cookie field does not belong to the current domain name, the browser will reject the cookie.\r\n  The Path attribute specifies which paths to attach this cookie to when the browser makes an HTTP request. As long as the browser finds that the Path attribute is the first part of the HTTP request path, it will include this cookie in the header information. For example, if the PATH attribute is /, then the request /docs path will also include the cookie. Of course, the premise is that the domain name must be consistent\u3002\r\n\r\n- **Expires / Max-Age**\r\n  The Expires attribute specifies a specific expiration time. After the specified time, the browser will no longer retain the cookie. Its value is in UTC format. If this property is not set, or set to null, the cookie is only valid in the current session. Once the browser window is closed and the current session ends, the cookie will be deleted. In addition, the browser determines whether the cookie expires according to the local time. Since the local time is imprecise, there is no way to guarantee that the cookie will expire at the time specified by the server.\r\n  The Max-Age property specifies the number of seconds the cookie will exist from now on, such as 60 _ 60 _ 24 \\* 365 (that is, one year). After this time, the browser will no longer keep this cookie.\r\n  If both Expires and Max-Age are specified, the value of Max-Age will take precedence.\r\n  If the Set-Cookie field does not specify the Expires or Max-Age attribute, then this cookie is a session cookie, that is, it only exists in this session. Once the user closes the browser, the browser will no longer retain this cookie\u3002\r\n\r\n- **Secure / HttpOnly**\r\n  The Secure attribute specifies that the browser can only send this cookie to the server under the encrypted protocol HTTPS. On the other hand, if the current protocol is HTTP, the browser will automatically ignore the Secure attribute sent by the server. This property is just a switch, no value needs to be specified. This switch is automatically turned on if the communication is HTTPS protocol.\r\n  The HttpOnly attribute specifies that the cookie cannot be obtained through JavaScript scripts, mainly because the Document.cookie attribute, XMLHttpRequest object and Request API cannot obtain this attribute. This prevents the cookie from being read by the script, and the cookie is only included when the browser makes an HTTP request\u3002\r\n\r\n### server session\r\n\r\nSession originally refers to the session state between the client and the server. Since the credentials are stored on the server, the information stored on the server is later called session.\r\nNow the server maintains the login state by itself, only sends a key to the client, and then maintains a key-value table in itself. If there is a key in the request and the corresponding value can be found in the table, it is considered legal\u3002\r\n\r\n### Questions\r\n\r\n#### 1.Cluster server session synchronization\r\n\r\nThe session can be extracted for unified management, such as using Redis services\r\n\r\n#### 2.There is no way to avoid CSRF attacks\r\n\r\n#### 3.Cookies for cross-domain requests\r\n\r\n#### 4.cookie sharing\r\n\r\nCookie sharing under the same domain name.\r\n\r\n## jWT\r\n\r\nUsing JWT to maintain the login state, the server no longer needs to maintain the state table. It only sends an encrypted data token to the client, and each request brings this encrypted data, and then decrypts it to verify whether it is legal. Since it is encrypted data, even if the user can modify it, the chance of hit is very small.\r\n\r\n### Simple example of JWT in node\r\n\r\nAs a first step, use the jsonwebtoken middleware in your /login route to generate tokens\uff1a\r\n\r\n```\r\nconst jwt = require('jsonwebtoken')\r\nlet token = jwt.sign({\r\n  name: user name\r\n  }, config.secret, {\r\n  expiresIn: '24h'\r\n})\r\nres.cookie('token', token)\r\n```\r\n\r\nThe second step is to register the express-jwt middleware in Node's entry file app.js to verify the token:\r\n\r\n```\r\nconst expressJwt = require('express-jwt')\r\napp.use(expressJwt({\r\n  secret: config.secret,\r\n  getToken: (req) => {\r\n    return req.cookies.token || null\r\n  }\r\n}).unless({\r\n  path: [\r\n  '/login'\r\n  ]\r\n}))\r\n```\r\nIf getToken returns null, the middleware will throw an UnauthorizedError exception:\r\n\r\n```\r\napp.use(function (err, req, res, next) {\r\n//When the token verification fails, the following error will be thrown\r\nif (err.name === 'UnauthorizedError') {\r\n      res.status(401).json({\r\n      status: 'fail',\r\n      message: 'Identity verification expired, please log in again'\r\n    });\r\n  }\r\n});\r\n```\r\n"},u0sx:function(n,e,r){"use strict";r.r(e),e["default"]='# React \u5b9e\u73b0 PDF \u9884\u89c8\r\n\r\n## 1.embed\u6807\u7b7e\u5b9e\u73b0PDF\u9884\u89c8\r\n\r\n\u8fd9\u79cd\u65b9\u5f0f\u867d\u7136\u7b80\u5355\u4f46\u662f**\u4e0d\u517c\u5bb9\u79fb\u52a8\u7aef**\uff0c\u5b9e\u73b0\u5982\u4e0b\uff1a\r\n\r\n```\r\n\r\n<embed\r\n    src="path/to/pdf"\r\n    type="application/pdf"\r\n    style={{ width: \'100vw\', height: \'100vh\' }}\r\n></embed>\r\n\r\n```\r\n\r\n## 2.react-pdf\u7ec4\u4ef6\r\n\r\n\u8fd9\u79cd\u65b9\u5f0f**\u517c\u5bb9PC\u548c\u79fb\u52a8**\uff0c\u4f46\u662f\u79fb\u52a8\u7aef\u663e\u793a\u4e0d\u597d\u67e5\u770b\uff0c\u6837\u5f0f\u8c03\u6574\u6bd4\u8f83\u9ebb\u70e6\u3002\r\n\r\n\u5206\u9875\u53ea\u80fd\u81ea\u5df1\u5b9e\u73b0\uff0c\u7ec4\u4ef6\u672c\u8eab\u4e0d\u63d0\u4f9b\u5206\u9875\u3002\r\n\r\n\u6ce8:\u5982\u679c\u60a8\u4f7f\u7528 Browserify \u6216\u6253\u5305\u5de5\u5177\uff0c\u5219\u5fc5\u987b\u81ea\u884c\u786e\u4fdd\u5c06\u8be5pdf.worker.js\u6587\u4ef6pdfjs-dist/build\u590d\u5236\u5230\u9879\u76ee\u7684\u8f93\u51fa\u6587\u4ef6\u5939\u4e2d\u3002\r\n\r\n\u5b9e\u73b0\u5982\u4e0b\uff0c\u793a\u4f8b\u4ee3\u7801\u4e2d\u7684pdf.worker.min.js\u4f7f\u7528\u7684\u662fCDN\u8d44\u6e90\uff0c\u751f\u4ea7\u73af\u5883\u53ef\u80fd\u51fa\u73b0\u52a0\u8f7d\u4e0d\u5230\u5bfc\u81f4\u9884\u89c8\u5931\u8d25\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u6700\u597d\u4e0b\u8f7d\u5230\u672c\u5730\uff0c\u4ece\u672c\u5730\u5f15\u7528\uff1a\r\n\r\n\r\n```\r\nimport { Document, Page, pdfjs } from \'react-pdf\';\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.min.js`;\r\n\r\nexport default ()=>{   \r\n    const [numPages, setNumPages] = useState(0);\r\n    const [pageNumber, setPageNumber] = useState(1);\r\n\r\n    const onDocumentLoadSuccess = ({ numPages }:any) => {\r\n      setNumPages(numPages);\r\n    }\r\n    return <Document\r\n        className="className"\r\n        file="path/to/pdf"\r\n        loading={<div className={styles.loading}><Spin size="large" /></div>}\r\n        onLoadSuccess={onDocumentLoadSuccess}\r\n    >\r\n        <Page pageNumber={pageNumber} />\r\n    </Document>\r\n    {"\u81ea\u5b9a\u4e49pagination\u5206\u9875\uff0c\u901a\u8fc7setPageNumber\u5b9e\u73b0\u7ffb\u9875"}\r\n}\r\n\r\n```\r\n\r\n\u66f4\u8be6\u7ec6\u7684\u7528\u6cd5\u9644\u4e0agithub\u5730\u5740\uff1a<a href="https://github.com/wojtekmaj/react-pdf" rel="nofollow" target="_blank"> react-pdf </a>'},wn87:function(n,e,r){"use strict";r.r(e),e["default"]="# \u5347\u7ea7 egg-socket.io \u5230 4.4.0 \r\n\r\n\u963f\u91cc\u8fd9\u4e2a\u6846\u67b6\u5df2\u7ecf\u5f88\u4e45\u6ca1\u66f4\u65b0\u4e86\uff0c\u8fde\u63d2\u4ef6\u6a21\u5757\u90fd\u6ca1\u6709\u4eba\u7ef4\u62a4\u3002\u672c\u6765\u60f3\u7740\u7528 egg-socket.io \u7684 2.1.1 \u7248\u672c\u5c31\u884c\u4e86\uff0c\u4f46\u662f\u7528\u8d77\u6765\u53d1\u73b0\u5f88\u591a\u7684 api \u90fd\u7528\u4e0d\u4e86\u4e86\uff0c\u4e8e\u662f\u6709\u4e86\u5347\u7ea7\u7684\u60f3\u6cd5\uff0c\u91cd\u5199\u914d\u7f6e\u3002\r\n\r\n\u672c\u6587\u8bb0\u5f55\u4e86\u5347\u7ea7\u53ca\u4fee\u6539\u914d\u7f6e\u7684\u6b65\u9aa4\u4f9b\u5927\u5bb6\u53c2\u8003\u3002\r\n\r\n## \u5347\u7ea7\u5305\r\n\r\n```\r\nnpm uninstall socket.io redis-adapter redis\r\nnpm install socket.io@4.4.0 @socket.io/redis-adapter@7.1.0 ioredis --save\r\n```\r\n\r\n\u5c31\u8fd9\u4e48\u7b80\u5355\uff0c\u56e0\u4e3a\u4ece redis \u7684\u9002\u914d\u5668\u66f4\u540d\u4e86\uff0c\u65e2\u7136\u7528\u6700\u65b0\u7248\u672c\uff0c\u4e5f\u90fd\u8ddf\u4e0a\u5427\uff0c\u4e0d\u8fc7 redis \u6700\u65b0\u7684 4 \u6d4b\u8bd5\u597d\u50cf\u6709\u95ee\u9898\uff0c\u61d2\u5f97\u6298\u817e\uff0c\u76f4\u63a5\u4e0a ioredis\u3002\r\n\r\n## \u6539\u914d\u7f6e\r\n\r\n\u56e0\u4e3a\u6211\u4eec\u66f4\u6362\u4e86\u5305\uff0c\u6240\u4ee5\u9700\u8981\u5230\u5bf9\u5e94\u7684\u6587\u4ef6\u5939\u628a\u5305\u6362\u4e00\u4e0b\r\n\r\n```\r\n- const redis = require('socket.io-redis');\r\n+ const { createAdapter } = require('@socket.io/redis-adapter');\r\n+ const Redis = require('ioredis');\r\n```\r\n\r\n\u7136\u540e\u627e\u5230\u4ee3\u7801\r\n\r\n```\r\nif (config.redis) {\r\n```\r\n\r\n\u4fee\u6539\u5982\u4e0b\u5185\u5bb9\uff1a\r\n\r\n```\r\n-    const adapter = redis(config.redis);\r\n-    // https://github.com/socketio/socket.io-redis/issues/21\r\n-    adapter.prototype.on('error', err => {\r\n-      app.coreLogger.error(err);\r\n-    });\r\n-    app.io.adapter(adapter);\r\n+    const pubClient = new Redis(config.redis);\r\n+    const subClient = pubClient.duplicate();\r\n+    pubClient.on('error', err => {\r\n+      app.coreLogger.error(err);\r\n+    });\r\n+    subClient.on('error', err => {\r\n+      app.coreLogger.error(err);\r\n+    });\r\n+    config.adapter = {\r\n+      key: config.adapter?config.adapter.key:undefined,\r\n+      requestsTimeout: config.adapter?config.adapter.requestsTimeout:5000,\r\n+      publishOnSpecificResponseChannel: config.adapter?config.adapter.requpublishOnSpecificResponseChannel: false\r\n+    }\r\n+    app.io.adapter(createAdapter(pubClient, subClient,config.adapter));\r\n\r\n```\r\n\r\n\u8fd9\u91cc\u52a0\u4e86\u4e00\u4e2a adapter \u7684\u53c2\u6570\uff0c\u8fd9\u662f\u4e3a\u4e86\u53ef\u4ee5\u5b9a\u5236\u9002\u914d\u5668\u3002\r\n\r\n## \u4f7f\u7528\r\n\r\n\u56e0\u4e3a\u6211\u6ca1\u6709\u628a\u4ee3\u7801\u53d1\u6210\u5305\uff0c\u6240\u4ee5\u6211\u76f4\u63a5\u628a\u4ee3\u7801\u62f7\u8d1d\u5230\u9879\u76ee\u5e95\u4e0b\r\n\r\n\u5728\u9879\u76ee\u6839\u76ee\u5f55\u4e2d\u65b0\u5efa\u4e00\u4e2aplugins\u6587\u4ef6\u5939\uff0c\u628a\u63d2\u4ef6\u62f7\u8d1d\u5230\u8be5\u76ee\u5f55\u4e0b\uff0c\u7136\u540e\u4fee\u6539app/config/plugin.js\r\n```\r\n{\r\n  io:{\r\n    enable: true,\r\n    package: \"../../plugins/egg-socket.io\"\r\n  }\r\n}\r\n```\r\n\r\n\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u7528 4.4.0 \u7248\u672c\u4e86\u3002"}}]);