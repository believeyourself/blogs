<!--
 * @Date: 2021-12-27 14:41:11
 * @LastEditors: lzj
 * @LastEditTime: 2022-01-22 09:36:06
 * @FilePath: \qianduan.shop\front\data\blogs\5.md
-->
# NodeJs initiates https request with error: certificate has expired

In the course of a Node development project, it is likely that we will need to request an external address in order to call an external function interface or pull external data. Usually we use https to secure the communication process, here when we use NodeJs to initiate an https request it prompts: certificate has expired error.

## How to solve
1. The simple and brutal way, set the environment variables, add the following code to the top of your file.

`process.env.NODE_TLS_REJECT_UNAUTHORIZED = '0';`

**Note: This approach is problematic, and will make NodeJs not reject unauthenticated certificates**

2. set **rejectUnauthorized** of request options to **false**, ignoring certificate security
```
  http.request(path,{
    rejectUnauthorized:false
  })
```
3. Export your certificate file (XXX.key and XXX.pem) to initiate a request specifying the certificate using the request destination address.
```
let express = require("express");
let https = require("https");
let fs = require("fs");
// configure
const httpsOption = {
    key : fs.readFileSync(". /path/XXX.key"),
    cert: fs.readFileSync(". /path/XXX.pem")
}
https.createServer(httpsOption, app).listen(443);
```
